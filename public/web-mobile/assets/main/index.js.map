{"version":3,"sources":["assets/scripts/components/Alert.js","assets/scripts/AnysdkMgr.js","assets/scripts/AudioMgr.js","assets/scripts/components/Chat.js","assets/scripts/components/CheckBox.js","assets/scripts/components/CreateRole.js","assets/scripts/components/CreateRoom.js","assets/scripts/components/DingQue.js","assets/scripts/components/Folds.js","assets/scripts/GameNetMgr.js","assets/scripts/components/GameOver.js","assets/scripts/components/GameResult.js","assets/scripts/Global.js","assets/scripts/HTTP.js","assets/scripts/components/Hall.js","assets/scripts/components/History.js","assets/scripts/HotUpdate.js","assets/scripts/components/HuanSanZhang.js","assets/scripts/components/ImageLoader.js","assets/scripts/components/JoinGameInput.js","assets/scripts/components/LoadingLogic.js","assets/scripts/components/Login.js","assets/scripts/components/MJGame.js","assets/scripts/components/MJRoom.js","assets/scripts/MahjongMgr.js","assets/scripts/Net.js","assets/scripts/components/NoticeTip.js","assets/scripts/components/OnBack.js","assets/scripts/components/PengGangs.js","assets/scripts/components/PopupMgr.js","assets/scripts/components/RadioButton.js","assets/scripts/components/RadioGroupMgr.js","assets/scripts/components/ReConnect.js","assets/scripts/components/ReplayCtrl.js","assets/scripts/ReplayMgr.js","assets/scripts/components/Seat.js","assets/scripts/components/Settings.js","assets/scripts/components/TimePointer.js","assets/scripts/components/UserInfoShow.js","assets/scripts/UserMgr.js","assets/scripts/Utils.js","assets/scripts/VoiceMgr.js","assets/scripts/components/Voice.js","assets/scripts/components/WaitingConnection.js","assets/scripts/3rdparty/socket-io.js","assets/migration/use_v2.0.x_cc.Toggle_event.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACI;AAEA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhBQ;AAmBZ;AACA;AACI;AACI;AACH;;AACD;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACH;AAED;AACI;AACI;AACI;AACH;AACJ;;AACD;AACA;AACH;AAED;AACI;AACA;AACA;AACA;;AACA;AACI;AACA;AACA;AACH;AAEG;AACA;AACH;AACJ;AAED;AACI;AACI;AACH;AACJ;AAGD;AAEA;;AA5EK;;;;;;;;;;ACAT;AACI;AAEA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXQ;AAcZ;AACA;AAGA;AACA;AAEA;AAEA;AACI;AACA;AACH;AAED;AAGI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AAED;AAEI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AAED;AACI;AACI;AACH;;AACD;AACA;AACA;AACA;AACA;;AACA;AACI;AACH;;AACD;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;AACA;AACI;AACI;AACA;AACT;AAGS;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACH;AAEG;;AACA;AACI;AACA;AACH;;AACD;AACH;AACJ;;AACD;AACH;AAED;AAEI;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AApHI;;;;;;;;;;ACAT;AACI;AAEA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAdQ;AAiBZ;AACA;AACI;;AACA;AACI;AACH;;AAED;;AACA;AACI;AACH;;AAED;AACI;AACA;AACH;AACD;AACI;AACA;AACH;AACJ;AAED;AACA;AAEA;AAEA;AACI;AACH;AAED;AACI;AACA;;AACA;AACI;AACH;;AAED;AACI;AACH;AACJ;AAED;AACI;;AACA;AACI;AACI;AACH;AACJ;AACJ;AAED;AACI;AACI;AACA;AACH;AACJ;AAED;AACI;AACI;AACI;AACH;AAEG;AACH;;AAEJ;;AACD;AACI;AACA;AACA;AACH;AACJ;AAED;AACI;AACH;AAED;AACI;AACH;AAtGI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAT;AACI;AAEA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAhBQ;AAmBZ;AACA;AACI;AACI;AACH;;AAED;AAEA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AAGA;AACA;AAAgC;AAAQ;AAA0B;AAAnC;AAC/B;AAAgC;AAAQ;AAA2B;AAApC;AAC/B;AAAgC;AAAQ;AAAqB;AAA9B;AAC/B;AAAgC;AAAQ;AAAqB;AAA9B;AAC/B;AAAgC;AAAQ;AAAqB;AAA9B;AAC/B;AAAgC;AAAQ;AAAsB;AAA/B;AAC/B;AAAgC;AAAQ;AAAuB;AAAhC;AAC/B;AAAgC;AAAQ;AAA6B;AAAtC;AAC/B;AAAgC;AAAQ;AAAuB;AAAhC;AAClC;AAED;AACI;AACA;AACH;AAED;AACI;AACH;AAED;AACI;AACH;AAED;AACI;AACI;AACA;AACH;AAEG;AACA;AACH;AACJ;AAED;AACI;AACA;AACA;AACH;AAED;AACI;AACA;AACA;AACH;AAED;AACI;;AACA;AACI;AACH;;AACD;AACA;AACH;AAGD;AAEA;;AAtGK;;;;;;;;;;ACAT;AACI;AAEA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbQ;AAgBZ;AACA;AACI;AACH;AAED;AACI;AACA;AACH;AAED;AACI;;AACA;AACI;AACH;AAEG;AACH;AACJ;AAKD;AAEA;;AA5CK;;;;;;;;;;ACAT;AACI;AAEA;AACI;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAXQ;AAeZ;AACI;AAoBA;AAWA;AACA;AACA;AAEA;AACA;AAEH;AAED;AACA;AACI;AACI;AACA;AACA;AACH;;AAEJ;AAED;AACI;;AACA;AACI;AACA;AACH;;AACD;AACA;AACH;AAED;AAEA;;AAjFK;;;;;;;;;;ACAT;AACI;AAEA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnBQ;AAsBZ;AACA;AACI;AACA;AACA;AACA;;AAGA;AACA;;AACA;AACI;;AACA;AACI;AACH;AACJ;;;AAED;AACA;;AACA;AACI;;AACA;AACI;AACH;AACJ;;;AAGD;AACA;;AACA;AACI;;AACA;AACI;AACH;AACJ;;;AAGD;AACA;;AACA;AACI;;AACA;AACI;AACH;AACJ;;;AAGD;AACA;;AACA;AACI;;AACA;AACI;AACH;AACJ;;;AAGD;AACA;;AACA;AACI;;AACA;AACI;AACH;AACJ;;AAED;AACA;;AACA;AACI;;AACA;AACI;AACH;AACJ;;AAEJ;AACD;AACA;AACI;AACH;AAED;AACI;AACA;AACH;AACF;AACC;AACI;;AACA;AACI;AACI;;AAEA;AACI;AACH;AAEG;AACH;AACJ;AAEG;AACA;AACH;AACJ;;;AAED;;AACA;AACI;AACI;AACA;AACH;AACJ;;;AAED;;AACA;AACI;AACI;AACA;AACH;AACJ;;;AAED;AACA;AACA;AACA;AAEA;;AAEA;AACI;AACI;AACA;AACH;AACJ;;AAED;AACI;AACH;AAED;AACA;AALA;AAOI;AACH;AAEG;AACH;;;AAED;;AACA;AACI;AACI;AACA;AACH;AACJ;;;AAGD;;AACA;AACI;AACI;AACA;AACH;AACJ;;;AAED;;AACA;AACI;AACI;AACA;AACH;AACJ;;;AAED;AAEI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVW;AAYd;AAEG;AACI;AACA;AACA;AACA;AAJK;AAMZ;;;AAGD;AACI;AACA;AACA;AACA;AACA;AACA;AANO;AAQX;AACA;;AAEA;AACH;AAGD;AAEA;;AAhPK;;;;;;;;;;ACAT;AACI;AAEA;AACI;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAbQ;AAgBZ;AACA;AACI;AACI;AACH;;AACD;;AAEA;AACA;AACH;AAED;AACI;AACA;AAIA;AAIA;;AACA;AACI;AACA;AACA;AACA;AACH;;AACD;AAEA;;AACA;AACI;AACA;AACH;;AAED;AACI;AACH;AACJ;AAED;AACI;AACA;AACI;AACH;AAED;AACI;AACA;AACA;AACA;AACH;AAED;AACI;AACA;AACA;AACA;AACH;AACJ;AAED;AACI;AACA;AACA;;AACA;AACI;AACA;AACA;AACH;;AAED;AACA;;AACA;AACI;AACI;AACA;AACH;AACJ;;AAED;;AACA;AACI;;AACA;AACI;AACH;AAEG;AACH;;AAEJ;;AAED;;AACA;AACI;;AACA;AACI;AACH;AAEG;AACH;AACJ;AACJ;AAED;AACI;AACA;;AACA;AACI;;AACA;AACI;AACH;AAEG;AACH;;AAED;;AACA;AACI;AACH;AACJ;AACJ;AAED;AACI;AAEA;AACA;AACA;;AACA;AACI;AACH;;AAED;AACI;AACI;AACH;AACJ;AACJ;AAED;AACI;;AACA;AACI;AACH;AAEG;AACH;AAEG;AACH;;AAED;AACI;AACH;;AACD;AACA;;AAEA;AAGH;AAED;AACI;AACA;AACA;AACH;AAGD;AAEA;;AAhMK;;;;;;;;;;ACAT;AACI;AAEA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVQ;AAaZ;AACA;AACI;AACI;AACH;;AAED;AACA;AAEA;AACH;AAED;AACI;AACA;AACA;;AACA;AACI;AACA;AACA;AACA;;AACA;AACI;AACA;AACA;AACA;AACA;AACH;;AACD;AACH;;AAED;AACH;AAED;AACI;AACI;;AACA;AACI;AACH;AACJ;AACJ;AAED;AACI;AACA;AACI;AACH;AAED;AACI;AACH;AAED;AACI;AACH;AAED;AACI;AACH;AACJ;AAED;AACI;;AACA;AACI;AACH;AACJ;AAED;AACI;;AACA;AACI;AACH;;AACD;AACA;AACA;AAEA;;AACA;AACI;;AACA;AACI;AACH;;AACD;AACA;AACA;AACH;;AACD;AACI;;AACA;AACI;AACH;;AACD;AAEA;AACA;AACH;AACJ;AAED;AACI;AACA;AACH;AAGD;AAEA;;AA5HK;;;;;;;;;;ACAT;AACI;AAEA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAzBQ;AA4BZ;AACI;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;AACA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AACJ;AAED;AACI;;AACA;AACI;AACA;AACA;AACA;AACH;AACJ;AAED;AACI;AACI;AACH;AACJ;AAED;AACI;AACI;;AACA;AACI;AACH;AACJ;;AACD;AACH;AAED;AACI;AACH;AAED;AACI;AACA;AACA;AACH;AAED;AACI;AACH;AAED;AACI;AACA;AACH;AAED;AACI;AACA;AACA;AACA;;AACA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACI;AACH;AACJ;;AACD;AACI;AADQ;;AAGZ;AACI;AACH;AACJ;AACD;AACA;AACI;;AACA;AACI;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACH;;AACD;AACH;AAED;AACI;;AAEA;AACI;;AACA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AAEG;AACH;AACJ;AAED;AACI;AACA;AACH;AAED;AACI;AACA;AACA;AACA;AACA;AACH;AAED;AACG;AACA;;AACA;AACI;AACA;AAEA;AACH;AACH;AAED;AACI;AACA;AACA;AACA;AACA;AACH;AAED;AACI;AACI;AACH;AAEG;AACI;AACA;AACH;AAEG;AACH;AACJ;AACJ;AAED;AACI;AACA;;AACA;AACI;AACH;AAEG;AACA;AACH;;;AAGD;AACH;AAED;AACI;AACA;AACA;AACA;AACA;AACH;AAED;AACI;AACA;AACA;AACA;;AAGA;AACH;AAED;AACI;AACA;AACA;;AAEA;AACI;;AACA;AACI;AACH;;AACD;AACI;AACH;;AACD;AACI;AACH;;AACD;AACI;AACH;;AACD;AACI;AACH;;AACD;AACH;;;AAED;AACH;;AAED;AACI;AACA;AACA;AACA;AACA;;AAEA;AACH;;AAED;AACI;AACA;;AAGA;AACH;;AAED;AACI;AACA;AACA;AACA;;AACA;AACI;AACH;AAEG;AACH;;AACD;AACA;AACA;AACA;;AACA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACI;AACH;AACL;AACH;;AAED;AACI;AACA;AACA;AAEH;;AAGD;;AAMA;AACI;AACA;AACH;;AAED;AACI;AACH;AAED;AACI;AACA;AACA;AACH;;AAED;AACI;;AAEA;AACA;AACA;AACH;AAED;AACI;AACA;AACH;AAED;AACI;AACA;;AACA;AACI;AACH;;AACD;;AACA;AACI;AACA;AACH;;AACD;;AACA;AACI;AACH;AACJ;AAED;AACI;AACA;;AAEA;AACH;AAED;AACI;AACA;AACA;AACH;AAED;AACI;AACA;AACA;AACA;AACH;AAED;AACI;AACA;AACH;AAED;AACI;AACA;AACA;AACA;AACA;AACH;AAED;AACI;AACA;AACH;AAED;AACI;AACA;AAAkC;AAAU;AAAX;AACpC;AAED;AACI;AACA;AACA;AACH;AAED;AACI;AACA;AACA;;AACA;AACI;AACH;AAEG;AACH;AAEG;AACH;;AACD;AACA;AACA;AACA;AAAkC;AAAU;AAAX;AACpC;AAED;AACI;AACA;AACA;AACA;AACA;AACA;AACH;AAED;AACI;AACA;AACA;AACA;AACA;AACA;AACH;AAED;AACI;AACH;AAED;AACI;AACI;AACH;;;AAED;AACH;AAGD;AACI;AACH;AAED;AACI;AACH;AAED;AACI;AACH;AAED;AACI;AACA;AACA;AACA;AACH;AAED;AACI;AACA;AACH;AAED;AACI;AACH;AACJ;AAED;AACI;AACA;AACA;AACA;AACH;AAED;AACI;;AACA;AACI;AACA;AAAiC;AAAoB;AAArB;AACnC;AACJ;AAED;AACI;AACA;;AACA;AACI;AACA;AACH;;AACD;AAAyC;AAAkB;AAAnB;AAC3C;AAED;AACI;;AAEA;AACI;AACI;AACA;AACH;AACJ;;;AAGD;AACA;AAEA;AACH;AAED;AACI;AACI;AACH;AAEG;;AACA;AACI;AACI;AACH;AACJ;;AACD;AACI;AACH;AAEG;AACH;AACJ;AACJ;AAED;AACI;;AAEA;AACI;AACH;;AAED;AACI;AACI;;AACA;AACI;AACH;AACJ;;AACD;AACH;;AACD;AACI;AACI;;AACA;AACI;AACA;AACH;;AACD;AACH;AACJ;;AACD;AACI;AACH;AAEG;AACH;;AACD;AAAkC;AAAkB;AAAnB;AACpC;AAED;AACI;AACH;AAED;AACI;AACI;AACA;AAFO;AAIX;AACA;AACH;AAED;AACI;AACA;AACA;AACA;;AAEA;AACI;AACA;AACI;AACA;AACA;AACA;AAJK;;AAOT;AACH;;AAED;AACI;AACA;AACH;;AACD;AACA;AACH;AAGD;AAEA;;AAjqBK;;;;;;;;;;ACAT;AACI;AAEA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhBQ;AAmBZ;AACA;AACI;AACI;AACH;;AACD;AACI;AACH;;AACD;AACI;AACH;AAGD;AACA;AANA;AASI;AACH;AAEG;AACH;;AACD;AAEA;AACA;AACA;AAEA;;AAEA;;AACA;;AAEA;;AACA;AACI;AACA;AACA;AACA;AACA;AAEA;;AACA;AACI;AACH;;AAED;AACA;AACA;AACA;AACA;AACA;;AACA;AACH;;;AAGD;AACA;AAAwC;AAAuB;AAE/D;AAAuC;AAAwB;AAClE;AAED;AACI;AACI;AACH;AAGD;AACA;AANA;AAQI;AACH;AAEG;AACH;AACJ;AAED;AACI;;AACA;AACI;AACA;AACH;;AACD;AACA;AACA;AACA;AAEA;;AACA;AACI;AACH;AAEG;AACH;AAEG;AACH;;;AAID;AACI;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AACA;AACI;;AACA;AACI;AACI;AACH;AAEG;AACH;AAEG;AACH;AAEG;AACH;AAEG;AACH;;AAED;AACI;AACH;AAEG;AACH;AAEG;AACH;AAEG;AACH;AAEG;AACH;AAEG;AACH;;AACD;AACH;AAEG;AACH;AAEG;AACH;AAEG;AACH;AAEG;AACH;AAEE;AACF;AAEG;AACH;AAEG;AACH;AAEG;AACH;AACJ;;AAED;AACI;AACI;AACH;;AAED;AACI;AACH;;AAED;AACI;AACH;;AAED;AACI;AACH;;AAED;AACI;AACH;;AAED;AACI;AACH;;AAED;AACI;AACH;;AAED;AACI;AACH;;AAED;AACI;AACH;AACJ;;AAED;AACI;AACH;;AACD;AACI;AACH;;AAED;AACA;AACA;;AAGA;;AACA;AACI;AACH;;AACD;;AAGA;AACI;AACH;AAEG;AACH;;AAGD;;AACA;AACI;AACH;;AAED;;AAGA;AACI;AACH;;;AAGD;AACI;AACA;AACH;;AAED;;AAEA;AACI;AACA;AACA;AACA;AACA;AACH;;AAGD;AACI;AACH;;;AAGD;AACA;;AACA;AACI;AACA;AACA;AACH;;AAED;;AACA;AACI;AACA;AACA;AACH;;AAED;;AACA;AACI;AACA;AACA;AACH;;;AAGD;;AACA;AACI;AACI;AACA;AACA;AACH;AACJ;AACJ;AACJ;AAOL;AACI;AACI;;AACA;AACI;AACA;AACH;;AACD;AACA;AACA;AACA;AAEA;;AACA;AACI;AACH;AAEG;AACH;AAEG;AACH;;;AAID;AACI;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AACA;AACI;;AACA;AACI;AACI;AACH;AAEG;AACH;AAEG;AACH;AAEG;AACH;AAEG;AACH;;AAED;AACI;AACH;AAEG;AACH;AAEG;AACH;AAEG;AACH;AAEG;AACH;AAEG;AACH;;AACD;AACH;AAEG;AACH;AAEG;AACH;AAEG;AACH;AAEG;AACH;AAEE;AACF;AAEG;AACH;AAEG;AACH;AAEG;AACH;AACJ;;AAED;AACI;AACI;AACH;;AAED;AACI;AACH;;AAED;AACI;AACH;;AAED;AACI;AACH;;AAED;AACI;AACH;;AAED;AACI;AACH;;AAED;AACI;AACH;;AAED;AACI;AACH;;AAED;AACI;AACH;AACJ;;AAED;AACI;AACH;;AACD;AACI;AACH;;AAED;AACA;AACA;;AAGA;;AACA;AACI;AACH;;AACD;;AAGA;AACI;AACH;AAEG;AACH;;AAGD;;AACA;AACI;AACH;;AAED;;AAGA;AACI;AACH;;;AAGD;AACI;AACA;AACH;;AAED;;AAEA;AACI;AACA;AACA;AACA;AACA;AACH;;AAGD;AACI;AACH;;;AAGD;AACA;;AACA;AACI;AACA;AACA;AACH;;AAED;;AACA;AACI;AACA;AACA;AACH;;AAED;;AACA;AACI;AACA;AACA;AACH;;;AAGD;;AACA;AACI;AACI;AACA;AACA;AACH;AACJ;AACJ;AACJ;AAMD;AACI;;AACA;AACI;AACA;AACH;;AACD;AACA;AACA;AACA;AAEA;;AACA;AACI;AACH;AAEG;AACH;AAEG;AACH;;;AAGD;AACI;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACI;AACH;;AAED;;AACA;AACI;AACA;;AACA;AACI;AACI;AACA;AACA;AACA;AACH;AACJ;;AAED;AACA;AAEA;;AACA;AACI;AACI;AACH;AAEG;AACH;AAEG;AACH;AAEG;AACH;;AAED;AACA;AACH;AAEG;AACI;AACH;AAEG;AACH;AAEG;AACH;AAEG;AACH;AAEG;AACH;AAEG;AACH;AAEG;AACH;AACJ;;AAED;;AAEA;AACI;AACA;AACH;AAEG;AACA;AACH;AAEG;AACA;AACH;AAEG;AACA;AACH;AAEG;AACA;AACH;;AAED;AACI;AACA;AACH;;AAED;AACI;AACA;AACH;;AAED;AACI;AACA;AACH;;AAED;AACI;AACA;AACH;;AAED;AACI;AACA;AACH;;AAED;AACI;AACA;AACH;;AAED;AACI;AACA;AACH;;AAED;AACI;AACA;AACH;;AAED;AACI;AACH;;AAED;AAEA;AACA;AACH;;AAED;;AAEA;AACI;AACH;;AAED;AACI;AACH;;AAED;AACI;AACH;;AAED;AACA;AACA;;AAGA;AACI;AACH;AAEG;AACH;;;AAGD;AACI;AACA;AACH;;AAED;AAEA;AAEA;;AAEA;AACI;AACA;AACA;AACA;AACA;AACH;;AAGD;AACI;AACH;;;AAGD;AACA;;AACA;AACI;AACA;AACA;AACH;;AAED;;AACA;AACI;AACA;AACA;AACH;;AAED;;AACA;AACI;AACA;AACA;AACH;;;AAGD;;AACA;AACI;AACI;AACA;AACA;AACH;AACJ;AACJ;AACJ;AAED;AACI;;AACA;AACI;;AACA;;AACA;AACH;AAEG;AACA;AACH;;AAED;;AACA;AACI;;AACA;AACI;AACA;AACA;AACA;;AACA;AACI;AACA;AACA;AACH;AAEG;AACH;AACJ;AAEG;AACH;AACJ;;AACD;AACH;AAED;AACI;;AACA;AACI;AACH;AAEG;AACH;;AACD;AACH;AAED;AACI;AACH;AAGD;AAEA;;AAj3BK;;;;;;;;;;ACAT;AACI;AAEA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXQ;AAcZ;AACA;AACI;AACI;AACH;;AAED;;AAGA;;AACA;AACI;AACH;;AAED;;AACA;AACI;AACH;;AAED;;AACA;AACI;AACH;;;AAGD;AACA;AAAuC;AAAsB;AAChE;AAED;AACI;AAEA;AACA;AACA;AACA;AACA;AACA;AACH;AAED;AACI;AACA;AACA;AACA;;AACA;AACI;;AACA;AACI;AACH;;AACD;AACI;AACA;AACH;AACJ;;AAED;AACI;AACA;;AACA;AACI;AACH;;AACD;;AACA;;AACA;AACA;AACH;AACJ;AAED;AACI;AACH;AAED;AAEC;AA5FI;;;;;;;;;;ACAT;AACI;AACA;AAEI;AACA;AACA;AACA;AACA;AACA;AACA;AARK;AAFS;;;;;;;;;;ACAtB;AACA;AAEA;AACA;AACI;AAEA;AACI;AACA;AACA;AACA;AACA;AACI;AACA;AACA;;AACA;AACI;AACI;AACH;;AACD;AACH;;AACD;AACI;AACH;;;AAED;AACA;;AAEA;;AACA;AACI;AACH;;AAED;AACI;AACI;;AACA;AACI;;AACA;AACI;AACH;AAAwB;;AAC5B;AACG;AAEH;AAEG;AAEC;AACJ;AACJ;AACJ;;AAED;AAEC;;;AAED;AACA;AACH;AArDG;AAHQ;;;;;;;;;;ACJpB;AACA;;AACA;;AACA;AACI;AAEA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAzBQ;AA6BZ;AACI;AACH;AAED;AACI;AACH;AAED;AACA;AACI;AACI;AACA;AACA;AACH;;AACD;AACI;AACA;AACH;;AACD;;AAEA;AACI;AACA;AACH;AAEG;AACA;AACH;;;AAGD;;AACA;AACI;AACA;AACH;;AAED;AACA;AACA;AAGA;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACI;AACI;AACA;AAFmB;AAI1B;;AAED;AACI;AACI;AACA;AAFoB;AAI3B;;AAED;AAEA;AACA;AACA;AAEA;AACH;AAED;AACI;;AACA;AACI;AACI;AACH;AAEG;AACI;AACH;AACJ;AACJ;;AAED;AACI;AACA;AAFO;AAIX;AACH;AAED;AACI;;AACA;AACI;AACI;AACH;AAEG;AACA;AACH;AACJ;;AAED;AACI;AACA;AACA;AACA;AAJO;AAMX;AACH;AAED;AACI;;AACA;AACI;AACI;AACH;AAEG;AACA;AACA;AACH;AACJ;;AAED;AACI;AACA;AACA;AACA;AAJO;AAMX;AACH;AAED;AACI;AACA;AACH;AAID;AACI;AACA;AACA;AACA;AACH;AAED;AACI;AACI;AACH;AAEG;AACH;AAEG;AACH;AAEG;AACH;AACJ;AACD;AACA;AACI;AACH;AAED;AACQ;AACP;AAED;AACI;AACA;AACH;AAED;AACI;AACI;AACA;AACH;;AACD;AACA;AACH;AAED;AACA;AACI;AACA;;AACA;AACI;AACH;;AACD;;AAEA;AACI;AACA;AACH;AACJ;AAxOI;;;;;;;;;;;ACHT;AACI;AAEA;AACI;AACI;AACA;AAFc;AAIlB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApBQ;AAuBZ;AACA;AACI;AACA;AAEA;AACA;AAEA;AACA;AAEA;;AACA;;AAEA;AACA;AAEA;AACA;AACH;AAED;AACI;AACA;AACA;AACA;AAEA;AACA;AACH;AAED;AACI;AACI;AACA;AACH;AAEG;AACH;AACJ;AAED;AACI;AACA;AACA;AACI;AACI;AACH;AACD;;AACA;AACI;AACI;AACA;AACH;AACJ;;AACD;AACH;AACJ;AAED;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AAED;AACI;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;;AAEA;AACI;AACA;;AAEA;AACH;AACJ;;AACD;AACA;AACA;AACH;AAED;AACI;AACG;AACF;;AACD;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;;AACA;AACI;AACA;;AAEA;AACH;AACJ;;AACD;AACA;AACH;AAED;AACI;;AACA;AACI;AACH;;AACD;AACA;AACA;AACH;AACD;AACI;AACI;;AACA;AACH;AACJ;AAED;AACI;AACA;AACA;AACI;AACI;AACH;AACJ;AACJ;AAED;AACI;AACA;AACA;AACI;AACA;AACA;AACA;AACA;AACH;AACJ;AAED;AACI;AACA;;AACA;AACI;AACH;AAEG;AACH;AACJ;AAED;AACI;AACA;;AACA;AACI;AACH;AAEG;AACH;AACJ;AAGD;AAEA;;AA9NK;;;;;;;;;;;;ACAT;AACI;AAEA;AACI;AACI;AACA;AAFS;AAIb;AACI;AACA;AAFS;AAIb;AACI;AACA;AAFK;AAIT;AACI;AACA;AAFI;AAbA;AAmBZ;AACI;;AACA;AAEI;AACI;AACA;AACA;;AACJ;AACA;AACI;AACA;AACA;;AACJ;AACI;AACA;AACA;AACA;AACA;;AACJ;AACI;AACA;AACA;AACA;AACA;;AACJ;AACI;AAxBR;;AA0BA;AACH;AAED;AACI;AACA;;AACA;AAEI;AACI;AACA;AACA;;AACJ;AACI;AACA;AAEA;;AACA;AACI;AACH;;AACD;AACA;AACA;;AACJ;AACA;AACI;AACA;AACA;;AACJ;AACI;AACA;AACA;;AACJ;AACI;AAEA;AACA;;AACJ;AACI;AAEA;;AACA;AAEI;AACH;AAGG;AACA;AACA;AACH;;AACD;;AACJ;AACI;AACA;;AACJ;AACI;AACA;;AACJ;AACI;AArDR;;AAwDA;AACI;AACA;AACH;;AAED;AACI;;AAEA;;AACA;;AACA;AAEA;AACA;;AACA;AAEA;AACA;AACA;AACH;AACJ;AAED;AACI;AACI;AACA;AACA;AAEA;;AACA;AACH;AACJ;AAED;AACA;AACI;AACA;AACI;AACH;;AACD;AACA;AACA;AACA;AACA;AACA;;AACA;;AAEA;;AACA;AAEI;AACA;;AAEA;AACH;AACJ;AAED;AACI;AACH;AA3KI;;;;;;;;;;ACAT;AACI;AAEA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAZQ;AAeZ;AACA;AACI;AACA;;AAEA;AACI;AACH;;AACD;AAEA;;AACA;AACI;AACH;;AAED;AAEA;AACG;AACA;AACF;AAED;AACI;AACI;AACH;AACJ;AAED;AACI;;AACA;AACI;AACH;;AACD;AACA;AACH;AAED;AACI;AACA;;AACA;AACI;AACH;;AACD;AACH;AAED;AACI;;AAEA;;AACA;AACI;;AACA;AACH;AAEG;AACA;AACI;;AACA;AACH;AACJ;AACJ;AACJ;AAED;AACI;AACA;AACA;AACH;AAED;AACI;AACA;;AACA;AACI;AACA;AACH;;AACD;;AACA;AACI;AACH;;AAED;AACA;;AACA;AACI;AACH;AAEG;AACH;AAEG;AACH;AAEG;AACH;AACJ;AAED;AACI;AACI;AACH;;AAED;;AACA;AACI;AACA;;AACA;AACI;AACH;AAEG;AACI;AACH;AACJ;AACJ;;AAED;AACI;AACA;AACA;AAHO;AAMX;AACA;AACA;AAEA;AACH;AAGD;AAEA;;AAvJK;;;;;;;;;;ACAT;AACI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACI;AACA;AACH;AACJ;;AAAA;;AAED;AACI;AACI;AACH;;AAED;AACI;AACH;AAEG;AAAqC;AAAD;AAChC;;AACA;AACG;AACF;;AACD;AACI;AACA;AACA;AAHO;AAKX;AACA;AAEH;AACJ;AACJ;;AAAA;AAED;AACI;AACA;AAEI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVQ;AAaZ;AACA;AACI;AACH;AAED;AACI;AACI;AACH;;AACD;AACI;AACH;;AACD;AACI;AACH;;AAED;AACA;AACG;AACK;AACI;AACA;AACH;AACJ;AACJ;AACJ;AAED;AACI;AACI;;AACA;AACI;AACH;AACJ;AACJ;AAED;AAEA;;AArDK;;;;;;;;;;AC/DT;AACI;AAEA;AACI;AACI;AACA;AAFC;AAIL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfQ;AAkBZ;AACA;AACI;AACA;AACH;AAED;AACI;AACH;AAED;AACI;AACI;AACI;AACH;AAEG;;AACA;AACI;AACH;;AACD;AACA;AACH;AACJ;AACJ;AAED;AACI;AACI;AACH;;AACD;AACA;;AAEA;AACI;AACA;AACA;AACH;AACJ;AAED;AACI;AACH;AACD;AACI;AACH;AACD;AACI;AACH;AACD;AACI;AACH;AACD;AACI;AACH;AACD;AACI;AACH;AACD;AACI;AACH;AACD;AACI;AACH;AACD;AACI;AACH;AACD;AACI;AACH;AACD;AACI;AACI;AACH;;AACD;AACH;AACD;AACI;AACI;AACA;AACH;AACJ;AACD;AACI;AACH;AAED;AACI;;AACA;AACI;AACH;;AACD;AACH;AAGD;AAEA;;AAtHK;;;;;;;;;;ACAT;AACA;AACI;AAEA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAVQ;AAaZ;AACA;AACA;AACI;AACA;AACA;AACI;AACA;;AACA;;AACA;AACH;;AACD;;AACA;;AAEA;;AAEA;AAEH;AAED;AAEA;AACI;AACA;;AACA;;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACH;AAED;AACA;AACA;AAEA;AAEA;AAEA;AAEA;AACG;AACC;AACA;;AACA;;;AACA;;AAEA;;AACA;AAEA;AACA;AACA;;AAEA;;AACA;AACA;;AAGA;;AACA;AACA;;AAEA;;AACA;AACA;;AAGA;;AACA;AACA;;AAEA;;AACA;;AAEA;AACH;AAED;AACI;;AACA;AACI;AACH;;AACD;AACA;;AAEA;AACA;;AAEA;;AACA;AACI;;AACA;AACI;AACA;AACA;AACH;AACJ;;AACD;AACH;AAED;AACI;;AACA;AACI;AACI;AACH;AAEG;AACA;;AACA;AACI;AACH;AAEG;AACH;AACJ;AACJ;;AAED;AACA;;AACA;AACI;AACA;AACI;AACA;AACA;AACH;AACD;AACH;;AAED;AACI;AACI;AACI;;AACA;AACA;AACI;AACH;AACJ;AAEG;AACH;AACJ;AACJ;;AACD;AACH;AAED;AACI;AACH;AAED;AACI;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACI;AACC;AACG;AAEH;AACJ;AACG;AACH;AACJ;AAED;AACI;AACA;AACA;;AACA;AACH;AAED;AACA;AACI;AACI;AACH;;AACD;;AACA;AACI;AACH;AAEG;;AACA;AACI;AACH;AACJ;AACJ;AA/OI;;;;;;;;;;ACDT;AACI;AACI;;AACA;AACI;AACI;AACA;AACH;AACJ;AAEG;AACI;AACI;AACH;AAEG;AACA;AACH;AACJ;AACJ;;AACD;AACH;AAEG;AACH;AACJ;;AAED;AACI;AAEA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXQ;AAcZ;AACA;AACI;AACI;AACA;AACA;AACH;;AAED;AACI;AACA;AACH;;AACD;;AAEA;AACI;AACA;AACH;AAED;AAEA;;AAEA;AACI;AACH;;AAED;AACH;AAED;AACI;AACA;;AACA;AACI;AACI;AACA;AACA;AAHM;AAKV;AACH;AACJ;AAED;AACI;AACH;AAED;AACI;AACI;AACP;AAED;AACI;AACA;AACA;AACQ;AAER;AACA;AACA;AACA;AACA;AACH;AAGD;AAEA;;AArFK;;;;;;;;;;AC3BT;AACI;AAEA;AACI;AACI;AACA;AAFK;AAKT;AACI;AACA;AAFQ;AAKZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApBQ;AAuBZ;AACI;AACI;AACA;AACA;AACH;;AACD;AACI;AACA;AACH;;AACD;AACA;;AAEC;AACK;AACL;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACH;AAED;AAEI;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;;AAEA;AACI;;AACA;;AACA;AACH;;AAED;AACA;AACA;AAEA;;AACA;AACI;AAEA;;AACA;;AACA;;AACA;;AACA;;AAEA;AACA;AACA;AACA;AACI;AACA;AAFO;;AAIX;AACH;;AAED;AACA;AACA;AACA;AACH;AAED;AACI;AACI;AACH;AACJ;AAED;AACI;;AAGA;AAEA;AACG;AACA;AACF;AAED;AACI;AACH;AAED;AACI;AACH;AAED;AACI;AACA;;AACA;AACI;AACH;;AACD;AACI;AACH;AACJ;AAED;AACI;AACA;AACA;AACA;;AACA;AACI;AACA;AACA;AACA;AACH;AAEG;AACH;AACJ;AAED;AACI;AACH;AAED;AACI;;AAEA;AACA;AACA;AACA;;AAEA;AACI;AACH;;AACD;AACA;;AACA;AACI;AACA;AACA;;AACA;AACI;AACI;AACA;AACH;AAEG;AACH;AACJ;AACJ;AAEG;AACA;;AAEA;AAEI;AACA;AACA;AACA;AACH;AACJ;;AAED;AACI;AACA;AACA;AACH;;AAED;AACI;AACH;AAEG;AACH;;AAED;AACH;AAED;AACI;AACH;AAED;AACI;AACH;AAED;AACI;AACA;AACH;AAGD;AACI;AACA;AACA;;AAEA;AACI;AACH;AAEG;AACH;;AACD;AACA;AACA;AACH;AAED;AACI;AACA;AACA;;AAEA;AACI;AACH;;AACD;AACH;AAED;AACI;AACH;AAED;AACI;AACH;AAED;AACI;AAEA;;AACA;AACI;AACH;AAEG;AACH;;AACD;AACA;AACA;AACA;AACH;AAED;AACI;AACA;AACA;AACA;;AACA;AACI;AACH;AAEG;AACH;;AAED;;AACA;AACI;AACA;AACH;AAEG;AACA;AACH;AACJ;AAED;AACI;AACA;AACA;AACA;AACA;AACH;AACJ;AAED;AACI;;AACA;AACI;AACA;AACA;AACA;AACA;AACH;AACJ;AAED;AACI;AACI;;AACA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AACJ;AACJ;AAED;AACI;;AACA;AACI;;AACA;AACI;AACA;AACA;AACA;AACH;AACJ;AACJ;AAED;AACI;AACI;AACH;;AAED;AACI;;AACA;AACI;AACH;;AACD;AACI;AACH;;AAED;AACI;AACI;AACA;AACH;AACJ;AACJ;AACJ;AAED;AACI;AACA;AACH;AAED;AACI;AACI;;AACA;AACI;;AACA;AACI;AACA;AACA;AACA;AACH;AACJ;AACJ;AACJ;AAED;AACI;;AACA;AACH;AAED;AAEI;AACI;AACH;;AAED;AACI;AACI;AACH;AACJ;;AAED;AACI;AACA;AACA;AACA;;AACA;AACI;AACA;AACH;;AAED;AACI;AACI;;AACA;AACI;AACH;AACJ;AACJ;AACJ;;AAED;AACA;AACA;AACA;;AACA;AACI;AACA;;AACA;AACI;AACA;AACA;AACA;AACA;AACA;AACH;AACJ;;AAED;AACI;AACH;;AAED;AACA;AACA;AACA;;AACA;AACI;AACA;;AACA;AACI;;AACA;AACI;AACH;AAEG;AACH;AACJ;AACJ;;AACD;;AACA;AACI;AACA;AACH;;AAED;AACH;AAED;AACI;AACI;AACA;AACH;;;AAGD;AACI;AACA;AACH;;AAED;AACI;AACI;AACA;AACI;AACA;AACA;AACA;AACA;AACH;;AACD;AACI;AACH;;AACD;AACA;AACA;AACH;AACJ;AACJ;AAED;AACA;AACI;AACK;AACD;AACH;;AAED;AACH;AAED;AACI;AACI;AACH;;AACD;AACH;AAED;AACI;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;;AAEA;AACI;AACH;AAEG;;AACA;AACI;AACA;AACH;;AACD;AACA;AACH;AAEG;;AACA;AACI;AACA;AACH;;AACD;AACA;AACH;AACJ;AAED;AACI;AACA;AACA;AAEA;AACA;AACA;AACA;;AACA;AACI;AACA;AACA;AAEA;AACA;AACH;AACJ;AAED;AACI;AACA;;AACA;AACI;AACH;;AACD;AACA;AACA;AACA;AACA;AACA;;AACA;AACI;AACA;AACH;;AAED;AACA;;AACA;AACI;AACI;AACA;;AACA;AACI;AACA;AACH;;AACD;AACA;AACH;;AAED;AACI;AACA;AACH;AACJ;AACJ;AAED;AACI;;AACA;AACI;AACH;;;AAED;AACA;;AACA;AACI;AACH;;AAED;AACA;;AAGA;AACI;AACH;;AACD;AACH;AAED;AACI;AACA;AACA;;AACA;AACI;AACH;;;AAGD;;AACA;AACI;AACA;AACA;AACA;AACA;AACH;;AACD;AACI;AACA;AACA;AACA;AACH;;AACD;AACI;AACA;AACA;AACA;AACH;AACJ;AAED;AACI;AACA;AACH;AAED;AACA;AACA;AAEgB;AACR;AACA;;AAEA;;AACA;AACI;AACI;;AAEA;AACI;;AACA;AACI;AACA;AACH;AACJ;AACJ;AACJ;;;AAGD;AACI;;AACA;AACI;;AACA;AACI;AACH;AAEG;AACH;AACJ;AACJ;AACJ;AAEG;AACI;AACI;;AACA;AACI;AACH;AACJ;AACJ;AAEG;AACI;;AACA;AACI;AACH;AACJ;AACJ;AACJ;AACA;AAEJ;AAED;AACI;;AAEA;AACH;AAED;AACI;;AACA;AACI;AACH;AAEG;AACH;AAEG;AACH;AAEG;AACH;AACJ;AAED;AACA;AAGA;AACI;;AACA;AACI;AACH;AACJ;AA/wBI;;;;;;;;;;ACAT;AACI;AAEA;AACI;AACI;AACA;AAFM;AAIV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApBQ;AAuBZ;AACA;AACI;AACI;AACH;;AAED;AACA;AACA;AACH;AACD;AACA;AACI;AACA;;AACA;AACI;AACH;;AAED;AAEA;AACA;AACA;AACA;AACA;;AACA;AACI;AACA;;AACA;AACH;;AAED;;AACA;AACI;AACA;AACH;;AAED;;AACA;AACI;AACH;;AAED;AACI;;AACA;AACI;AACH;AAED;AACA;;AACH;AACJ;AAED;AACI;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACH;AAED;AACI;;AAEA;AACI;AACH;AAED;AACI;AACH;AAED;AACI;AACA;AACH;AAED;AACI;AACH;AAED;AACI;AACI;AACH;AACJ;AAED;AACI;AACA;;AACA;AACH;AAED;AACI;AACI;AACH;AACJ;AAED;AACI;;AACA;AACH;AAED;AACI;AACA;;AACA;;AACA;AACH;AAED;AACI;AACA;AAEA;AACA;;AACA;;AACA;;AAEA;AACH;AAED;AACI;AACA;AACA;;AACA;;AACA;AACH;AACJ;AAED;AACI;;AACA;AACI;AACH;AACJ;AAED;AACI;AACA;AACA;AAEA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;AACH;AAED;AACI;AACH;AAED;AACI;AACI;AACH;AACJ;AAED;AAIA;AACI;;AACA;AACI;AACH;;AACD;AACH;AAED;AACI;AACI;AACH;AACJ;AAED;AACI;AACH;AAED;AACI;AACI;;AACA;;AACA;AACA;AACA;;AACA;;AACA;;AAEA;AAEA;AACA;AACA;AACA;AACA;AACH;AACJ;AAED;AACA;AACI;;AACA;AACI;AACA;AACA;AACA;AAEA;AACA;AACA;AACH;;AAGD;AACI;AACI;AACA;AACH;AACJ;AAEG;AACH;AACJ;AAGD;AACI;AACA;AACA;AACA;;AACA;;AACA;AACH;AAED;AACI;AAEH;AA5RI;;;;;;;;;;ACAT;AAEA;AACI;AAEA;AACI;AACA;AACI;AACA;AAFM;AAKV;AACI;AACA;AAFO;AAKX;AACI;AACA;AAFQ;AAKZ;AACI;AACA;AAFY;AAIhB;AACA;AACI;AACA;AAFW;AAIhB;AACC;AACI;AACA;AAFW;AAIf;AACA;AACI;AACA;AAFO;AAIX;AACA;AACI;AACA;AAFO;AAKX;AACA;AACA;AA5CQ;AA+CZ;AACI;AACI;AACH;;AACD;;AACA;;AACA;AACA;;AAEA;AACI;AACH;;;AAGD;AACI;AACH;;;AAGD;AACI;AACH;;;AAGD;AACA;AACA;;AAGA;AACA;AACA;AACA;AACH;AAED;AACI;AACH;AAED;AACE;AACI;AACH;AAEG;AACH;AAEG;AACH;AAFI;AAKF;AACF;AAFI;AAKF;AACF;AACF;AAED;AACI;AACA;;AACA;AACI;AACH;AAEG;AACH;AAEG;AACH;AAEG;AACH;AACJ;AAED;AACI;;AACA;AACI;AACH;AAEG;AACH;AAEG;AACH;;AACD;AACH;AAED;AACI;AACI;AACH;AAEG;AACH;AAEG;AACH;AAEG;AACH;AACJ;AAED;AACI;AACI;AACH;AAEG;AACH;AAEG;AACH;AAEG;AACH;AACJ;AAED;AACI;AACA;AACI;AACI;AACA;;AACA;AACI;AACI;AACH;AAEG;AACH;AACJ;AACJ;;AACD;AACH;AACJ;AAED;AACI;AACH;AAED;AACI;AACH;AAED;AACI;AACH;AAvMI;;;;;;;;;;ACFT;AACI;AACH;;AAED;AACI;AACA;AACI;AACA;AACA;AACA;AACA;AACA;AACI;AACI;AACA;AACH;;AAED;AACI;AACA;AACI;AACH;;AACD;AACH;;AAED;;AACA;AACI;;AAEA;AACH;AACJ;AACD;AACI;AAEA;AACI;AACA;AACA;AACA;AAJO;AAMX;AACA;AACI;AACH;AACD;AACI;AACA;AACH;AAED;AACI;AACA;AACA;AACH;AAED;AACI;AACH;;AAED;AACI;;AACA;AACI;AACI;AACH;AAEG;AACA;AACH;AACJ;AACJ;;AAED;AACH;AAED;AACI;AACI;AACA;AACH;AACD;AACA;AACA;;AACA;AACI;AACA;AACA;AACI;;AACA;AACI;;AACA;AACI;AACH;AAEG;AACH;AACJ;AACJ;AACJ;AACJ;AACD;AACI;AACI;AACI;AAEH;;AACD;AACH;AACJ;AAED;AACI;AACH;AAED;AACI;;AACA;AACI;AACA;AACA;AACH;;AACD;AACI;AACA;AACH;AACJ;AAED;AACI;;AACA;AACI;AACA;AACH;;AAED;AACA;AACI;AACA;AACA;AACA;AAJO;AAMX;AACA;AACI;AACI;AACA;AACH;AACJ;AACD;;;;;;;;;;;;;;;;;;;;AAoBH;AApKI;AAFS;;;;;;;;;;ACJtB;AACI;AAEA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbQ;AAgBZ;AACA;AACI;AACA;AAEA;AAEA;AACA;AACI;AACA;AACA;AACA;AACH;AACJ;AAED;AACA;AACG;AACI;;AACA;AACI;AACH;AACJ;AACH;AA3CI;;;;;;;;;;ACAT;AACI;AAEA;AAEI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVQ;AAaZ;AACA;AACI;AACA;AACH;AAED;AACI;AACI;AACH;AACJ;AAGD;AAEA;;AA/BK;;;;;;;;;;ACAT;AACI;AAEA;AAEI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATQ;AAYZ;AACA;AACI;AACI;AACH;;AAED;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACI;AACA;AACA;AACH;AAED;AACI;AACA;AACA;AACH;AAED;AACI;AACH;AAED;;AACA;AACI;AACH;AACJ;AAED;AACI;AACA;AACA;AACA;AACH;AAED;AACI;AACA;AACA;;AACA;AACI;AACI;AACH;AACJ;AACJ;AAED;AAEI;AACI;AACH;;AACD;AACA;AACA;AAEA;AAEA;AACA;AACA;;AAEA;AACI;AACH;;;AAED;AAEA;;AACA;AACI;AACA;AACA;AACH;;AACD;;AACA;AACI;AACA;AACA;AACH;;AAED;;AACA;AACI;AACA;AACA;AACH;;;AAGD;;AACA;AACI;AACI;AACA;AACA;AACH;AACJ;AACJ;AAED;AACI;;AACA;AACI;AACI;AACH;AAEG;AACH;;AAED;AACH;AAEG;AACA;AACH;;AAED;AACI;AACH;AAEG;AACA;AACH;AAEG;AACH;AAEG;AACH;;AAED;;AACA;AACI;;AACA;AACI;AACA;AACA;AACA;;AACA;AACI;;AACA;AACI;AACA;AACH;AACJ;AAEG;AACH;AACJ;AAEG;AACH;AACJ;AACJ;AAGD;AAEA;;AAtLK;;;;;;;;;;ACAT;AACI;AAEA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAhBQ;AAmBZ;AACA;AACI;AACI;AACH;;AAED;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACI;AACA;AACH;AAED;AACI;AACH;AACJ;AAED;AACI;AACI;AACH;AACJ;AAED;AACI;AACA;AACH;AAED;AACI;AACA;AACA;AACA;AAEA;AACA;AACH;AAED;AACI;AACA;;AACA;AACI;AACH;AAEG;AACH;AAEG;AACH;AACJ;AAED;AACI;AACA;AACA;AACH;AAED;AACI;AACA;AACA;AACH;AAED;AACI;AACA;AACH;AAED;AACI;AACA;;AACA;AACI;AACA;;AACA;AACI;AACH;AAEG;AACH;AACJ;;AACD;AACA;AACA;AAAmC;AACtC;AAED;AACA;AACI;AACI;;AACA;AACI;AACH;;AAED;AACA;AAEA;;AACA;AACI;AACH;;AAED;AACH;AACJ;AA9II;;;;;;;;;;ACAT;AACI;AAEA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdQ;AAiBZ;AACA;AACI;AACI;AACH;;AACD;AACI;;AACA;AACA;AACH;;AACD;AACA;AAEA;AACH;AAED;AACI;;AACA;AACI;AACH;AAEG;AACH;AACJ;AAED;AACI;AACA;AACH;AAED;AACI;AACH;AAED;AACA;AAEA;AAEA;AACI;AACI;AACH;AACJ;AAhEI;;;;;;;;;;ACAT;AACI;AAEA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVQ;AAaZ;AACA;AACI;AACH;AAED;AACI;AACA;;AACA;AACI;AACA;AACH;;AACD;AACH;AAED;AACI;AACA;;AACA;AACI;AACH;;AACD;;AACA;AACI;AACH;;AACD;AACI;AACH;AACJ;AAED;AACI;AACA;;AACA;AACI;AACH;;AACD;AACI;;AACA;AACI;AACH;AACG;AACH;AACJ;AACJ;AAGD;AAEA;;AAjEK;;;;;;;;;;ACAT;AACI;AAEA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbQ;AAgBZ;AACA;AACI;AACA;AACA;;AAEA;AACI;AACG;AACK;AACJ;AAEG;AACH;AACH;AACJ;;AAED;AACI;AACA;AACA;AACH;;AACD;AACA;AACH;AACD;AACA;AACI;AACI;AACA;;AACA;AACI;AACH;AACJ;AACJ;AArDI;;;;;;;;;;ACAT;AACI;AAEA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAZQ;AAeZ;AACA;AACI;AACI;AACH;;AAED;AACA;AACH;AAED;AACI;AACH;AAED;AACI;AACH;AAED;AACI;AACA;AACA;AACA;AACH;AAED;AACA;AACI;AACI;AACI;;AACA;AACI;AACH;AACJ;AACJ;AACJ;AArDI;;;;;;;;;;ACAT;AACA;AACA;AACA;AACA;AAGA;AACI;AAEA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAZQ;AAeZ;AACA;AAIA;AACI;AACA;AACA;AACH;AAED;AACI;;AACA;AACI;AACH;;AACD;AACA;AACH;AAED;AACI;AACH;AAED;AACI;AACI;AACH;;AAED;AACA;AACA;AACA;AAAQ;AAAM;AAAY;AAAnB;AACV;AAED;AACI;;AACA;AACI;AACI;AACH;AACJ;;AACD;;AACA;AACI;AACH;;AACD;;AACA;AACI;AACA;AACA;AACH;AAEG;AACA;AACA;AACA;AACH;AAEG;AACA;AACA;AACA;AACH;AAEG;AACA;AACA;AACA;AACA;AACH;AAEG;AACA;AAAuB;AAAoB;AAAiB;AAAtC;AACtB;AACH;AACJ;AAGD;AAEA;;AAnGK;;;;;;;;;;ACPT;AACI;AAEA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AArBQ;AAwBZ;AACA;AACI;AACI;AACH;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACI;AACH;;AAED;AACI;AACH;;AAGD;AAEA;AAEA;AAEA;AACA;AAEA;;AACA;AACI;AACH;;AAED;;AACA;AACI;AACH;;AAED;;AAEA;AACI;AACH;AACJ;AAED;AACI;;AACA;AACG;AACC;;AACA;AACI;;AACA;AACI;AACH;AACJ;;AACD;AACH;AACJ;AAED;AACI;AACI;AACH;;AAED;AACI;AACH;;AAED;AACI;AACH;;AAED;AACI;AACH;;AAED;AACI;AACH;;AAED;AACI;AACH;;AAED;AACH;AAED;AACI;AACA;;AACA;AACI;AACH;;AACD;;AAEA;AACI;AACH;;AAED;AACI;AACH;;AAED;AACH;AAED;AACI;AACI;AACH;AACJ;AAED;AACI;;AACA;AACI;AACH;AACJ;AAED;AACI;;AACA;AACI;AACA;AACH;;AAED;;AACA;AACI;AACH;AACJ;AAED;AACI;;AACA;AACI;AACH;AACJ;AAED;AACI;AACI;AACH;;AACD;AACA;AACA;AACA;AACA;AACH;AAED;AACI;AACA;AACI;AACH;;AACD;AACA;AACA;;AACA;;AACA;AACH;AAED;AACI;AACI;AACH;AACJ;AAED;AACI;AACI;AACH;;AAED;;AACA;AACI;AACH;;AAED;AACA;AAEA;;AACA;AACI;AACI;AACH;AAEG;AACH;AACJ;AACJ;AAED;AACA;AACI;AACI;;AACA;AACI;AACA;;AACA;AACH;AACJ;AACJ;AAzOI;;;;;;;;;;ACAT;AACI;AAEA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdQ;AAiBZ;AACA;AACI;AACI;AACH;;AAED;AACA;AAEA;AACA;AAEA;AACA;AAGA;AACA;AACA;AACA;AAGA;AACA;AAEA;AACA;AAEA;AACH;AAED;AACI;AACI;AACH;AAEG;AACH;;AACD;AACH;AAED;AACI;AACH;AAED;AAEI;AACA;AAEA;AACA;AACA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEH;AAED;AACI;AACI;AACH;AAEG;AACA;AACA;AACH;AAEG;AACA;AACH;AAEG;AACA;AACH;AAEG;AACA;AACH;AAEG;AACA;AACH;AACJ;AAGD;AAEA;;AAvHK;;;;;;;;;;ACAT;AACI;AAEA;AACI;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAdQ;AAiBZ;AACA;AACI;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACI;AACH;AAED;AACI;AACA;AACA;AACH;AACJ;AAED;AACI;AACI;AACH;;AACD;;AACA;AACI;AACH;;AACD;AACA;;AACA;AACI;AACH;AACJ;AAED;AACA;AACI;AACI;;AACA;AACI;AACA;AACH;;AACD;;AACA;AACI;AACH;;AAED;;AACA;AACI;AACH;;AACD;AACH;AACJ;AA7EI;;;;;;;;;;ACAT;AACI;AAEA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXQ;AAcZ;AACA;AACI;AACI;AACH;;AAED;AACA;AACA;AAEA;AACH;AAED;AACI;AACI;AACA;AACA;AACA;AACA;;AAEA;;AACA;;AAEA;;AACA;;AAEA;AACI;AACH;AAEG;AACH;AACJ;AACJ;AAED;AACI;AACH;AAGD;AAEA;;AA5DK;;;;;;;;;;ACAT;AACI;AACA;AACI;AACH;AACH;AACA;AACA;AACA;AACA;AACA;AACM;AACA;AACA;AAEA;AAbQ;AAgBZ;AACI;;AACA;AAEI;AACH;;AAED;AACI;AACA;AACH;;AAED;AAAiC;AAAD;AACnC;AAED;AACI;;AACA;AACI;AACH;AAEG;AACA;AACA;AAEA;;AACA;AACH;AACJ;AAED;AACI;;AACA;AACI;AACI;AACH;AAEG;AACI;AACA;AACH;AAEG;AACA;AACT;AACA;AACA;AACA;AACA;AACA;AACS;AACA;AACA;AACT;AACM;AACJ;AACJ;;AACD;;AAEA;AAAiC;AAAqB;AAAtB;AACnC;AAED;AACI;;AACA;AACI;AACI;AACH;AAEG;AACH;AACJ;;AAED;AACI;AACA;AACA;AAHO;AAKX;AACH;AAED;AACI;;AACA;AACI;AACI;AACI;AACI;AACH;AACJ;AAEG;;AACA;AACI;AACH;AACJ;AACJ;AAEG;AACI;AACH;;AACD;AACH;AACJ;;AAED;AACI;AACA;AACA;AAHO;AAKX;AACA;AACH;AACD;AACI;;AACA;AACI;AACI;AACH;AAEG;;AACA;AACI;AACH;AACJ;AACJ;;AAED;AACI;AACA;AAFO;AAIX;AACH;AACD;AACI;;AACA;AACI;AACI;AACH;AAEG;AACA;AACH;AACJ;;AAED;AACI;AACA;AACA;AAHO;AAKX;AACH;AAED;AACI;;AACA;AACI;AACI;AACH;AAEG;AACA;AACH;AACJ;;AAED;AACI;AACA;AACA;AACA;AAJO;AAMX;AACH;AA9LI;;;;;;;;;;ACAT;AACI;AAEA;AAEI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVQ;AAaZ;AACI;AACA;AACA;AACA;AACA;AAEA;AACA;AACH;AAED;AACI;AACA;AACA;AACA;AAEA;AACA;AACH;AAGD;AAEA;;AAxCK;;;;;;;;;;ACAT;AACA;;AACA;AACI;AACA;AACA;AACA;AACH;;AAED;AACA;;AACA;AACI;AACA;;AACA;AACI;AACH;AAEG;AACH;;AAED;AACA;AACH;;AAED;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACI;AACH;;AACD;AACH;;AAED;AACI;;AACA;AACI;AACH;AAEG;AACH;;AACD;AACH;;AACD;AACI;AACA;;AACA;AACI;AACA;AACA;AACA;AACH;;AAED;AACA;;AACA;AACI;AACA;AACA;AACA;AACH;;AACD;AACH;;AAED;AACI;AAEA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAZQ;AAeZ;AACA;AACI;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;AACA;AACA;AACH;AAED;AAEI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AAED;AAEI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AAED;AAEI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AAED;AAEI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AAED;AAEI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AAED;AAEI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AAED;AAEI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AAED;AAEI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AAED;AAEI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AAED;AAGA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACE;AApMG;;;;;;;;;;ACzET;AACI;AAEA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjBQ;AAoBZ;AACA;AAEI;AACA;AAEA;AACA;AAEA;AACA;AAEA;;AACA;AACI;AACH;;AAED;;AACA;AACI;AACH;;AAED;AACA;;AACA;AACI;AACI;AACA;AACA;AACA;AACA;AACH;AAED;AACI;AACH;AAED;AACI;;AACA;AACI;AACA;AACH;AAEG;AACH;;AACD;AACH;AAED;AACI;AACA;AACA;AACA;AACH;AACJ;AACJ;AAED;AACI;AACI;;AACA;;AACA;AACA;AAA4B;AAAQ;AAAT;AAC9B;;AACD;AACH;AAED;AACI;AACH;AAED;AACA;AACI;AACI;AACI;AACI;AACH;;AACD;;AACA;AACI;AACH;;AACD;AACH;AACJ;;AAED;AACI;;AACA;AACI;AACA;AACH;AAEG;AACA;AACH;AACJ;AACJ;AAzHI;;;;;;;;;;ACAT;AACI;AACA;AACI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAZQ;AAeZ;AACA;AACI;AACI;AACH;;AAED;AACA;AACH;AAED;AACA;AACI;AACH;AAED;AACI;;AACA;AACI;AACH;;AACD;AACI;AACI;AACH;;AACD;AACH;AACJ;AACD;AACI;;AACA;AACI;AACH;AACJ;AAjDI;;;;;;;;;;;ACAT;AACC;AAAa;AAA2D;AAAmB;AAAgD;AAAa;AAAK;;AAAM;AAAgC;AAAS;AAAqC;AAAS;AAAmC;AAAO;AAAK;AAAO;;AAAA;AAAW;AAAC;AAAa;AAA0B;AAA0B;AAAgB;AAAU;AAAU;AAA0C;AAAwB;AAAoB;AAA8C;AAAkC;;AAAA;AAAY;AAAD;AAAa;AAAmC;AAAiB;AAAgB;AAAsB;;AAAA;AAAoB;;AAAA;;AAA0C;AAA2B;AAA3B;;AAAmC;AAAS;AAAG;AAEtyB;AAEC;AAAE;AAAD;AAAc;AAEhB;AAEA;;;;;;;AAMA;AAEC;AAAE;AAAa;AAAd;AAAsC;AACxC;AACA;;;AAIA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;AAEA;;;;;AAIA;AAEA;;;;;;AAMA;AAEA;;;;;;;;;AAQA;AACE;AAEA;;AAEA;AACD;AACA;AACE;;AAED;AACD;AACA;AACA;AACA;AACA;AACE;AACF;AACE;;AAED;;AAGA;AACD;AACA;AACE;;AAED;AACA;AAEA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AACA;AACD;AACE;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;;AACA;AACD;AACE;AACD;AACC;;AAED;AACD;;AAED;AAEA;;;;AAIA;AAEA;;;;;;AAMA;;AAEA;;;;;AAKA;AACA;AACA;AACA;AAEA;;;;;;;;AAQA;AACE;AACA;;AAGA;;AAGA;;AAGA;AAEA;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvBsC;AA0BrC;AACD;;AAED;AACE;;AACA;AACD;AACE;AACD;AACC;;AACD;AACD;AAED;;;;;;;AAKA;AACE;;AACA;AACD;AACE;AACF;AACA;AACA;AACE;AACD;AACD;AACE;AACF;AACE;;AACD;;AAGA;AACD;AACE;AACF;AACA;AACA;AACE;;AAED;AACA;AACD;AAED;;;;;;;AAMA;AACE;AACA;;AAEA;AACD;AACA;AACE;;;AAGD;;AAGA;AAED;AACE;AAEF;AACE;AAEF;AACE;AAEF;AACE;AACF;AAED;;;;;;;;AAOA;AACE;AACA;AAA6C;AAAF;AAA3C;AAAA;AAIA;;AAEA;AACD;AACE;AACA;AACD;;AACD;AAEA;AACA;AAAkB;AAAc;AAAhB;AAChB;AACE;;AACA;AACD;AACA;AACA;AACA;AACA;AAEA;AACA;AACE;AACA;AACA;AAEA;AAEA;AACA;AAAkB;AAAF;AAChB;AACA;AACA;AACA;AACD;AACC;AACF;AACA;AACA;AACA;AACE;AACF;AACC;;AAED;AACD;;AAGA;AAEA;AAEA;AACA;AACE;;;AAGD;AACD;AACA;AAEA;AAEA;AAEA;AACE;;AAED;AACD;AACE;;;AAGD;AACD;AACE;;;AAGD;AACD;AACE;AACA;AACD;AACC;;;AAGD;AACD;AACA;AACA;AACA;AACA;AACE;;AAED;AACA;AACA;AAEA;AACA;AAEA;AAED;AAED;;;;;;;AAMA;AACE;AACA;AACA;AACA;AACA;AAGA;;AACA;AACD;;AACA;AACE;AACD;AACC;AACF;AAED;;;;;;;AAMA;AACE;AACD;AAEA;;AAGA;;AAEA;AACE;AACD;AACA;;AAEC;AACD;AACA;AACA;;AAEC;AACD;AACA;AACA;AACA;;AAEC;AACD;AACA;AACA;AAnBD;AAqBE;AACF;AACE;AACF;AAED;;;;;;;;AAOA;AACE;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAGA;AACA;AACD;AAED;;;;;;;AAMA;AACE;AACA;AACA;AACD;AACA;AACE;AACF;AAED;;;;;;;;AAOA;AACE;AACA;AACA;AACD;AACA;AACA;AACE;AACF;AAED;;;;;;;AAMA;AACE;AACA;AACD;AACE;AACF;AAED;;;;;;;AAMA;AACE;AAGA;AACA;;AACA;;AAEA;AACD;AACE;AACF;AACE;AACF;AAED;;;;;;;AAMA;AACE;AAED;AACA;AAEA;;AACA;AACA;AACE;AACF;AAED;;;;;;;;;;;AAUA;AAEE;AACA;AACD;AAED;;;;;;;;;;;AAUA;AACE;AACD;AACA;AACE;;AAED;AACD;AACA;AACE;;AAED;AACD;AACE;;AAED;AACA;AAEA;AACD;AACA;AACA;AAHc;AAKb;AACA;AACA;AACA;AACD;AAED;;;;;;;AAMA;AACE;AACD;AAEA;;AAEA;AACE;AACD;AACE;AACD;AACC;AACD;AACC;AACF;AACC;AACD;AACC;AACD;AACC;;AAED;AACD;AACA;AACA;AACE;;AAED;AACD;AACA;AACA;AACE;;AAED;AACD;AACA;AACA;AACE;;AAED;AACD;AAED;;;;;;;AAMA;AACE;AACA;AACA;AACA;AACD;AAED;;;;;;;AAMA;AACE;AACD;AACA;;AAGA;AACA;;AAGA;;AAGA;;AAGA;;AAGA;;AAGA;;AAGA;AAGA;;AACA;AACA;AACE;AACF;AAED;;;;;;;;;AAQA;AACE;;AACA;AACD;AACE;;AACD;AACD;AAEA;AACA;AAAE;AAAgB;AAAiB;AAAuB;AAAW;AAAsB;AAAa;AAAe;AAAa;AAAnI;AAAmJ;AACrJ;;;AAIA;;AACA;AAEA;;;;;AAIA;AAEA;;;;;;;AAOA;AACE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACD;AAED;;;;;AAIA;AAEA;;;;;;;;AAQA;AACE;AACA;AACA;AACA;AACA;AACD;AAED;;;;;;;AAMA;AACE;AACD;AACA;AACE;;AAED;AACD;AAED;;;;;;;AAMA;AACE;AACD;AACA;AACE;;AAED;AACD;AAED;;;;;;;;AAOA;AACE;AACD;AACE;AACF;AACE;AACF;AAED;;;;;;;AAMA;AACE;AACA;AACA;AACD;AAED;;;;;;;;AAOA;AACE;AACA;AACD;AAED;;;;;AAIA;AACE;AACD;AAED;;;;;;;AAMA;AACE;AACA;AACD;AAEA;AAAE;AAAuB;AAAxB;AAAgD;AAClD;AACA;;;AAIA;;AACA;;AACA;;AACA;AAEA;;;;;AAIA;AACA;AAEA;;;;;;;AAOA;AACE;AACA;AACA;AACA;;AAEA;AACD;AACA;;AAGA;AACE;AACD;;AAED;AACA;AACE;;AAED;AACA;AACA;;AAEA;AACD;AACE;AACF;AACA;AACE;AACF;AAEA;AACA;AAAE;AAAoB;AAAkB;AAAgB;AAAvD;AAAiF;AACnF;AAEA;;;AAIA;;AACA;AAEA;;;;;AAIA;AAEA;;;;AAIA;AACA;AAEA;;;;AAIA;AAEA;;;;AAIA;AAEA;;;;AAIA;AAEA;;;;;;;;AAOA;AACE;AAEA;AAGA;;AACA;AACD;AACA;AACA;AACE;;;AAGD;;AAGA;AACA;AACD;AACE;;AAGD;;AAGA;AACD;AACE;AACD;AACC;AACF;AAED;;;;;AAIA;AAEA;;;;AAIA;AAEA;;;;;;AAMA;AACE;AACD;AACA;AACE;;AAED;AACD;AACA;AACA;AACE;;AAED;AACD;AAED;;;;;;;AAMA;AACE;AACA;;AAEA;AACD;AACA;AACE;;AAED;AACA;;AACA;AACD;AACE;;AAED;;AACA;AACD;AACE;AAEF;AACE;;AACD;AAEA;;AAEA;AACD;AACE;AACA;AACA;AACD;AACC;AACF;AAED;;;;;;;;;AAQA;AACE;;AAEA;AACD;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACE;;AAED;;AAEA;AACD;AACA;AACE;;AAED;AACD;AACE;AACD;AACE;AACF;AACE;AACF;;AAED;AACE;AACA;AACA;AACD;AACC;AACA;AACA;AACD;;AAED;AAEA;AACA;AACE;;AAED;AAGA;;AACA;AACA;;AAEA;AACD;AACE;;AAED;AACD;AACE;AACD;AACE;AACF;AACC;AACF;AACE;AACF;AAEA;AACA;AAAE;AAAc;AAAf;AAAwC;AAC1C;AACA;;;AAIA;;AACA;;AACA;;AACA;;AACA;AAEA;;;;;AAIA;AACA;AAEA;;;;AAIA;AAEA;;;;;;;;AAOA;AACE;;AAEA;AACD;AACA;;AAGA;AACE;AACD;;AAED;AAEA;AACE;AACF;AACE;AACF;AAED;;;;;AAIA;AAEA;;;;AAIA;AAEA;;;;;;;AAOA;AACE;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AAEA;AACD;AAED;;;;;;;;;AAQA;AACE;AACA;AAAyB;AAAgB;AAAY;AAA9B;AACvB;AACA;AACA;AACD;AACE;AACD;AACD;AAED;;;;;;;AAMA;AACE;AACA;AACA;AACA;AACD;AACE;AACD;AACD;AACE;AACD;AACD;AAED;;;;;;;;AAOA;AACE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AAEA;AACD;AAED;;;;;AAIA;AAEA;;;;;;AAMA;AACE;AAAa;AAAmB;AAAkB;AAAkB;AAAzD;;AAGX;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;AAEA;AACD;AACA;;AACA;AACE;AACD;;AACA;AACE;AACD;AACE;AACF;AACC;AACF;;AACD;AACE;AACA;AACA;AACD;;AAED;AACE;AACD;AACE;AACD;AACC;AACD;AACC;AACF;;;AAGD;AACE;AACD;;AAED;AACE;AACD;AACE;;AACD;AACD;AACE;AACF;AACC;AACD;;AACA;AACE;AACD;AACC;AACA;AACA;AACD;AACE;AACF;AACC;AACF;;AAED;AACA;AACE;AACF;AACA;AACA;AACA;AACE;AACD;AACD;AACE;;AAED;AACD;AACA;AACE;AACF;AAED;;;;;;;AAMA;AACE;AACA;AACD;AAED;;;;;;;AAMA;AACE;AACA;AACD;AAED;;;;;;;AAMA;AACE;AACA;AACD;AAED;;;;;;;AAMA;AACE;AACD;AACE;;;AAED;AACD;AACE;AACF;AACE;;AAED;AACD;AACE;AACD;AACC;;AAED;AACD;AACE;;AAED;AACD;AAED;;;;;;;AAMA;AACE;;AACA;AACD;;AACA;AACE;AACD;;AACD;AACE;AACD;AACC;AACD;AACE;AACF;AACE;AACD;AACC;AACA;;AACA;AACD;AACE;;AAED;AACD;AACC;AACF;AACC;AACF;AACE;;AACD;AACD;AACE;AACF;AAED;;;;;;;AAMA;AACE;AACD;AAED;;;;;;;AAMA;AACE;AACD;AAED;;;;;;;AAMA;AACE;AACA;;AACA;AACD;AACE;AACF;AACE;AACF;;AAED;AACE;AACD;AACE;AACD;AACC;AACF;AAEA;AACA;AAAE;AAAc;AAAuB;AAAuB;AAAW;AAAxE;AAAkG;AACpG;;;AAIA;;AACA;;AACA;;AACA;;AACA;;AACA;AAEA;;;;;AAIA;AAEA;;;;AAIA;AACE;;AACA;AAA+B;AAAF;AAC7B;AACD;AAED;;;;;;;;AAOA;AACE;;AACA;AACD;AACE;;AACD;AACD;AAED;;;;;AAIA;AAEA;;;;AAIA;AAEA;;;;;;;AAOA;AACE;AACD;AAED;;;;;;;;AAOA;AACE;AACA;AAEA;;AAEA;AACD;AACA;AACA;AACE;;AAED;AACD;;AAEA;AACE;AACA;AACA;AACD;AACA;AACE;AACF;;AAED;AACE;AACA;AACA;AACD;AACA;AACE;AACF;AACC;AACF;AACE;AACF;AAED;;;;;;;AAMA;AACE;AACA;AACA;AACA;AACD;AAED;;;;;;;AAMA;AACE;AACA;;AACA;AACD;AACA;AACE;AACD;;;AAGD;AACE;AACA;AACD;;;AAGD;AACE;;;AAGD;;AAGA;AACD;AACA;AACA;;AAEA;AACE;AACD;AACC;AACD;AACC;AACF;AAED;;;;;;;AAMA;AACE;;AAEA;AACD;AACA;AAAc;AAAF;AACV;;AAED;AACD;AACA;AACE;AACF;AACA;AACA;AACA;AACE;AACF;AAED;;;;;;;;;AAQA;AACE;AACA;;AACA;AACD;AACA;AACE;;AAED;AACA;AACD;AACE;AACF;AAED;;;;;;;AAMA;AACE;AACA;AACA;;AAGA;AACD;AACE;;AAED;AACD;AACE;;AAED;;AAGA;AAED;AACE;;;AAGD;AACD;AACE;;AAED;AACA;AACD;AAEA;AAAE;AAAiB;AAAuB;AAAW;AAAsB;AAAa;AAAwB;AAA/G;AAA4H;AAC9H;AACA;;;AAIA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;AAEA;;;;;;AAMA;;AACA;AACE;AACD;AACE;AACF;AAED;;;;;AAIA;AAEA;;;;;;;AAOA;AACE;;AACA;AACD;AACE;;AACD;AACA;AACD;AAED;;;;;AAIA;AAEA;;;;;;AAMA;AAEA;;;;AAIA;AAEA;;;;;;AAMA;AACE;AACD;AACA;AACE;;AAED;AACA;AACA;AACA;AACD;AACA;AAFY;;AAMX;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACD;AACE;;AAED;;AAEA;AACD;AACE;;AAED;AACD;AACA;AACE;AACF;AACE;;AAED;AACD;AAED;;;;;;;AAMA;AACE;;AAEA;AACD;AACE;;AACD;AACD;AACE;;AACD;AACD;AACE;;AACD;AACD;AACE;AACF;AAED;;;;;;;;AAOA;AAEE;AACD;AACA;AACE;AACD;AACC;AACF;AAED;;;;;;;;AAOA;AACE;AACA;AAGA;;AACA;;AACA;AACD;AACE;AACD;AACE;AACA;;AACA;AACD;AACE;;AAED;AACD;;AACA;AACE;AACD;AACC;AACF;AAGD;AACA;;;AACA;AACE;AACD;AACA;AACE;AACF;AACE;AACF;AACC;AACD;;AAED;AACE;AACF;AACC;;AAED;AACD;AAGA;;AACA;AACE;AACA;AACD;AACC;AACF;AAED;;;;;;;AAMA;AACE;AACD;AAED;;;;;;;AAMA;AACE;AACD;AACE;AACF;AAED;;;;;;;AAMA;AACE;AACA;AACA;;AAGA;AAED;AACE;;;AAGD;AACD;AACE;;;AAGD;AACD;AACE;;AAED;;AAGA;AACD;AACE;;AAED;AACA;AACD;AAED;;;;;;;;AAOA;AACE;AACD;AAEA;AACA;AAAE;AAAiB;AAAuB;AAAW;AAAsB;AAAa;AAAe;AAAtG;AAAmH;AACrH;AACA;;AAEA;AACE;AAGA;;AACA;AAGA;;AACA;;AAGA;AACD;AACE;AACD;AACC;AAGD;AACA;;;AACA;AACD;AACE;AACD;AACC;;AAED;AACD;AACE;AACD;AACC;AACF;AAEA;AAAE;AAAD;AAAiB;AACnB;;AAEA;AACC;AACA;AACA;AAEA;;AAEA;AACC;AACC;AACA;;AACD;;AAGA;AACC;AACA;;AAEA;AACA;AACA;AACA;AACD;AACD;;AAED;AAEC;AAAK;AACN;;;;;;AAOA;AACE;AACA;AACA;;AAEA;AAAyB;AAAuC;;AAEhE;AAAiB;AAAiB;;AAClC;AAAe;AAAe;;AAC9B;AAAmB;AAAc;;AAEjC;AACD;AACE;;AAED;AACA;;AACA;AACD;AACE;;AACD;AACD;AAEA;AAAK;AACN;;;;;;;AAOA;AACE;;AAEA;AACD;AAAA;AAAA;AAAA;;AAGA;AACE;AACA;AACA;AACA;AACD;;AAED;AACE;AACD;AACC;AACD;;AAED;AACE;;AAED;AACD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAIA;AACE;;AACA;AACD;AACE;AACF;;AAED;AAAA;;AAGA;AACE;AACA;AACA;AACA;AAEA;AACA;AACA;AACD;;AAED;AACE;AACF;AAEA;AAAK;AACN;AACA;;;AAIA;AAKA;;;;AAIA;AACE;AACD;AACA;AACE;AACF;AACE;AACF;AAED;;;;;;AAKA;AACE;AACD;AACA;AACE;AACF;AACE;AACF;AAED;;;;;AAIA;AAIA;;;;;;AAMA;AACE;AACD;;AACA;AACE;AAGA;;AACA;AACD;AACA;AACA;AACE;;AAED;AACD;AACC;AACF;;AAED;AACE;AAEA;AACA;;AAEA;AACD;AACE;;AAED;AACD;;AAAA;;AAED;AACE;AACA;AACD;;AAAA;;AAED;AACE;AACD;AACE;AACF;AACE;AACF;AACE;AACF;AAEA;AACA;AAAK;AAEN;;;AAIA;AAEA;;;;;;AAMA;AACE;AACD;;AAAA;AAED;;;;;;;;AAQA;AACE;AACD;AACE;;AACD;AACD;AAED;;;;;;;;;;AASA;AAEE;AACA;AAEA;AACD;AAED;;;;;;;;;;;AAUA;AACE;AACA;;AAEA;AACD;AACA;AACE;;AAED;AACA;AACA;AACD;AAED;;;;;;;;;;;AAUA;AAIE;;AAGA;AACD;AACA;AACE;;;AAGD;AACA;;AAGA;AACD;AACA;AACE;;;AAGD;;AACA;AACD;;AACA;AACE;AACA;AACD;AACC;;AACD;AACD;AAED;;;;;;;;;AAQA;AACE;AACA;AAAA;;AAGA;AACD;;AACA;AACE;AACD;AACC;;AAED;AACD;AAED;;;;;;;;;AAQA;AACE;AACA;AACD;AAED;;;;;;;;;AAQA;AACE;AACD;AAEA;AAAK;AAEN;AACE;;AACA;AACA;AACA;AACD;AACA;AAAK;AAEN;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;;;;AAIA;AASA;;;;;;;;AAQA;AACE;AACA;AAEA;AAED;AACC;AACD;AAED;;;;;AAIA;AACE;AACD;AAGD;;;;;;;AAMA;AACE;AACA;AAEA;AAOA;AAEA;AACA;AAGA;AACA;;AACA;AACA;AACA;AACD;AACA;;AACA;AACE;AACA;AACA;AACD;AACC;AAED;AACA;AACD;AAED;;;;;;;;AAOA;AACE;AACA;AACA;AAGD;AAED;;;;;;;;AAOA;AACE;AACD;AACE;AACD;AACC;AACD;AACC;AACF;AAED;;;;;;;;AAOA;AACE;;AACA;AACD;AACE;;AACD;AACD;AAED;;;;;AAIA;AAEA;;;;;;;;;;;AAWA;AACE;AACD;AACE;AACF;AAEA;AAAE;AAAD;AAAgB;AAElB;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;AAIA;AACA;AAEA;;;;;;AAMA;AAEA;;;;AAIA;AAEA;;;;AAIA;AAEA;;;;;;;AAOA;AACE;AACD;AAED;;;;;;;;;AAQA;AAEE;AACA;;AAEA;;AAGA;AAED;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AAEA;AAEA;;AAEA;AACE;AACA;AACD;;;AAGD;AACA;AACE;AACA;AACA;AACA;;AACA;AACD;AACA;;AAGA;AACA;AACE;;AACD;AACD;;AAED;AACE;AACD;;AACD;AACA;AACE;;AACD;AAEA;AAEA;AAEA;AACD;AAED;;;;;;;;;AAQA;AACE;AAEA;AACA;;AAEA;AACD;;AACA;;AACA;AACE;AACD;AACC;AACD;AACC;AACF;AAED;;;;;;;AAMA;AACE;AACD;AAED;;;;;;;;;AAQA;AACE;;AACA;AACD;AACE;AACD;AACC;;AACD;AACD;AACE;AACD;AACC;;AACD;AACD;AAED;;;;;;;;;AAQA;AACE;AACA;AACD;AAEA;AAAE;AAAD;AAAW;AACb;AACA;;;AAIA;;AACA;;AACA;;AACA;;AACA;;AACA;AAEA;;;;;;;;AAOA;AAEA;;;;;;;AAMA;AAEA;;;;;AAIA;AAEA;;;;AAIA;AAEA;;;;AAIA;AACC;AAD+B;AAE5B;AAF4B;AAG5B;AACA;AACA;AACA;AACA;AAP4B;AAUhC;AAEA;;;;AAIA;AAAY;AAAe;AAAjB;AAEV;;;;AAIA;AAEA;;;;;;;;;;;;;;;;;AAgBA;AACE;AACD;AACA;AACE;;AAED;AACD;AACA;AACE;;AAED;;AAIA;AACD;AACE;AACF;AACE;;;AAGD;AACD;AACE;;;AAGD;;AAGA;AACD;AACE;;AAED;AAED;;AAED;AACE;AACA;AACA;AACD;AAED;;;;;AAIA;AACE;AACD;AACE;;AAED;AACA;AACA;AAEA;;AACA;AACD;AACE;;AAED;AACD;;AAED;AACE;AACD;AACE;;AAED;;AACA;AACD;AACA;AACE;;AACD;AACD;;AAED;AACE;AACD;AACE;;AAED;AACD;AACE;;AAED;AACA;AACA;AAEA;AACD;AAED;;;;;;;;AAOA;AACE;;AACA;AACD;;AACA;AACE;AACA;AACD;;AACD;AACE;;AAED;;AACA;AACD;AACE;AACF;AACA;AACA;;AACA;AACE;AACD;;AACD;AACE;;AACD;AACA;AACD;AAED;;;;;;;;AAOA;AACE;AACA;AACD;AACE;AACD;;AAED;AACE;AACD;AACE;AACF;AACE;AACF;;AACD;;AAEA;AACE;AACD;;AAED;AACE;AAAS;AAAyB;AAA3B;AACR;AACC;AAAS;AAAF;AACR;AACC;;AAED;AACA;AACA;;AACA;AACD;AACE;;AACD;AAAS;AAAyB;AAA3B;AACR;AAED;;;;;;;;AAOA;AACE;;AACA;AACD;AAAS;AAAY;AAAQ;AAAc;AAAhB;AAApB;AACL;;AAED;;AAEA;AACD;AACE;;AAED;AAAS;AAAY;AAAd;AACR;AAED;;;;;;;;;;;;;;;;;AAgBA;AACE;AACD;AACA;AACE;;AAED;;AAEA;AACD;AACE;AACD;;AAED;AACE;;AAED;AACD;AACE;;AAED;AACD;AACE;;AAED;AACD;AACE;AACD;AACC;;AAED;AACD;AACE;AACF;AAED;;;;;AAIA;AACE;AACA;;AAEA;AACD;AACE;AACA;AACD;AACC;;AAED;AACD;AACE;AACF;AAED;;;;;;;;;AAQA;AACE;AACD;AACE;;AAED;AACD;AACA;AACE;;AAED;;AACA;AACD;AACA;AACE;;AAED;AAAA;AAAA;;AAGA;AACD;;AAEA;AACE;AACD;AACC;AACD;AACA;AACE;;AAED;;AAEA;AACD;AACA;AACE;;AAED;AACD;;AAEA;AACE;AACA;AACD;;AAED;AACA;AACE;;;AAGD;AACA;AACD;AACC;;AAED;AACD;AACA;AACE;AAEF;AAED;;;;;;;;;;;;;;;AAcA;AACE;AACD;AACE;;AAED;AACD;AACE;AACD;AACC;;AAED;AACD;AACE;;AACA;AACD;AACE;AACF;AACE;;AACD;AACD;AAED;AAEA;AACA;AACE;AACA;;AACA;AACD;;AACA;AACE;AACD;;AACD;AACE;;AAED;AAAgB;AACjB;AACE;AAAQ;AACV;AACE;;AAED;;AACA;AACD;AACE;;AACD;AAEA;;AACA;AACD;AACE;AACF;AAED;AACE;AACF;AAED;;;;;AAIA;AACE;AACD;AACE;AACA;;AACA;AACD;;AACA;AACE;AACD;;AACD;AACA;AACE;;AAED;AAIA;AACA;;AACA;AACD;AACE;;AACD;;AAEA;AACD;AACA;AACE;AACF;AACC;;AAED;AACD;AACE;AACF;AAED;;;;;;;;;;AASA;AACE;AACD;AACA;AACE;;AAED;AACA;AAEA;;AACA;AACD;AACA;AACA;;AAEA;AACE;;AAEA;AACD;AACA;AACE;;AAED;AACD;;AAED;AAEA;AACA;AAEA;;AACA;AACE;AACD;AACE;AACF;AACA;AACA;;AACA;AACE;AACD;AACC;AACF;;AAED;AACA;AACE;;AAED;AACA;AACD;AACE;AACF;AAEA;AACA;AAAE;AAAY;AAAW;AAAuB;AAAwB;AAAU;AAAgB;AAAjG;AAA6G;AAE/G;;;;;;AAOA;AACE;AACA;;AAEA;AACD;AACE;AACD;AACC;;AACD;AACD;AAEA;AAAK;AACN;AAEA;;;AAIA;AAEA;;;;;AAIA;AAEA;;;;;;;;;AASA;AAEE;AACD;;AAEA;AAKE;AACD;;AAED;AACE;AACC;AACC;AACA;AACD;AACF;AACC;AACD;AACE;;AAED;AACD;AACE;AACD;AACC;AACF;;AAED;AACE;;AAED;AACD;AAEA;AACA;AAAE;AAAD;AAAgB;AAElB;;;;;;;AAQA;AACE;AAED;AACC;AACA;AACA;AACD;AAEA;AAAK;AAEN;;AAEA;AACE;;AACA;AACD;AACE;;AACD;AACD;AACA;AAAK;AACN;AACE;AACD;AAEA;AAAK;AACN;;;AAIA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;;AAaA;AACE;AACA;AACA;AAGD;AAED;;;;;;;;;AAQA;AACE;AACA;AACA;AACA;AACA;AACA;;AACA;AACD;AACA;AACA;AACA;AACA;AACE;;AACF;AACA;AACA;AACE;;AACF;AACA;AACA;AACA;AACA;AACE;;AACF;AACA;AACA;AACA;AACA;AACE;;AACF;AACA;AACA;AACA;AACA;AACE;;AACF;AACA;AACA;AACA;AACA;AACE;AAlCD;AAoCD;AAED;;;;;;;;;AAQA;AACE;AACA;AACA;AACA;AACA;AACD;AAED;;;;;;;;;AAQA;AACE;AAKD;AAED;;;;;AAIA;AACE;AACA;AACA;AACD;AAEA;AAAK;AACN;AACA;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACE;AACD;AACE;;AAED;;AAGA;AACD;AACE;;AAED;AAGD;AACE;AACF;AACA;AACA;AAAK;AACN;;;;;;;AAQA;AACE;;AAEA;AACD;AACE;AACA;AACD;AACC;;AAED;AACD;AAED;;;;;;;;AAOA;AACE;AACA;;AACA;AACD;AACA;AACE;;AACD;AACD;AAEA;AAAK;AACN;;;;;;AAOA;AAEA;;AAIA;AACC;AAAA;AAAA;;AAIA;AACC;AACA;;AAED;AAAA;AAAA;;AAIA;AACC;AACA;;AAED;AACC;AACA;AACA;AACA;AACA;;AAED;AACA;AAEA;AAAK;AACN;AACA;AACA;;AAAE;AAED;AACA;;AAGA;AAIA;;AACA;;AACA;AACC;AACA;AAED;;;AAEA;;AAGA;AACC;AACA;AACA;AACA;AACA;;AACA;AACC;;AACA;AACC;AACA;;AACA;AAAkC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACD;AACA;AACA;AACD;;AACD;AACA;;;AAGD;AACC;AACA;AACA;AACA;;AACA;AACC;;AACA;AACC;AACA;AACA;AACA;;AACD;AACA;;AACD;AACA;;AAED;AACC;AACC;AAIA;AACD;AACD;;;AAEA;AACC;AACA;;AAED;AACC;AAAqC;AACpC;AACA;;AACD;;AACA;AAAqC;AACpC;AACA;AACyC;AACzC;AACA;AACA;AACA;AACyC;AACzC;AACA;AACA;AACA;;AACD;AACA;AACA;;AAED;AACC;AACA;AACA;AACA;AACA;;AACA;AACC;AACA;AACA;;AACD;AACA;AAED;;;AAEA;AACC;AACC;AACA;;AAED;AACA;;AAEA;AACC;AACA;;;AAGD;AACA;;AAED;AACC;AACA;AACA;AACA;AACA;;AAEA;AACC;AACA;;AAED;AACC;AACA;;;AAGD;AACA;;AAGA;AACC;AACA;;;AAGD;AACC;AACA;;AACA;AACC;AACA;AACA;AACA;AACD;;;AAGD;AACC;AACA;AACA;;AACA;AACC;AACA;AACA;AACA;AACA;AACD;;;AAGD;AACC;AACA;AACA;AACA;;AAEA;AACC;AACA;AACD;;AAED;AACA;;AAED;AACA;AACA;;AACA;AACC;AACA;AACA;AACA;AACA;;AACA;AACC;AACA;;AACD;AACA;AAED;;;AAEA;AACC;AACA;AACA;AAHU;AAOX;;AACA;AAKC;AACC;AACA;AACD;AACA;AAAkB;AACjB;AACA;AAAQ;AACR;AACA;;AACA;AACC;AACA;AACD;AACD;AAAQ;AACR;AACA;AAED;AAEA;AACA;AAAK;AACN;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;;;;;;;;AAOA;AACE;;AAEA;AACD;AACA;AACE;;AAED;AACD;AAED;;;;;;;;;AAOA;AACE;;AAEA;AACD;AACE;;AAED;AACD;AAED;;;;;;;;AAMA;AACE;AAEA;AACA;AACD;AAGD;AACA;;;AACA;AAAwB;AAAxB;AAGA;AACA;;;AACA;AACA;AACA;AAEC;AAAK;AAEN;;;AAIA;;AACA;;AACA;;AACA;AAEA;;;;;AAIA;AAEA;;;;AAIA;AAEA;;;;;;;;;;;;;AAaA;AACE;AACD;AACA;AACE;;AAED;AAEA;AACA;AACA;AACA;AACA;AACA;AAGA;;AAEA;AACD;AACA;AACE;AACF;AACE;AACA;AACD;;AACD;AACE;;AAED;AACD;AAED;;;;;;;AAMA;AAEA;;;;;;;AAOA;AAEA;;;;;;AAMA;AACA;AAEC;AAAE;AAAe;AAAc;AAAW;AAAW;AAApD;AAA4E;AAE9E;;;AAIA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;AAEA;;;;;AAIA;AAEA;;;;AAIA;AAEA;;;;;;;AAOD;;AACC;AACE;;AACA;AACD;AACA;AACE;;AACD;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD;AACA;AACA;AAH4B;AAK3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD;AAED;;;;;;;AAMA;AACE;;AACA;AACD;AACE;AACD;AACC;AACF;AAED;;;;;;;AAMA;AACE;AACD;AACE;AACD;AACC;AACF;AAED;;;;;AAIA;AAEA;;;;;;;;AAQA;AACE;AACA;AACA;AACD;AAED;;;;;;;;;AAQA;AACE;AACA;AACA;AACD;AAED;;;;;;;;;AAQA;AACE;AACA;AACA;AACA;AACD;;AAED;AACE;AACA;AACA;AACA;AACD;AAED;;;;;;;;;AAQA;AACE;AACA;AACA;AACA;AACD;AAED;;;;;;;;AAOA;AACE;AACA;AACA;AACD;AAED;;;;;;;;AAOA;AACE;AACA;AACD;AACA;AACE;AACF;AAGD;;;;;;;;;AAQA;AAEE;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACD;AACA;AACE;;AAGD;AACD;AACA;AACA;AACA;;AACA;AACE;AACA;AACA;AACD;AACC;AACA;AACD;AACC;;AAGD;AACD;AACA;;AAGA;AACE;AACA;AACA;AACA;AACA;AACD;AAED;AACE;AACD;AACE;AAHY;AAKb;;AAED;AACA;AAEA;AACD;AAED;;;;;;;AAMA;AACE;;AAGA;;AAGA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACD;AAED;;;;;;;AAMA;AACE;AACA;AACD;AAED;;;;;;;AAMA;AACE;AACD;AAED;;;;;;;AAMA;AACE;AACD;AAED;;;;;;;AAMA;AACE;AACD;AAED;;;;;;;AAMA;AACE;AACA;AACD;AAED;;;;;;;;AAOA;AACE;;AACA;AACD;AACA;AACA;AACA;AACA;AACE;AACD;;AAED;AACE;AACA;AACD;AACC;;AAED;AACD;AACE;AACD;AACC;;AAED;AACD;AAED;;;;;;;AAMA;AACE;AACA;AACA;AAEA;AACD;AAED;;;;;;;;AAOA;AACE;AACA;;AAEA;AACD;AACA;AACA;AACE;AACD;AACE;;AACD;AACA;AACD;AACC;AAAQ;AACV;AACE;AACF;AAED;;;;;;;;AAOA;AACE;AACD;AACA;AACE;AACF;AAED;;;;;;;AAMA;AACE;AAEA;;AACA;AAAgC;AAAhC;;AAEA;AACA;AACA;AAEA;AACD;AAED;;;;;;;AAMA;AAEE;AACA;AACA;;AACA;AACD;AACA;AACA;AACE;;AACD;AACA;AACA;AACD;AAED;;;;;;;AAMA;AACE;AAEA;AACA;AACA;AACA;;AAEA;AACD;AACE;AACF;AAED;;;;;;;AAMA;AACE;AAEA;;AAEA;AACD;AACA;AACA;AACA;AACE;AACF;AACA;AAEA;AACA;AACE;AAEA;AACA;AACA;;AAGA;AAEA;AACD;AACE;AACA;AACA;AACA;AACD;AACC;AACA;AACD;AACC;AACF;AAED;AACE;AACD;AACE;AAHY;AAKb;AACF;AAED;;;;;;;AAMA;AACE;AACA;AACA;AACA;AACA;AACD;AAEA;AAAE;AAAU;AAAc;AAAY;AAAoB;AAAuB;AAAW;AAAqB;AAAa;AAA7H;AAAqJ;AAEvJ;;;AAIA;AAEA;;;;;;;;;AASA;AACE;AACA;AACD;AACE;AACD;AAHO;AAKR;AAEA;AAAK;AAEN;;;AAIA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;AAEA;;;;;AAIA;AAEA;;;;;;;AAOA;AACE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbW;AAgBb;;;;AAIA;AAEA;;;;;;AAMA;AACE;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD;AAED;;;;;AAIA;AAEA;;;;;;AAMA;AACE;AAEA;AACA;AAKD;AAED;;;;;;;AAMA;AAEE;AAEA;AACA;;AACA;AACA;AACA;AACD;AAED;;;;;;;;AAOA;AACE;AACA;AACA;AACA;AACD;AAED;;;;;;;;;;AASA;AACE;AACD;AACA;AACE;;AAED;AACA;;AACA;AAAoB;AAAmC;;;AACvD;AAAe;AAAkB;AAApB;AAEb;AACA;;AAGA;AACD;AACA;AACA;AACE;;AAED;AACD;AACE;AACF;AACE;;AAED;AAEA;AACD;AAED;;;;;;;;AAOA;AACE;AACA;AACD;AAED;;;;;;;AAMA;AACE;;AAGA;AACD;AAAc;AAAF;AACV;AACF;AAED;;;;;;;;AAOA;AACE;AACA;AACA;AACA;AACA;AACD;AAED;;;;;;;;AAOA;AACE;;AAEA;AACD;AACE;AACA;;AAEF;AACE;AACA;;AAEF;AACE;AACA;;AAEF;AACE;AACA;;AAEF;AACE;AACA;;AAEF;AACE;AACA;;AAEF;AACE;AACA;AA3BD;AA6BD;AAED;;;;;;;;AAOA;AACE;AACA;;AAEA;AACD;AACA;AACE;;AAED;AACD;AACE;AACF;AACE;AACF;AAED;;;;;;;AAMA;AACE;AACA;AACA;AACD;AACA;AACA;AACA;AACA;AAEA;AACA;AACE;AACA;AACA;AAHU;AAKV;AACF;AAED;;;;;;;;AAOA;AACE;;AACA;AACD;AACA;AACA;AACE;AACF;AACE;AACF;AAED;;;;;;;AAMA;AACE;AACA;AACA;AACA;AACD;AAED;;;;;;;AAMA;AACE;;AACA;AACD;AACE;;AACD;;AAEA;AACD;AACE;;AACD;AACD;AAED;;;;;;;AAMA;AACE;AACA;AACA;AACD;AAED;;;;;;;;;AAQA;AACE;AACD;AACA;AACE;AACD;;AACD;AACE;;AAED;AACD;AAED;;;;;;;;AAOA;AAEE;AACD;AACA;AAAc;AAAF;AACV;;;AAGD;;AAEA;AACD;AACA;AACE;;AACD;AACD;AAED;;;;;;;;;AAQA;AACE;AACA;AACA;AACD;AAEA;AAAE;AAAU;AAAoB;AAAuB;AAAW;AAAgB;AAAsB;AAAvG;AAAuH;AACzH;AAEA;;;AAIA;;AACA;AAEA;;;;;AAIA;AAEA;;;;;;;;;AASA;AACE;;AAGA;AACA;;AAGA;AACD;AACE;AACD;AACE;AACF;AACE;AACF;;AAED;AACE;;AACA;AACD;AACE;AACF;AACE;AACF;;;AAGD;AACA;AACE;;;AAGD;AACD;AACE;AACD;AAEC;AACD;AACC;;AAED;AAEA;AACA;;AAGA;;AAEA;AAEA;AACD;AAEA;AACA;AAAE;AAAW;AAAZ;AAA4B;AAE9B;;;AAIA;AAEA;;;;;;;;;;;;AAYA;AACE;AACA;AACA;AACA;AACA;AACA;AACD;AAED;;;;;;;;AAOA;AACE;;AACA;AACD;AACA;AACA;AACE;;AACD;AACD;AAED;;;;;;;AAMA;AACE;AACD;AAED;;;;;;;AAMA;AACE;AACD;AAED;;;;;;;AAMA;AACE;AACD;AAED;;;;;;;AAMA;AACE;AACD;AAGA;AAAK;AACN;;;AAIA;AAEA;;;;;;;;;AASA;AACE;AACA;AACA;AACA;AACD;AACE;AACF;AAEA;AAAK;AAEN;;;AAIA;AAEA;;;;;;AAMA;AACE;AACD;;AAAA;AAED;;;;;;;;AAQA;AACE;AACD;AACE;;AACD;AACD;AAED;;;;;;;;;;AASA;AAEE;AACA;AAEA;AACD;AAED;;;;;;;;;;;AAUA;AACE;AACD;AACA;AACE;;AAED;AACA;AACA;AACD;AAED;;;;;;;;;;;AAUA;AAIE;;AAGA;AACD;AACA;AACE;;;AAGD;AACA;;AAGA;AACD;AACA;AACE;;;AAGD;;AACA;AACD;;AACA;AACE;AACA;AACD;AACC;;AACD;AACD;AAED;;;;;;;;;AAQA;AACE;AACA;AAAA;;AAGA;AACD;;AACA;AACE;AACD;AACC;;AAED;AACD;AAED;;;;;;;;;AAQA;AACE;AACA;AACD;AAED;;;;;;;;;AAQA;AACE;AACD;AAEA;AAAK;AACN;AACC;AAAE;AAAa;AAAd;AAAyB;AAC3B;AACC;AAAE;AAAS;AAAV;AAAoB;AACtB;AAEA;;;AAIA;AAEA;;;;;AAIA;AAEA;;;;;;;;;AASA;AAEE;AACD;;AAEA;AAKE;AACD;;AAED;AACE;AACC;AACC;AACA;AACD;AACF;AACC;AACA;AACD;AACE;;AAED;AACD;AACE;AACD;AACC;AACF;;AAED;AACE;;AAED;AACD;AAEA;AACA;AAAE;AAAD;AAAgB;AAClB;AACC;AAAE;AAAD;AAAY;AACd;AACC;AAAE;AAAD;AAAY;AACd;AACC;AAAE;AAAD;AAAY;AACd;AACC;AAAE;AAAD;AAAY;AACd;AACA;;AAEA;;;AAIA;;AACA;AAEA;;;;;;;;;;;AAUA;AACE;AACA;;AAEA;AACD;;AAEA;AACE;AAAoB;AAAoB;AAAtB;AAClB;AACA;AACD;AACC;;AACA;AACD;AACE;;AACD;AACD;AACC;;AACA;AACD;AACE;;AACD;AACD;;AACD;AACE;;AAED;AACA;AACA;;AACA;AAAQ;AAAc;AAAf;AACR;AAED;;;;;;;;;;AASA;AACE;;AAEA;AACD;AACE;;AACA;AACD;AACC;AACD;AACE;;AACD;AACD;AACC;AACD;AACE;;AACD;AACD;;AACD;AACE;;AAED;AACA;;AACA;AACD;AAED;;;;;;;;;;;AAUA;AACE;AACD;;AAGA;AAEE;;AAGA;;AACA;AAAiC;AAClC;AACE;AACD;AAEC;AACD;;;AAGD;AACE;AACD;AACC;;AAED;AACD;AAA0B;AACzB;AACD;AACE;AACF;AAA0D;AACzD;AACD;AACE;AACF;AACC;;AAED;AACA;;AACA;;AACA;AACD;AACE;AACF;AAEA;AACA;AAAE;AAAiB;AAAlB;AAAiC;AAEnC;;;AAIA;;AACA;;AACA;;AACA;;AACA;;AACA;AAEA;;;;;;;AAMA;AAEA;;;;;;AAMA;AAUA;;;;;;AAMA;AAEA;;;;;;AAMA;AAEA;;;;;;AAMA;AAEA;;;;;;AAMA;AAEA;;;;;;AAMA;AAEA;;;;;;AAMA;AAEA;;;;;;AAMA;AAEA;;;;;;AAMA;AAEA;;;;;;AAMA;AAEA;;;;;;AAMA;AAEA;;;;;;;;;;;AAUA;AACE;;AAEA;AACD;AACE;AAEF;AACA;AACE;AACF;AAED;;;;;;;;;AAQA;AACE;AACA;;AAGA;;AAGA;AACD;AACA;AACE;AAGD;;;AACA;AACD;AACA;AACE;;;AAGD;AACD;AACE;AACA;AACD;;AACD;AACE;;;AAGD;AACD;AACA;AACE;;AAED;AACA;AACD;AAED;;;;;;;;;;;AAUA;AAEE;AACD;AACA;AACA;AAEA;;AACA;AACE;;AAED;AACD;AAED;;;;;;;;AAOA;AACE;AACD;AAED;;;;;AAIA;AAEA;;;;;;;;AAQA;AACE;;AACA;AACD;;AACA;AAAgF;AAC9E;;AAGA;AACD;AACE;AACF;AAAQ;AACP;AACD;AACC;AACoC;AACtC;AACE;AACD;AACC;;AACA;AAAc;AACf;AACA;AACE;AACF;AACC;AAEF;AACE;AACF;AAED;;;;;;;;;AAQA;AACE;AACA;;AAGA;AACA;;AAGA;AACD;;AACA;AACE;AACA;AACD;;AACD;AACE;AACD;;AACD;AACE;;;AAGD;AACD;;AACA;AACE;AACA;AACA;AACA;AACD;AACC;AACF;AACE;;;AAGD;;AACA;AACD;;AACA;AACE;;AACA;AACD;AACA;AACE;;AACD;AACA;AACD;;AACD;AACE;;;AAGD;AACD;AACE;AACD;AACC;AACD;AACC;;AAED;AACA;AACD;AAED;;;;;;;AAMA;AACE;AACD;AACE;AACF;AAED;;;;;;;;;;;AAUA;AACE;AACA;AACD;AAED;;;;;;;;;;;AAUA;AACE;;AACA;AAAyD;AAC1D;AACA;AACA;AACE;;AACD;AACD;AAED;;;;;;;AAMA;AACE;AACA;AACD;;AAED;AACE;AACD;AACA;AAFQ;AAIR;AAEA;AAAE;AAAc;AAAiB;AAAuB;AAAW;AAAa;AAA/E;AAA4F;AAC9F;AAEA;AAEA;;;;;;AAMA;AACE;AAED;AAEA;AACA;AAAK;AACN;AACC;AAAE;AAAD;AAAY;AACd;AACA;AACA;AAAC;AACC;AACA;AACA;;AAGA;AACD;AACA;AAFmB;;AAMlB;AAGA;AACA;AACA;;AACA;AAAA;;AAGA;AACD;AACE;AAGD;;;AACA;AACD;AACA;;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAUA;AACE;AACA;AACD;;;AAGD;AAAA;AAAA;AAAA;AAAA;;;AAKA;;AACA;AACE;AACA;AACA;AAED;AACA;AACA;AACA;AAGD;;;AACA;AACE;AACD;AACA;AACE;;AACD;;AACA;AACD;AACA;AACA;AACE;AACF;AACA;AACA;AACE;AACF;AAAA;;AAEA;AACE;AAAA;;AACA;AACD;AACA;AACE;AACD;;AACD;AACE;AAED;AACA;AAEA;AACA;AAGA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAGA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAAY;AAAF;AAEV;AAGA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AACC;AACD;AACC;;AACD;AACD;;;AAED;AACE;;AACA;AACD;AACE;AACA;AACA;AACA;AACD;AACA;AACA;;AACA;AACE;AACD;AACA;AACE;;AACD;AACD;AACE;AACA;AACA;AACA;AACD;AACC;;AACD;AACD;AACE;AACA;AACA;AACA;AACD;AACC;AACF;AACC;AACF;AACC;AACD;AACC;;AACD;AACD;AACC;;AACD;AACD;;AAED;AACE;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAQA;;AAGA;AACD;AAEA;;AACA;AAEA;;AACA;AACE;AACD;AACC;AAGD;;;AACA;AACD;AACE;AAAA;;AACA;AACD;AACA;AACA;AAHoD;AAKpD;AACA;AACA;AACE;AACA;AACA;AACA;AAAA;;AAEA;AACA;AACD;AACC;AACF;AACA;AAEA;;AACA;AACE;AACA;AACD;AACC;;AACD;AACA;AACD;AACC;AAGD;;;AACA;AACD;AAAA;AAAA;AAAA;AAGA;AACA;;AACA;AACE;AACD;;AAGD;;AACA;AACE;AACA;AACD;AACE;AACF;;AACD;;AAGA;AACE;AACA;AAEA;;AACA;AACD;AAAA;AAAA;AACA;;AACA;AACE;AACA;AACA;AACD;AACE;AACF;;;AAED;AAAqH;AAArH;AACE;AACF;AACC;AACA;AACD;AACA;AAAA;AAAA;;AACA;AACE;AACA;AACA;AACA;AACD;AACE;AACF;AACC;AACF;AACC;AACA;AACD;AAAA;AAAA;;AACA;AACE;AACD;AACE;AACF;AAED;;;AACA;AACE;AACD;AACC;AACF;;AACD;AACE;AAGD;AACA;AACA;AACA;AACA;;;AACA;AACD;AACA;AACE;AACA;AACA;AACA;AACA;AACA;AACA;AAPY;AAWd;;AACA;;AACA;AACE;AACA;AACA;AACD;AAGD;AACA;AACA;;;AACA;;AACA;AACE;AAAA;AAAA;AAAA;AACA;;AACA;AACD;AAEA;;AACA;AACE;AAAQ;AAAQ;AAAS;AAAS;AAAS;AAAS;AACrD;AACA;;AACC;AACD;AACE;AACA;AACD;;AACD;AATD;AAWE;;AACD;AACD;AAGD;;;AACA;AACE;;AACA;AACD;AACA;AACE;;AACD;AACD;;AACA;AACE;AACD;AACA;AACA;AACA;AACE;AACA;AACA;AACA;;AACA;AAAmF;AAAnF;;AACA;AAA+F;AAA/F;;AACA;AAEA;AACA;AACA;;AACA;AAEA;;AACA;AACA;AACA;AACA;AACD;AACC;AACA;AACA;AACA;AACA;AACA;AACA;AACD;;;AAED;AAGE;AACA;AAEA;AACA;AACF;AACE;AACF;AACC;AACA;AACA;AACA;AACA;AACD;AACC;;AACD;AACD;AACA;AACA;AACE;;AACD;AACD;AACE;;AACD;;AACA;AACD;AACA;AACE;AACF;AACA;AACA;AACE;AACF;AACA;AACE;;;AAED;AACD;AACA;AACA;AACE;AACD;AACA;AACE;AACF;;;AAED;AACA;;AAEA;AACA;;AACA;AACE;AACA;AACD;AACA;AACE;;AACD;AACD;AACC;AACA;AACA;AACA;AACD;;AACA;AACE;AACA;AACA;AACA;AACA;AACA;AACA;AACD;AACC;;AACD;AACD;;;AAED;AACA;AACE;AACF;;;AAGD;AACE;;AACA;AACD;AACE;AACD;AACC;AACA;;AACA;AAAkN;AAAlN;AACD;AACC;;AACD;AACD;AACE;AACA;AACA;AACD;AAA+F;AAA/F;AACE;AACF;AACC;AACD;AACC;AAED;AACA;;;AACA;AACD;AACC;;;AAGD;AACD;AAGA;;AACA;AACE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARc;;AAYhB;;AAGA;AACE;AACA;AACD;AAGD;AACA;;;AACA;AACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA;AACD;;AACA;AACE;AAAQ;AAAS;AAAS;AAC3B;AACA;AACA;AACA;;AACC;AAAU;AAAU;AAAS;AAAS;AAAS;AAChD;AACA;AACA;AACA;AACA;;AACC;AACD;AACA;AACA;AACA;AACA;AACE;;AACA;AACD;AACA;AACA;AACE;AACF;AACA;AACA;AACA;;AACA;AACE;AAAS;AAAS;AAAS;AAAS;AAAU;AAAU;AAAU;AACnE;AACA;AACA;AACA;;AACC;AACD;AACA;AACA;AACA;;AACA;AACE;AAEA;;AACA;AACD;AACA;AACE;AACF;;;AAED;AACA;;AACC;AACD;AACA;AAzBD;AA2BE;AACF;AACE;AACA;AACA;AACD;;AACD;AACA;;AAEA;AACE;AACD;;;AAED;AACE;AACF;;AACD;AACE;AACA;AACA;AACD;;;AAED;;AACC;AACD;AACA;;AAEA;AACE;AACA;AACD;;;AAED;AACE;AACA;AACD;AACA;AACE;;AACD;;AAEA;AAA4G;AAA5G;AAEA;;;AACA;AACD;;AAEA;AAAqH;AAArH;;AACA;AACE;AACA;AACD;;AACD;AACE;AAED;;;AACA;;AACA;AACD;AAEA;;AACA;AACE;AACD;;;AAED;AAAqI;AAArI;;AACA;AACE;AACA;AACD;;AACD;AACE;;;AAED;AACD;;;AAED;AACE;AACD;;;AAED;AACE;AACA;AACD;AACC;AACA;AACD;AACC;AACA;AACD;;;AAED;AAjJD;AAmJE;AAED;;;AACA;AACD;;;AAGD;AACE;;AACA;AACD;AACA;AACE;;AACD;AACD;AACE;AACA;AACD;;;AAED;AACE;AACA;;AACA;AACD;;AAEA;AACE;AACD;AAED;AACA;;;AACA;AACE;AACD;;AACA;AACE;AACA;AACD;AACC;AACF;AACA;AACE;AACF;;;AAED;AACE;AACD;;AACD;AACE;;AACD;AACD;AACC;AACA;;AACA;AACD;;AAEA;AACE;AACD;AAED;;;AACA;AACE;AACD;;AACA;AACE;AACA;AACD;AACC;AACF;AACA;AACE;AACF;AAED;AACA;;;AACA;AACE;AACD;;AACD;AACE;;AACD;AACD;;;AAED;AACE;;AACD;AACD;;;AAGD;AACE;;AACA;AACD;AACE;AACF;AACE;AACF;AAGD;AACA;;;AACA;AACE;AAAA;;AACA;AACD;AACA;AACA;AACA;AACE;AACD;AACE;AACF;AACC;AACD;AACE;AACF;AACC;;AACD;AACD;;;AAGD;AACE;AACA;AACA;AACA;;AAEA;AACD;AACE;;;AAED;AACA;AACD;AACC;AACF;;AAED;AACA;AACE;;AAED;AACD;AACA;AACE;AACF;AACA;AAAA;AAAA;AAIA;AACE;AACA;AACA;AACD;AACE;AACA;AACA;AACA;AACD;;AACD;AACE;AAX6C;AAchD;AACE;AACA;AAFU;AAIV;;;AAGD;AACD;AACE;AACD;AACC;AACF;AAEA;AACA;AAAK;AACN;;AAEA;AACC;AAEA;;AAEA;AACC;AACA;;AAED;AACA;AAEA;AAllOoyB;AAmlOpyB;AACD;;;;;;;;;;;;ACrlOD;;;;;;;;;;;AAYA;AACI;AACA;AACA;AACH","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _alert:null,\n        _btnOK:null,\n        _btnCancel:null,\n        _title:null,\n        _content:null,\n        _onok:null,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        if(cc.vv == null){\n            return;\n        }\n        this._alert = cc.find(\"Canvas/alert\");\n        this._title = cc.find(\"Canvas/alert/title\").getComponent(cc.Label);\n        this._content = cc.find(\"Canvas/alert/content\").getComponent(cc.Label);\n        \n        this._btnOK = cc.find(\"Canvas/alert/btn_ok\");\n        this._btnCancel = cc.find(\"Canvas/alert/btn_cancel\");\n        \n        cc.vv.utils.addClickEvent(this._btnOK,this.node,\"Alert\",\"onBtnClicked\");\n        cc.vv.utils.addClickEvent(this._btnCancel,this.node,\"Alert\",\"onBtnClicked\");\n        \n        this._alert.active = false;\n        cc.vv.alert = this;\n    },\n    \n    onBtnClicked:function(event){\n        if(event.target.name == \"btn_ok\"){\n            if(this._onok){\n                this._onok();\n            }\n        }\n        this._alert.active = false;\n        this._onok = null;\n    },\n    \n    show:function(title,content,onok,needcancel){\n        this._alert.active = true;\n        this._onok = onok;\n        this._title.string = title;\n        this._content.string = content;\n        if(needcancel){\n            this._btnCancel.active = true;\n            this._btnOK.x = -150;\n            this._btnCancel.x = 150;\n        }\n        else{\n            this._btnCancel.active = false;\n            this._btnOK.x = 0;\n        }\n    },\n    \n    onDestory:function(){\n        if(cc.vv){\n            cc.vv.alert = null;    \n        }\n    }\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _isCapturing:false,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n    \n    init:function(){\n        this.ANDROID_API = \"com/vivigames/scmj/WXAPI\";\n        this.IOS_API = \"AppController\";\n    },\n    \n    login:function(){\n\n        //注释掉所有的调原声的\n        // if(cc.sys.os == cc.sys.OS_ANDROID){ \n        //     jsb.reflection.callStaticMethod(this.ANDROID_API, \"Login\", \"()V\");\n        // }\n        // else if(cc.sys.os == cc.sys.OS_IOS){\n        //     jsb.reflection.callStaticMethod(this.IOS_API, \"login\");\n        // }\n        // else{\n        //     console.log(\"platform:\" + cc.sys.os + \" dosn't implement share.\");\n        // }\n    },\n    \n    share:function(title,desc){\n        // if(cc.sys.os == cc.sys.OS_ANDROID){\n        //     jsb.reflection.callStaticMethod(this.ANDROID_API, \"Share\", \"(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V\",cc.vv.SI.appweb,title,desc);\n        // }\n        // else if(cc.sys.os == cc.sys.OS_IOS){\n        //     jsb.reflection.callStaticMethod(this.IOS_API, \"share:shareTitle:shareDesc:\",cc.vv.SI.appweb,title,desc);\n        // }\n        // else{\n        //     console.log(\"platform:\" + cc.sys.os + \" dosn't implement share.\");\n        // }\n    },\n    \n    shareResult:function(){\n        if(this._isCapturing){\n            return;\n        }\n        this._isCapturing = true;\n        var size = cc.director.getWinSize();\n        var currentDate = new Date();\n        var fileName = \"result_share.jpg\";\n        var fullPath = jsb.fileUtils.getWritablePath() + fileName;\n        if(jsb.fileUtils.isFileExist(fullPath)){\n            jsb.fileUtils.removeFile(fullPath);\n        }\n        var texture = new cc.RenderTexture(Math.floor(size.width), Math.floor(size.height));\n        texture.setPosition(cc.p(size.width/2, size.height/2));\n        texture.begin();\n        cc.director.getRunningScene().visit();\n        texture.end();\n        texture.saveToFile(fileName, cc.IMAGE_FORMAT_JPG);\n        \n        var self = this;\n        var tryTimes = 0;\n        var fn = function(){\n            if(jsb.fileUtils.isFileExist(fullPath)){\n                var height = 100;\n                var scale = height/size.height;\n\t\t\t    var width = Math.floor(size.width * scale);\n                \n                // if(cc.sys.os == cc.sys.OS_ANDROID){\n                //     jsb.reflection.callStaticMethod(self.ANDROID_API, \"ShareIMG\", \"(Ljava/lang/String;II)V\",fullPath,width,height);\n                // }\n                // else if(cc.sys.os == cc.sys.OS_IOS){\n                //     jsb.reflection.callStaticMethod(self.IOS_API, \"shareIMG:width:height:\",fullPath,width,height);\n                // }\n                // else{\n                //     console.log(\"platform:\" + cc.sys.os + \" dosn't implement share.\");\n                // }\n                self._isCapturing = false;\n            }\n            else{\n                tryTimes++;\n                if(tryTimes > 10){\n                    console.log(\"time out...\");\n                    return;\n                }\n                setTimeout(fn,50); \n            }\n        }\n        setTimeout(fn,50);\n    },\n    \n    onLoginResp:function(code){\n        // var fn = function(ret){\n        //     if(ret.errcode == 0){\n        //         cc.sys.localStorage.setItem(\"wx_account\",ret.account);\n        //         cc.sys.localStorage.setItem(\"wx_sign\",ret.sign);\n        //     }\n        //     cc.vv.userMgr.onAuth(ret);\n        // }\n        // cc.vv.http.sendRequest(\"/wechat_auth\",{code:code,os:cc.sys.os},fn);\n    },\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        bgmVolume:1.0,\n        sfxVolume:1.0,\n        \n        bgmAudioID:-1,\n    },\n\n    // use this for initialization\n    init: function () {\n        var t = cc.sys.localStorage.getItem(\"bgmVolume\");\n        if(t != null){\n            this.bgmVolume = parseFloat(t);    \n        }\n        \n        var t = cc.sys.localStorage.getItem(\"sfxVolume\");\n        if(t != null){\n            this.sfxVolume = parseFloat(t);    \n        }\n        \n        cc.game.on(cc.game.EVENT_HIDE, function () {\n            console.log(\"cc.audioEngine.pauseAll\");\n            cc.audioEngine.pauseAll();\n        });\n        cc.game.on(cc.game.EVENT_SHOW, function () {\n            console.log(\"cc.audioEngine.resumeAll\");\n            cc.audioEngine.resumeAll();\n        });\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n    \n    getUrl:function(url){\n        return cc.url.raw(\"resources/sounds/\" + url);\n    },\n    \n    playBGM(url){\n        var audioUrl = this.getUrl(url);\n        console.log(audioUrl);\n        if(this.bgmAudioID >= 0){\n            cc.audioEngine.stop(this.bgmAudioID);\n        }\n\n        cc.assetManager.loadRemote(audioUrl, function (err, clip) {\n            this.bgmAudioID = cc.audioEngine.play(clip, true, this.bgmVolume);\n        }.bind(this));\n    },\n    \n    playSFX(url){\n        var audioUrl = this.getUrl(url);\n        if(this.sfxVolume > 0){\n            cc.assetManager.loadRemote(audioUrl, function (err, clip) {\n                var audioId = cc.audioEngine.play(clip, false, this.sfxVolume);\n            }.bind(this));\n        }\n    },\n    \n    setSFXVolume:function(v){\n        if(this.sfxVolume != v){\n            cc.sys.localStorage.setItem(\"sfxVolume\",v);\n            this.sfxVolume = v;\n        }\n    },\n    \n    setBGMVolume:function(v,force){\n        if(this.bgmAudioID >= 0){\n            if(v > 0){\n                cc.audioEngine.resume(this.bgmAudioID);\n            }\n            else{\n                cc.audioEngine.pause(this.bgmAudioID);\n            }\n            //cc.audioEngine.setVolume(this.bgmAudioID,this.bgmVolume);\n        }\n        if(this.bgmVolume != v || force){\n            cc.sys.localStorage.setItem(\"bgmVolume\",v);\n            this.bgmVolume = v;\n            cc.audioEngine.setVolume(this.bgmAudioID,v);\n        }\n    },\n    \n    pauseAll:function(){\n        cc.audioEngine.pauseAll();\n    },\n    \n    resumeAll:function(){\n        cc.audioEngine.resumeAll();\n    }\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _chatRoot:null,\n        _tabQuick:null,\n        _tabEmoji:null,\n        _iptChat:null,\n        \n        _quickChatInfo:null,\n        _btnChat:null,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        if(cc.vv == null){\n            return;\n        }\n        \n        cc.vv.chat = this;\n        \n        this._btnChat = this.node.getChildByName(\"btn_chat\");\n        this._btnChat.active = cc.vv.replayMgr.isReplay() == false;\n        \n        this._chatRoot = this.node.getChildByName(\"chat\");\n        this._chatRoot.active = false;\n        \n        this._tabQuick = this._chatRoot.getChildByName(\"quickchatlist\");\n        this._tabEmoji = this._chatRoot.getChildByName(\"emojis\");\n        \n        this._iptChat = this._chatRoot.getChildByName(\"iptChat\").getComponent(cc.EditBox);\n        \n        \n        this._quickChatInfo = {};\n        this._quickChatInfo[\"item0\"] = {index:0,content:\"快点啊，都等到我花儿都谢谢了！\",sound:\"fix_msg_1.mp3\"};\n        this._quickChatInfo[\"item1\"] = {index:1,content:\"怎么又断线了，网络怎么这么差啊！\",sound:\"fix_msg_2.mp3\"};\n        this._quickChatInfo[\"item2\"] = {index:2,content:\"不要走，决战到天亮！\",sound:\"fix_msg_3.mp3\"};\n        this._quickChatInfo[\"item3\"] = {index:3,content:\"你的牌打得也太好了！\",sound:\"fix_msg_4.mp3\"};\n        this._quickChatInfo[\"item4\"] = {index:4,content:\"你是妹妹还是哥哥啊？\",sound:\"fix_msg_5.mp3\"};\n        this._quickChatInfo[\"item5\"] = {index:5,content:\"和你合作真是太愉快了！\",sound:\"fix_msg_6.mp3\"};\n        this._quickChatInfo[\"item6\"] = {index:6,content:\"大家好，很高兴见到各位！\",sound:\"fix_msg_7.mp3\"};\n        this._quickChatInfo[\"item7\"] = {index:7,content:\"各位，真是不好意思，我得离开一会儿。\",sound:\"fix_msg_8.mp3\"};\n        this._quickChatInfo[\"item8\"] = {index:8,content:\"不要吵了，专心玩游戏吧！\",sound:\"fix_msg_9.mp3\"};\n    },\n    \n    getQuickChatInfo(index){\n        var key = \"item\" + index;\n        return this._quickChatInfo[key];   \n    },\n    \n    onBtnChatClicked:function(){\n        this._chatRoot.active = true;\n    },\n    \n    onBgClicked:function(){\n        this._chatRoot.active = false;\n    },\n    \n    onTabClicked:function(event){\n        if(event.target.name == \"tabQuick\"){\n            this._tabQuick.active = true;\n            this._tabEmoji.active = false;\n        }\n        else if(event.target.name == \"tabEmoji\"){\n            this._tabQuick.active = false;\n            this._tabEmoji.active = true;\n        }\n    },\n    \n    onQuickChatItemClicked:function(event){\n        this._chatRoot.active = false;\n        var info = this._quickChatInfo[event.target.name];\n        cc.vv.net.send(\"quick_chat\",info.index); \n    },\n    \n    onEmojiItemClicked:function(event){\n        console.log(event.target.name);\n        this._chatRoot.active = false;\n        cc.vv.net.send(\"emoji\",event.target.name);\n    },\n    \n    onBtnSendChatClicked:function(){\n        this._chatRoot.active = false;\n        if(this._iptChat.string == \"\"){\n            return;\n        }\n        cc.vv.net.send(\"chat\",this._iptChat.string);\n        this._iptChat.string = \"\";\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        target:cc.Node,\n        sprite:cc.SpriteFrame,\n        checkedSprite:cc.SpriteFrame,\n        checked:false,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        this.refresh();\n    },\n    \n    onClicked:function(){\n        this.checked = !this.checked;\n        this.refresh();\n    },\n    \n    refresh:function(){\n        var targetSprite = this.target.getComponent(cc.Sprite);\n        if(this.checked){\n            targetSprite.spriteFrame = this.checkedSprite;\n        }\n        else{\n            targetSprite.spriteFrame = this.sprite;\n        }\n    }\n    \n    \n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        inputName:cc.EditBox,\n        editBoxName:cc.EditBox,\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        \n    },\n    \n    onRandomBtnClicked:function(){\n        var names = [\n            \"上官\",\n            \"欧阳\",\n            \"东方\",\n            \"端木\",\n            \"独孤\",\n            \"司马\",\n            \"南宫\",\n            \"夏侯\",\n            \"诸葛\",\n            \"皇甫\",\n            \"长孙\",\n            \"宇文\",\n            \"轩辕\",\n            \"东郭\",\n            \"子车\",\n            \"东阳\",\n            \"子言\",\n        ];\n        \n        var names2 = [\n            \"雀圣\",\n            \"赌侠\",\n            \"赌圣\",\n            \"稳赢\",\n            \"不输\",\n            \"好运\",\n            \"自摸\",\n            \"有钱\",\n            \"土豪\",\n        ];\n        var idx = Math.floor(Math.random() * (names.length - 1));\n        var idx2 = Math.floor(Math.random() * (names2.length - 1));\n        let nm = names[idx] + names2[idx2];\n\n        this.editBoxName.string = nm;\n        this.editBoxName.textLabel.string = nm;\n\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        if(!cc.sys.isNative && cc.sys.isMobile){\n            var cvs = this.node.getComponent(cc.Canvas);\n            cvs.fitHeight = true;\n            cvs.fitWidth = true;\n        }\n        //this.onRandomBtnClicked();\n    },\n\n    onBtnConfirmClicked:function(){\n        var name = this.editBoxName.string;\n        if(name == \"\"){\n            console.log(\"invalid name.\");\n            return;\n        }\n        console.log(name);\n        cc.vv.userMgr.create(name);\n    },\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _difenxuanze:null,\n        _zimo:null,\n        _wanfaxuanze:null,\n        _zuidafanshu:null,\n        _jushuxuanze:null,\n        _dianganghua:null,\n        _leixingxuanze:null,\n        lblCreateGameRoom: cc.Label,\n        lbl4Games: cc.Label,\n        lbl8Games: cc.Label,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        this.lblCreateGameRoom.node.color = new cc.Color().fromHEX(\"#A82121\");\n        this.lblCreateGameRoom.enableBold = true;\n        this.lbl4Games.string = \"4 Games\";\n        this.lbl8Games.string = \"8 Games\";\n\n        //得到3种玩法\n        this._leixingxuanze = [];\n        var t = this.node.getChildByName(\"leixingxuanze\");\n        for(var i = 0; i < t.childrenCount; ++i){\n            var n = t.children[i].getComponent(\"RadioButton\");\n            if(n != null){\n                this._leixingxuanze.push(n);\n            }\n        }\n        //得分选择不知道在哪里用到了\n        this._difenxuanze = [];\n        var t = this.node.getChildByName(\"difenxuanze\");\n        for(var i = 0; i < t.childrenCount; ++i){\n            var n = t.children[i].getComponent(\"RadioButton\");\n            if(n != null){\n                this._difenxuanze.push(n);\n            }\n        }\n        //console.log(this._difenxuanze);\n        \n        this._zimo = [];\n        var t = this.node.getChildByName(\"zimojiacheng\");\n        for(var i = 0; i < t.childrenCount; ++i){\n            var n = t.children[i].getComponent(\"RadioButton\");\n            if(n != null){\n                this._zimo.push(n);\n            }\n        }\n        //console.log(this._zimo);\n        \n        this._wanfaxuanze = [];\n        var t = this.node.getChildByName(\"wanfaxuanze\");\n        for(var i = 0; i < t.childrenCount; ++i){\n            var n = t.children[i].getComponent(\"CheckBox\");\n            if(n != null){\n                this._wanfaxuanze.push(n);\n            }\n        }\n        //console.log(this._wanfaxuanze);\n        \n        this._zuidafanshu = [];\n        var t = this.node.getChildByName(\"zuidafanshu\");\n        for(var i = 0; i < t.childrenCount; ++i){\n            var n = t.children[i].getComponent(\"RadioButton\");\n            if(n != null){\n                this._zuidafanshu.push(n);\n            }\n        }\n        //console.log(this._zuidafanshu);\n        \n        this._jushuxuanze = [];\n        var t = this.node.getChildByName(\"xuanzejushu\");\n        for(var i = 0; i < t.childrenCount; ++i){\n            var n = t.children[i].getComponent(\"RadioButton\");\n            if(n != null){\n                this._jushuxuanze.push(n);\n            }\n        }\n        \n        this._dianganghua = [];\n        var t = this.node.getChildByName(\"dianganghua\");\n        for(var i = 0; i < t.childrenCount; ++i){\n            var n = t.children[i].getComponent(\"RadioButton\");\n            if(n != null){\n                this._dianganghua.push(n);\n            }\n        }\n        //console.log(this._jushuxuanze);\n    },\n    //onlode方法一直到这里\n    onBtnBack:function(){\n        this.node.active = false;\n    },\n    \n    onBtnOK:function(){\n        this.node.active = false;\n        this.createRoom();\n    },\n   //创建房间的方法 \n    createRoom:function(){\n        var self = this;\n        var onCreate = function(ret){\n            if(ret.errcode !== 0){\n                cc.vv.wc.hide();\n                //console.log(ret.errmsg);\n                if(ret.errcode == 2222){\n                    cc.vv.alert.show(\"提示\",\"房卡不足，创建房间失败!\");  \n                }\n                else{\n                    cc.vv.alert.show(\"提示\",\"创建房间失败,错误码:\" + ret.errcode);\n                }\n            }\n            else{\n                //ret是包装的用户信息这是已经Roommgr服务返回ret\n                cc.vv.gameNetMgr.connectGameServer(ret);\n            }\n        };\n        //底分是0\n        var difen = 0;\n        for(var i = 0; i < self._difenxuanze.length; ++i){\n            if(self._difenxuanze[i].checked){\n                difen = i;\n                break;\n            }\n        }\n        //自摸加底，自摸加翻\n        var zimo = 0;\n        for(var i = 0; i < self._zimo.length; ++i){\n            if(self._zimo[i].checked){\n                zimo = i;\n                break;\n            }     \n        }\n       //胡牌规则\n        var huansanzhang = self._wanfaxuanze[0].checked;        \n        var jiangdui = self._wanfaxuanze[1].checked;\n        var menqing = self._wanfaxuanze[2].checked;\n        var tiandihu = self._wanfaxuanze[3].checked;\n        \n        var type = 0;\n        //选择麻将规则血战到底和血流成河\n        for(var i = 0; i < self._leixingxuanze.length; ++i){\n            if(self._leixingxuanze[i].checked){\n                type = i;\n                break;\n            }     \n        }\n        \n        if(type == 0){\n            type = \"xzdd\";\n        }\n        // else {\n        //     type = \"xlch\";\n        // }\n        else if(type == 1){\n            type = \"xlch\";\n        }\n        else {\n            type = \"rzmj\";\n        }\n        //最大翻数\n        var zuidafanshu = 0;\n        for(var i = 0; i < self._zuidafanshu.length; ++i){\n            if(self._zuidafanshu[i].checked){\n                zuidafanshu = i;\n                break;\n            }     \n        }\n        \n        //局数选择\n        var jushuxuanze = 0;\n        for(var i = 0; i < self._jushuxuanze.length; ++i){\n            if(self._jushuxuanze[i].checked){\n                jushuxuanze = i;\n                break;\n            }     \n        }\n        //点杠花连个模式\n        var dianganghua = 0;\n        for(var i = 0; i < self._dianganghua.length; ++i){\n            if(self._dianganghua[i].checked){\n                dianganghua = i;\n                break;\n            }     \n        }\n        //他们用conf记录\n        if(type!='rzmj'){\n             \n            var conf = {\n            type:type,\n            difen:difen,\n            zimo:zimo,\n            jiangdui:jiangdui,\n            huansanzhang:huansanzhang,\n            zuidafanshu:zuidafanshu,\n            jushuxuanze:jushuxuanze,\n            dianganghua:dianganghua,\n            menqing:menqing,\n            tiandihu:tiandihu,   \n            }; \n        }\n        else{\n            var conf={\n                type:type,\n                difen:difen,            \n                jushuxuanze:jushuxuanze,\n                zuidafanshu:zuidafanshu,\n            };\n        }\n       \n        //date 记录数据和类型\n        var data = {\n            //用户玩家\n            account:cc.vv.userMgr.account,\n            //类型\n            sign:cc.vv.userMgr.sign,\n            //选择的玩法类型\n            conf:JSON.stringify(conf)\n        };\n        console.log(data);\n        cc.vv.wc.show(\"正在创建房间\");\n        //一直到这里还是http请求，大厅服务器的client_server.js发消息，然后回调onCreat函数，通过服务消息gameNetMgr转发scoket服务\n        cc.vv.http.sendRequest(\"/create_private_room\",data,onCreate);   \n    }\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        queYiMen:null,\n        tips:[],\n        selected:[],\n        dingques:[],\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        if(cc.vv == null){\n            return;\n        }\n        this.initView();\n      //  console.log('你好'+cc.vv.gameNetMgr.conf.type);\n        this.initDingQue();\n        this.initEventHandlers();\n    },\n    \n    initView:function(){\n        var gameChild = this.node.getChildByName(\"game\");\n        this.queYiMen = gameChild.getChildByName(\"dingque\");\n\n        \n        \n        this.queYiMen.active = cc.vv.gameNetMgr.isDingQueing;\n     \n        \n\n        var arr = [\"myself\",\"right\",\"up\",\"left\"];\n        for(var i = 0; i < arr.length; ++i){\n            var side = gameChild.getChildByName(arr[i]);\n            var seat = side.getChildByName(\"seat\");\n            var dingque = seat.getChildByName(\"que\");\n            this.dingques.push(dingque);\n        }\n        this.reset();\n        \n        var tips = this.queYiMen.getChildByName(\"tips\");\n        for(var i = 0; i < tips.childrenCount; ++i){\n            var n = tips.children[i];\n            this.tips.push(n.getComponent(cc.Label));\n        }\n        \n        if(cc.vv.gameNetMgr.gamestate == \"dingque\"){\n            this.showDingQueChoice();\n        }\n    },\n    \n    initEventHandlers:function(){\n        var self = this;\n        this.node.on('game_dingque',function(data){\n            self.showDingQueChoice();\n        });\n        \n        this.node.on('game_dingque_notify',function(data){\n            var seatIndex = cc.vv.gameNetMgr.getSeatIndexByID(data);\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatIndex);\n            console.log(\"game_dingque_notify:\" + localIndex);\n            self.tips[localIndex].node.active = true;\n        });\n        \n        this.node.on('game_dingque_finish',function(){\n            //通知每一个玩家定缺的花色\n            self.queYiMen.active = false;\n            cc.vv.gameNetMgr.isDingQueing = false;\n            self.initDingQue();\n        });\n    },\n    \n    showDingQueChoice:function(){\n        this.queYiMen.active = true;\n        var sd = cc.vv.gameNetMgr.getSelfData();\n        var typeCounts = [0,0,0];\n        for(var i = 0; i < sd.holds.length; ++i){\n            var pai = sd.holds[i];\n            var type = cc.vv.mahjongmgr.getMahjongType(pai);\n            typeCounts[type]++;\n        }\n        \n        var min = 65535;\n        var minIndex = 0;\n        for(var i = 0; i < typeCounts.length; ++i){\n            if(typeCounts[i] < min){\n                min = typeCounts[i];\n                minIndex = i;\n            }\n        }\n        \n        var arr = [\"tong\",\"tiao\",\"wan\"];\n        for(var i = 0; i < arr.length; ++i){\n            var node = this.queYiMen.getChildByName(arr[i]);\n            if(minIndex == i){\n                node.getComponent(cc.Animation).play(\"dingque_tuijian\");\n            }\n            else{\n                node.getComponent(cc.Animation).stop();\n            }\n            //this.queYiMen.getChildByName(arr[i]).getChildByName('jian').active = minIndex == i;    \n        }\n        \n        this.reset();\n        for(var i = 0; i < this.tips.length; ++i){\n            var n = this.tips[i];\n            if(i > 0){\n                n.node.active = false;                \n            }\n            else{\n                n.node.active = true;\n            }\n        }\n    },\n    \n    initDingQue:function(){\n        var arr = [\"tong\",\"tiao\",\"wan\"];\n        var data = cc.vv.gameNetMgr.seats;\n        for(var i = 0; i < data.length; ++i){\n            var que = data[i].dingque;\n            if(que == null || que < 0 || que >= arr.length){\n                que = null;\n            }\n            else{\n                que = arr[que]; \n            }\n            \n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(i);\n            if(que){\n                this.dingques[localIndex].getChildByName(que).active = true;    \n            }\n        }\n    },\n    \n    reset:function(){\n        this.setInteractable(true);\n        \n        this.selected.push(this.queYiMen.getChildByName(\"tong_selected\"));\n        this.selected.push(this.queYiMen.getChildByName(\"tiao_selected\"));\n        this.selected.push(this.queYiMen.getChildByName(\"wan_selected\"));\n        for(var i = 0; i < this.selected.length; ++i){\n            this.selected[i].active = false;\n        }        \n        \n        for(var i = 0; i < this.dingques.length; ++i){\n            for(var j = 0; j < this.dingques[i].children.length; ++j){\n                this.dingques[i].children[j].active = false;    \n            }\n        }\n    },\n    \n    onQueYiMenClicked:function(event){\n        var type = 0;\n        if(event.target.name == \"tong\"){\n            type = 0;\n        }\n        else if(event.target.name == \"tiao\"){\n            type = 1;\n        }\n        else if(event.target.name == \"wan\"){\n            type = 2;\n        }\n        \n        for(var i = 0; i < this.selected.length; ++i){\n            this.selected[i].active = false;\n        }  \n        this.selected[type].active = true;\n        cc.vv.gameNetMgr.dingque = type;\n        //向socket服务器发送 定缺消息说我自己缺哪一门\n        cc.vv.net.send(\"dingque\",type);\n        \n        //this.setInteractable(false);\n    },\n    \n    setInteractable:function(value){\n        this.queYiMen.getChildByName(\"tong\").getComponent(cc.Button).interactable = value;\n        this.queYiMen.getChildByName(\"tiao\").getComponent(cc.Button).interactable = value;\n        this.queYiMen.getChildByName(\"wan\").getComponent(cc.Button).interactable = value;        \n    }\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _folds:null,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        if(cc.vv == null){\n            return;\n        }\n        \n        this.initView();\n        this.initEventHandler();\n        \n        this.initAllFolds();\n    },\n    \n    initView:function(){\n        this._folds = {};\n        var game = this.node.getChildByName(\"game\");\n        var sides = [\"myself\",\"right\",\"up\",\"left\"];\n        for(var i = 0; i < sides.length; ++i){\n            var sideName = sides[i];\n            var sideRoot = game.getChildByName(sideName);\n            var folds = [];\n            var foldRoot = sideRoot.getChildByName(\"folds\");\n            for(var j = 0; j < foldRoot.children.length; ++j){\n                var n = foldRoot.children[j];\n                n.active = false;\n                var sprite = n.getComponent(cc.Sprite); \n                sprite.spriteFrame = null;\n                folds.push(sprite);            \n            }\n            this._folds[sideName] = folds; \n        }\n        \n        this.hideAllFolds();\n    },\n    \n    hideAllFolds:function(){\n        for(var k in this._folds){\n            var f = this._folds[i];\n            for(var i in f){\n                f[i].node.active = false;\n            }\n        }\n    },\n    \n    initEventHandler:function(){\n        var self = this;\n        this.node.on('game_begin',function(data){\n            self.initAllFolds();\n        });  \n        \n        this.node.on('game_sync',function(data){\n            self.initAllFolds();\n        });\n        \n        this.node.on('game_chupai_notify',function(data){\n            self.initFolds(data.seatData);\n        });\n        \n        this.node.on('guo_notify',function(data){\n            self.initFolds(data);\n        });\n    },\n    \n    initAllFolds:function(){\n        var seats = cc.vv.gameNetMgr.seats;\n        for(var i in seats){\n            this.initFolds(seats[i]);\n        }\n    },\n    \n    initFolds:function(seatData){\n        var folds = seatData.folds;\n        if(folds == null){\n            return;\n        }\n        var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatData.seatindex);\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\n        \n        var foldsSprites = this._folds[side];\n        for(var i = 0; i < foldsSprites.length; ++i){\n            var index = i;\n            if(side == \"right\" || side == \"up\"){\n                index = foldsSprites.length - i - 1;\n            }\n            var sprite = foldsSprites[index];\n            sprite.node.active = true;\n            this.setSpriteFrameByMJID(pre,sprite,folds[i]);\n        }\n        for(var i = folds.length; i < foldsSprites.length; ++i){\n            var index = i;\n            if(side == \"right\" || side == \"up\"){\n                index = foldsSprites.length - i - 1;\n            }\n            var sprite = foldsSprites[index];\n            \n            sprite.spriteFrame = null;\n            sprite.node.active = false;\n        }  \n    },\n    \n    setSpriteFrameByMJID:function(pre,sprite,mjid){\n        sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,mjid);\n        sprite.node.active = true;\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        dataEventHandler:null,\n        roomId:null,\n        maxNumOfGames:0,\n        numOfGames:0,\n        numOfMJ:0,\n        seatIndex:-1,\n        seats:null,\n        turn:-1,\n        button:-1,\n        dingque:-1,\n        chupai:-1,\n        isDingQueing:false,\n        isHuanSanZhang:false,\n        gamestate:\"\",\n        isOver:false,\n        dissoveData:null,\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n    },\n    \n    reset:function(){\n        this.turn = -1;\n        this.chupai = -1,\n        this.dingque = -1;\n        this.button = -1;\n        this.gamestate = \"\";\n        this.dingque = -1;\n        this.isDingQueing = false;\n        this.isHuanSanZhang = false;\n        this.curaction = null;\n        for(var i = 0; i < this.seats.length; ++i){\n            this.seats[i].holds = [];\n            this.seats[i].folds = [];\n            this.seats[i].pengs = [];\n            this.seats[i].angangs = [];\n            this.seats[i].diangangs = [];\n            this.seats[i].wangangs = [];\n            this.seats[i].dingque = -1;\n            this.seats[i].ready = false;\n            this.seats[i].hued = false;\n            this.seats[i].huanpais = null;\n            this.huanpaimethod = -1;\n        }\n    },\n    \n    clear:function(){\n        this.dataEventHandler = null;\n        if(this.isOver == null){\n            this.seats = null;\n            this.roomId = null;\n            this.maxNumOfGames = 0;\n            this.numOfGames = 0;        \n        }\n    },\n    \n    dispatchEvent(event,data){\n        if(this.dataEventHandler){\n            this.dataEventHandler.emit(event,data);\n        }    \n    },\n    \n    getSeatIndexByID:function(userId){\n        for(var i = 0; i < this.seats.length; ++i){\n            var s = this.seats[i];\n            if(s.userid == userId){\n                return i;\n            }\n        }\n        return -1;\n    },\n    \n    isOwner:function(){\n        return this.seatIndex == 0;   \n    },\n    \n    getSeatByID:function(userId){\n        var seatIndex = this.getSeatIndexByID(userId);\n        var seat = this.seats[seatIndex];\n        return seat;\n    },\n    \n    getSelfData:function(){\n        return this.seats[this.seatIndex];\n    },\n    \n    getLocalIndex:function(index){\n        var ret = (index - this.seatIndex + 4) % 4;\n        return ret;\n    },\n    \n    prepareReplay:function(roomInfo,detailOfGame){\n        this.roomId = roomInfo.id;\n        this.seats = roomInfo.seats;\n        this.turn = detailOfGame.base_info.button;\n        var baseInfo = detailOfGame.base_info;\n        for(var i = 0; i < this.seats.length; ++i){\n            var s = this.seats[i];\n            s.seatindex = i;\n            s.score = null;\n            s.holds = baseInfo.game_seats[i];\n            s.pengs = [];\n            s.angangs = [];\n            s.diangangs = [];\n            s.wangangs = [];\n            s.folds = [];\n            console.log(s);\n            if(cc.vv.userMgr.userId == s.userid){\n                this.seatIndex = i;\n            }\n        }\n        this.conf = {\n            type:baseInfo.type,\n        }\n        if(this.conf.type == null){\n            this.conf.type == \"xzdd\";\n        }\n    },\n    //得到玩法\n    getWanfa:function(){\n        var conf = this.conf;\n        if(conf && conf.maxGames!=null && conf.maxFan!=null){\n            var strArr = [];\n            strArr.push(conf.maxGames + \"Games\");\n            /*\n            strArr.push(conf.maxFan + \"番封顶\");\n            if(conf.hsz){\n                strArr.push(\"换三张\");   \n            }\n            if(conf.zimo == 1){\n                strArr.push(\"自摸加番\");\n            }\n            else{\n                strArr.push(\"自摸加底\");\n            }\n            if(conf.jiangdui){\n                strArr.push(\"将对\");   \n            }\n            if(conf.dianganghua == 1){\n                strArr.push(\"点杠花(自摸)\");   \n            }\n            else{\n                strArr.push(\"点杠花(放炮)\");\n            }\n            if(conf.menqing){\n                strArr.push(\"门清、中张\");   \n            }\n            if(conf.tiandihu){\n                strArr.push(\"天地胡\");   \n            }\n            */\n            return strArr.join(\" \");\n        }\n        return \"\";\n    },\n    \n    initHandlers:function(){\n        var self = this;\n       //接受socket服务的的信息\n        cc.vv.net.addHandler(\"login_result\",function(data){\n            console.log(data);\n            if(data.errcode === 0){\n                var data = data.data;\n                self.roomId = data.roomid;\n                self.conf = data.conf;\n                self.maxNumOfGames = data.conf.maxGames;\n                self.numOfGames = data.numofgames;\n                self.seats = data.seats;\n                self.seatIndex = self.getSeatIndexByID(cc.vv.userMgr.userId);\n                self.isOver = false;\n            }\n            else{\n                console.log(data.errmsg);   \n            }\n        });\n                \n        cc.vv.net.addHandler(\"login_finished\",function(data){\n            console.log(\"login_finished\");\n            cc.director.loadScene(\"mjgame\");\n        });\n\n        cc.vv.net.addHandler(\"exit_result\",function(data){\n            self.roomId = null;\n            self.turn = -1;\n            self.dingque = -1;\n            self.isDingQueing = false;\n            self.seats = null;\n        });\n        \n        cc.vv.net.addHandler(\"exit_notify_push\",function(data){\n           var userId = data;\n           var s = self.getSeatByID(userId);\n           if(s != null){\n               s.userid = 0;\n               s.name = \"\";\n\n               self.dispatchEvent(\"user_state_changed\",s);\n           }\n        });\n        \n        cc.vv.net.addHandler(\"dispress_push\",function(data){\n            self.roomId = null;\n            self.turn = -1;\n            self.dingque = -1;\n            self.isDingQueing = false;\n            self.seats = null;\n        });\n                \n        cc.vv.net.addHandler(\"disconnect\",function(data){\n            if(self.roomId == null){\n                cc.director.loadScene(\"hall\");\n            }\n            else{\n                if(self.isOver == false){\n                    cc.vv.userMgr.oldRoomId = self.roomId;\n                    self.dispatchEvent(\"disconnect\");                    \n                }\n                else{\n                    self.roomId = null;\n                }\n            }\n        });\n        \n        cc.vv.net.addHandler(\"new_user_comes_push\",function(data){\n            //console.log(data);\n            var seatIndex = data.seatindex;\n            if(self.seats[seatIndex].userid > 0){\n                self.seats[seatIndex].online = true;\n            }\n            else{\n                data.online = true;\n                self.seats[seatIndex] = data;\n            }\n\n         //给客户端mjroom消息\n            self.dispatchEvent('new_user',self.seats[seatIndex]);\n        });\n        \n        cc.vv.net.addHandler(\"user_state_push\",function(data){\n            //console.log(data);\n            var userId = data.userid;\n            var seat = self.getSeatByID(userId);\n            seat.online = data.online;\n            self.dispatchEvent('user_state_changed',seat);\n        });\n        \n        cc.vv.net.addHandler(\"user_ready_push\",function(data){\n            //console.log(data);\n            var userId = data.userid;\n            var seat = self.getSeatByID(userId);\n            seat.ready = data.ready;\n\n            //给mjroom发信息\n            self.dispatchEvent('user_state_changed',seat);\n        });\n        \n        cc.vv.net.addHandler(\"game_holds_push\",function(data){\n            var seat = self.seats[self.seatIndex]; \n            console.log(data);\n            seat.holds = data;\n            \n            for(var i = 0; i < self.seats.length; ++i){\n                var s = self.seats[i]; \n                if(s.folds == null){\n                    s.folds = [];\n                }\n                if(s.pengs == null){\n                    s.pengs = [];\n                }\n                if(s.angangs == null){\n                    s.angangs = [];\n                }\n                if(s.diangangs == null){\n                    s.diangangs = [];\n                }\n                if(s.wangangs == null){\n                    s.wangangs = [];\n                }\n                s.ready = false;\n            }\n        //向MJgame.js发个事件\n            self.dispatchEvent('game_holds');\n        });\n        //接受服务端请求游戏准备开始\n        cc.vv.net.addHandler(\"game_begin_push\",function(data){\n            console.log('game_action_push');\n            console.log(data);\n            self.button = data;\n            self.turn = self.button;\n            self.gamestate = \"begin\";\n            //这是给mjgame发的事件\n            self.dispatchEvent('game_begin');\n        });\n        //接受服务端请求开始\n        cc.vv.net.addHandler(\"game_playing_push\",function(data){\n            console.log('game_playing_push'); \n            self.gamestate = \"playing\"; \n\n            //这是发送给谁啊\n            self.dispatchEvent('game_playing');\n        });\n        //定却\n        cc.vv.net.addHandler(\"game_sync_push\",function(data){\n            console.log(\"game_sync_push\");\n            console.log(data);\n            self.numOfMJ = data.numofmj;\n            self.gamestate = data.state;\n            if(self.gamestate == \"dingque\"){\n                self.isDingQueing = true;\n            }\n            else if(self.gamestate == \"huanpai\"){\n                self.isHuanSanZhang = true;\n            }\n            self.turn = data.turn;\n            self.button = data.button;\n            self.chupai = data.chuPai;\n            self.huanpaimethod = data.huanpaimethod;\n            for(var i = 0; i < 4; ++i){\n                var seat = self.seats[i];\n                var sd = data.seats[i];\n                seat.holds = sd.holds;\n                seat.folds = sd.folds;\n                seat.angangs = sd.angangs;\n                seat.diangangs = sd.diangangs;\n                seat.wangangs = sd.wangangs;\n                seat.pengs = sd.pengs;\n                seat.dingque = sd.que;\n                seat.hued = sd.hued; \n                seat.iszimo = sd.iszimo;\n                seat.huinfo = sd.huinfo;\n                seat.huanpais = sd.huanpais;\n                if(i == self.seatIndex){\n                    self.dingque = sd.que;\n                }\n           }\n        });\n        //\n        cc.vv.net.addHandler(\"game_dingque_push\",function(data){\n            self.isDingQueing = true;\n            self.isHuanSanZhang = false;\n            self.dispatchEvent('game_dingque');\n            \n        });\n\n        //日照麻将的玩法\n        cc.vv.net.addHandler(\"\",function(data){\n                 \n\n        });\n        \n        //换牌\n        cc.vv.net.addHandler(\"game_huanpai_push\",function(data){\n            self.isHuanSanZhang = true;\n            self.dispatchEvent('game_huanpai');\n        });\n        //换杠\n        cc.vv.net.addHandler(\"hangang_notify_push\",function(data){\n            self.dispatchEvent('hangang_notify',data);\n        });\n        \n        cc.vv.net.addHandler(\"game_action_push\",function(data){\n            self.curaction = data;\n            console.log(data);\n            self.dispatchEvent('game_action',data);\n        });\n        //出牌\n        cc.vv.net.addHandler(\"game_chupai_push\",function(data){\n            console.log('game_chupai_push');\n            //console.log(data);\n            var turnUserID = data;\n            var si = self.getSeatIndexByID(turnUserID);\n            self.doTurnChange(si);\n        });\n        \n        cc.vv.net.addHandler(\"game_num_push\",function(data){\n            self.numOfGames = data;\n            self.dispatchEvent('game_num',data);\n        });\n\n        cc.vv.net.addHandler(\"game_over_push\",function(data){\n            console.log('game_over_push');\n            var results = data.results;\n            for(var i = 0; i <  self.seats.length; ++i){\n                self.seats[i].score = results.length == 0? 0:results[i].totalscore;\n            }\n            self.dispatchEvent('game_over',results);\n            if(data.endinfo){\n                self.isOver = true;\n                self.dispatchEvent('game_end',data.endinfo);    \n            }\n            self.reset();\n            for(var i = 0; i <  self.seats.length; ++i){\n                self.dispatchEvent('user_state_changed',self.seats[i]);    \n            }\n        });\n        \n        cc.vv.net.addHandler(\"mj_count_push\",function(data){\n            console.log('mj_count_push');\n            self.numOfMJ = data;\n            //console.log(data);\n            self.dispatchEvent('mj_count',data);\n        });\n        \n        cc.vv.net.addHandler(\"hu_push\",function(data){\n            console.log('hu_push');\n            console.log(data);\n            self.doHu(data);\n        });\n        \n        cc.vv.net.addHandler(\"game_chupai_notify_push\",function(data){\n            var userId = data.userId;\n            var pai = data.pai;\n            var si = self.getSeatIndexByID(userId);\n            self.doChupai(si,pai);\n        });\n        \n        cc.vv.net.addHandler(\"game_mopai_push\",function(data){\n            console.log('game_mopai_push');\n            self.doMopai(self.seatIndex,data);\n        });\n        \n        cc.vv.net.addHandler(\"guo_notify_push\",function(data){\n            console.log('guo_notify_push');\n            var userId = data.userId;\n            var pai = data.pai;\n            var si = self.getSeatIndexByID(userId);\n            self.doGuo(si,pai);\n        });\n        \n        cc.vv.net.addHandler(\"guo_result\",function(data){\n            console.log('guo_result');\n            self.dispatchEvent('guo_result');\n        });\n        \n        cc.vv.net.addHandler(\"guohu_push\",function(data){\n            console.log('guohu_push');\n            self.dispatchEvent(\"push_notice\",{info:\"过胡\",time:1.5});\n        });\n        \n        cc.vv.net.addHandler(\"huanpai_notify\",function(data){\n            var seat = self.getSeatByID(data.si);\n            seat.huanpais = data.huanpais;\n            self.dispatchEvent('huanpai_notify',seat);\n        });\n        \n        cc.vv.net.addHandler(\"game_huanpai_over_push\",function(data){\n            console.log('game_huanpai_over_push');\n            var info = \"\";\n            var method = data.method;\n            if(method == 0){\n                info = \"换对家牌\";\n            }\n            else if(method == 1){\n                info = \"换下家牌\";\n            }\n            else{\n                info = \"换上家牌\";\n            }\n            self.huanpaimethod = method;\n            cc.vv.gameNetMgr.isHuanSanZhang = false;\n            self.dispatchEvent(\"game_huanpai_over\");\n            self.dispatchEvent(\"push_notice\",{info:info,time:2});\n        });\n        \n        cc.vv.net.addHandler(\"peng_notify_push\",function(data){\n            console.log('peng_notify_push');\n            console.log(data);\n            var userId = data.userid;\n            var pai = data.pai;\n            var si = self.getSeatIndexByID(userId);\n            self.doPeng(si,data.pai);\n        });\n        \n        cc.vv.net.addHandler(\"gang_notify_push\",function(data){\n            console.log('gang_notify_push');\n            console.log(data);\n            var userId = data.userid;\n            var pai = data.pai;\n            var si = self.getSeatIndexByID(userId);\n            self.doGang(si,pai,data.gangtype);\n        });\n        \n        cc.vv.net.addHandler(\"game_dingque_notify_push\",function(data){\n            self.dispatchEvent('game_dingque_notify',data);\n        });\n        \n        cc.vv.net.addHandler(\"game_dingque_finish_push\",function(data){\n            for(var i = 0; i < data.length; ++i){\n                self.seats[i].dingque = data[i];\n            }\n            //这是像谁发送的\n            self.dispatchEvent('game_dingque_finish',data);\n        });\n        \n        \n        cc.vv.net.addHandler(\"chat_push\",function(data){\n            self.dispatchEvent(\"chat_push\",data);    \n        });\n        \n        cc.vv.net.addHandler(\"quick_chat_push\",function(data){\n            self.dispatchEvent(\"quick_chat_push\",data);\n        });\n        \n        cc.vv.net.addHandler(\"emoji_push\",function(data){\n            self.dispatchEvent(\"emoji_push\",data);\n        });\n        \n        cc.vv.net.addHandler(\"dissolve_notice_push\",function(data){\n            console.log(\"dissolve_notice_push\"); \n            console.log(data);\n            self.dissoveData = data;\n            self.dispatchEvent(\"dissolve_notice\",data);\n        });\n        \n        cc.vv.net.addHandler(\"dissolve_cancel_push\",function(data){\n            self.dissoveData = null;\n            self.dispatchEvent(\"dissolve_cancel\",data);\n        });\n        \n        cc.vv.net.addHandler(\"voice_msg_push\",function(data){\n            self.dispatchEvent(\"voice_msg\",data);\n        });\n    },\n    \n    doGuo:function(seatIndex,pai){\n        var seatData = this.seats[seatIndex];\n        var folds = seatData.folds;\n        folds.push(pai);\n        this.dispatchEvent('guo_notify',seatData);    \n    },\n    \n    doMopai:function(seatIndex,pai){\n        var seatData = this.seats[seatIndex];\n        if(seatData.holds){\n            seatData.holds.push(pai);\n            this.dispatchEvent('game_mopai',{seatIndex:seatIndex,pai:pai});            \n        }\n    },\n    \n    doChupai:function(seatIndex,pai){\n        this.chupai = pai;\n        var seatData = this.seats[seatIndex];\n        if(seatData.holds){             \n            var idx = seatData.holds.indexOf(pai);\n            seatData.holds.splice(idx,1);\n        }\n        this.dispatchEvent('game_chupai_notify',{seatData:seatData,pai:pai});    \n    },\n    \n    doPeng:function(seatIndex,pai){\n        var seatData = this.seats[seatIndex];\n        //移除手牌\n        if(seatData.holds){\n            for(var i = 0; i < 2; ++i){\n                var idx = seatData.holds.indexOf(pai);\n                seatData.holds.splice(idx,1);\n            }                \n        }\n            \n        //更新碰牌数据\n        var pengs = seatData.pengs;\n        pengs.push(pai);\n            \n        this.dispatchEvent('peng_notify',seatData);\n    },\n    \n    getGangType:function(seatData,pai){\n        if(seatData.pengs.indexOf(pai) != -1){\n            return \"wangang\";\n        }\n        else{\n            var cnt = 0;\n            for(var i = 0; i < seatData.holds.length; ++i){\n                if(seatData.holds[i] == pai){\n                    cnt++;\n                }\n            }\n            if(cnt == 3){\n                return \"diangang\";\n            }\n            else{\n                return \"angang\";\n            }\n        }\n    },\n    \n    doGang:function(seatIndex,pai,gangtype){\n        var seatData = this.seats[seatIndex];\n        \n        if(!gangtype){\n            gangtype = this.getGangType(seatData,pai);\n        }\n        \n        if(gangtype == \"wangang\"){\n            if(seatData.pengs.indexOf(pai) != -1){\n                var idx = seatData.pengs.indexOf(pai);\n                if(idx != -1){\n                    seatData.pengs.splice(idx,1);\n                }\n            }\n            seatData.wangangs.push(pai);      \n        }\n        if(seatData.holds){\n            for(var i = 0; i <= 4; ++i){\n                var idx = seatData.holds.indexOf(pai);\n                if(idx == -1){\n                    //如果没有找到，表示移完了，直接跳出循环\n                    break;\n                }\n                seatData.holds.splice(idx,1);\n            }\n        }\n        if(gangtype == \"angang\"){\n            seatData.angangs.push(pai);\n        }\n        else if(gangtype == \"diangang\"){\n            seatData.diangangs.push(pai);\n        }\n        this.dispatchEvent('gang_notify',{seatData:seatData,gangtype:gangtype});\n    },\n    \n    doHu:function(data){\n        this.dispatchEvent('hupai',data);\n    },\n    \n    doTurnChange:function(si){\n        var data = {\n            last:this.turn,\n            turn:si,\n        }\n        this.turn = si;\n        this.dispatchEvent('game_chupai',data);\n    },\n    \n    connectGameServer:function(data){\n        this.dissoveData = null;\n        cc.vv.net.ip = data.ip + \":\" + data.port;\n        console.log(cc.vv.net.ip);\n        var self = this;\n\n        var onConnectOK = function(){\n            console.log(\"onConnectOK\");\n            var sd = {\n                token:data.token,\n                roomid:data.roomid,\n                time:data.time,\n                sign:data.sign,\n            };\n            //向socket服务器发送信息\n            cc.vv.net.send(\"login\",sd);\n        };\n        \n        var onConnectFailed = function(){\n            console.log(\"failed.\");\n            cc.vv.wc.hide();\n        };\n        cc.vv.wc.show(\"正在进入房间\");\n        cc.vv.net.connect(onConnectOK,onConnectFailed);\n    }\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _gameover:null,\n        _gameresult:null,\n        _seats:[],\n        _isGameEnd:false,\n        _pingju:null,\n        _win:null,\n        _lose:null,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        if(cc.vv == null){\n            return;\n        }\n        if(cc.vv.gameNetMgr.conf == null){\n            return;\n        }\n        if(cc.vv.gameNetMgr.conf.type == \"xzdd\"){\n            this._gameover = this.node.getChildByName(\"game_over\");\n        }\n        \n        // else{\n        //     this._gameover = this.node.getChildByName(\"game_over_xlch\");\n        // }\n\n        else if(cc.vv.gameNetMgr.conf.type == \"xlch\"){\n            this._gameover = this.node.getChildByName(\"game_over_xlch\");\n        }\n        else{\n            this._gameover = this.node.getChildByName(\"game_over_rzmj\");\n        }\n        this._gameover.active = false;\n        \n        this._pingju = this._gameover.getChildByName(\"pingju\");\n        this._win = this._gameover.getChildByName(\"win\");\n        this._lose = this._gameover.getChildByName(\"lose\");\n        \n        this._gameresult = this.node.getChildByName(\"game_result\");\n        \n        var wanfa = this._gameover.getChildByName(\"wanfa\").getComponent(cc.Label);\n        wanfa.string = cc.vv.gameNetMgr.getWanfa();\n        \n        var listRoot = this._gameover.getChildByName(\"result_list\");\n        for(var i = 1; i <= 4; ++i){\n            var s = \"s\" + i;\n            var sn = listRoot.getChildByName(s);\n            var viewdata = {};\n            viewdata.username = sn.getChildByName('username').getComponent(cc.Label);\n            viewdata.reason = sn.getChildByName('reason').getComponent(cc.Label);\n            \n            var f = sn.getChildByName('fan');\n            if(f != null){\n                viewdata.fan = f.getComponent(cc.Label);    \n            }\n            \n            viewdata.score = sn.getChildByName('score').getComponent(cc.Label);\n            viewdata.hu = sn.getChildByName('hu');\n            viewdata.mahjongs = sn.getChildByName('pai');\n            viewdata.zhuang = sn.getChildByName('zhuang');\n            viewdata.hupai = sn.getChildByName('hupai');\n            viewdata._pengandgang = [];\n            this._seats.push(viewdata);\n        }\n        \n        //初始化网络事件监听器\n        var self = this;\n        this.node.on('game_over',function(data){self.onGameOver(data);});\n        \n        this.node.on('game_end',function(data){self._isGameEnd = true;});\n    },\n    \n    onGameOver(data){\n        if(cc.vv.gameNetMgr.conf.type == \"xzdd\"){\n            this.onGameOver_XZDD(data);\n        }\n\n        // else{\n        //     this.onGameOver_XLCH(data);\n        // }\n        else if(cc.vv.gameNetMgr.conf.type == \"xlch\"){\n            this.onGameOver_XLCH(data);\n        } \n        else{\n            this.onGameOver_XZDD(data);\n        }\n    },\n    \n    onGameOver_XZDD(data){\n        console.log(data);\n        if(data.length == 0){\n            this._gameresult.active = true;\n            return;\n        }\n        this._gameover.active = true;\n        this._pingju.active = false;\n        this._win.active = false;\n        this._lose.active = false;\n\n        var myscore = data[cc.vv.gameNetMgr.seatIndex].score;\n        if(myscore > 0){\n            this._win.active = true;\n        }         \n        else if(myscore < 0){\n            this._lose.active = true;\n        }\n        else{\n            this._pingju.active = true;\n        }\n        \n            \n        //显示玩家信息\n        for(var i = 0; i < 4; ++i){\n            var seatView = this._seats[i];\n            var userData = data[i];\n            var hued = false;\n            //胡牌的玩家才显示 是否清一色 根xn的字样\n            var numOfGangs = userData.angangs.length + userData.wangangs.length + userData.diangangs.length;\n            var numOfGen = userData.numofgen;\n            var actionArr = [];\n            var is7pairs = false;\n            var ischadajiao = false;\n            for(var j = 0; j < userData.actions.length; ++j){\n                var ac = userData.actions[j];\n                if(ac.type == \"zimo\" || ac.type == \"ganghua\" || ac.type == \"dianganghua\" || ac.type == \"hu\" || ac.type == \"gangpaohu\" || ac.type == \"qiangganghu\" || ac.type == \"chadajiao\"){\n                    if(userData.pattern == \"7pairs\"){\n                        actionArr.push(\"七对\");\n                    }\n                    else if(userData.pattern == \"l7pairs\"){\n                        actionArr.push(\"龙七对\");\n                    }\n                    else if(userData.pattern == \"j7pairs\"){\n                        actionArr.push(\"将七对\");\n                    }\n                    else if(userData.pattern == \"duidui\"){\n                        actionArr.push(\"碰碰胡\");\n                    }\n                    else if(userData.pattern == \"jiangdui\"){\n                        actionArr.push(\"将对\");\n                    }\n                    \n                    if(ac.type == \"zimo\"){\n                        actionArr.push(\"自摸\");\n                    }\n                    else if(ac.type == \"ganghua\"){\n                        actionArr.push(\"杠上花\");\n                    }\n                    else if(ac.type == \"dianganghua\"){\n                        actionArr.push(\"点杠花\");\n                    }\n                    else if(ac.type == \"gangpaohu\"){\n                        actionArr.push(\"杠炮胡\");\n                    }\n                    else if(ac.type == \"qiangganghu\"){\n                        actionArr.push(\"抢杠胡\");\n                    }\n                    else if(ac.type == \"chadajiao\"){\n                        ischadajiao = true;\n                    }\n                    hued = true;\n                }\n                else if(ac.type == \"fangpao\"){\n                    actionArr.push(\"放炮\");\n                }\n                else if(ac.type == \"angang\"){\n                    actionArr.push(\"暗杠\");\n                }\n                else if(ac.type == \"diangang\"){\n                    actionArr.push(\"明杠\");\n                }\n                else if(ac.type == \"wangang\"){\n                    actionArr.push(\"弯杠\");\n                }\n                else if(ac.type == \"fanggang\"){\n                   actionArr.push(\"放杠\");\n                }\n                else if(ac.type == \"zhuanshougang\"){\n                    actionArr.push(\"转手杠\");\n                }\n                else if(ac.type == \"beiqianggang\"){\n                    actionArr.push(\"被抢杠\");\n                }\n                else if(ac.type == \"beichadajiao\"){\n                    actionArr.push(\"被查叫\");\n                }\n            }\n            \n            if(hued){\n                if(userData.qingyise){\n                    actionArr.push(\"清一色\");\n                }\n                \n                if(userData.menqing){\n                    actionArr.push(\"门清\");\n                }\n                \n                if(userData.zhongzhang){\n                    actionArr.push(\"中张\");\n                }\n                \n                if(userData.jingouhu){\n                    actionArr.push(\"金钩胡\");\n                }\n                                \n                if(userData.haidihu){\n                    actionArr.push(\"海底胡\");\n                }\n                \n                if(userData.tianhu){\n                    actionArr.push(\"天胡\");\n                }\n                \n                if(userData.dihu){\n                    actionArr.push(\"地胡\");\n                }\n            \n                if(numOfGen > 0){\n                    actionArr.push(\"根x\" + numOfGen); \n                }                \n                \n                if(ischadajiao){\n                    actionArr.push(\"查大叫\");\n                }\n            }\n            \n            for(var o = 0; o < 3;++o){\n                seatView.hu.children[o].active = false;    \n            }\n            if(userData.huorder >= 0){\n                seatView.hu.children[userData.huorder].active = true;    \n            }\n\n            seatView.username.string = cc.vv.gameNetMgr.seats[i].name;\n            seatView.zhuang.active = cc.vv.gameNetMgr.button == i;\n            seatView.reason.string = actionArr.join(\"、\");\n            \n            //胡牌的玩家才有番\n            var fan = 0;\n            if(hued){\n                fan = userData.fan;\n            }\n            seatView.fan.string = fan + \"番\";\n            \n            //\n            if(userData.score > 0){\n                seatView.score.string = \"+\" + userData.score;    \n            }\n            else{\n                seatView.score.string = userData.score;\n            }\n           \n            \n            var hupai = -1;\n            if(hued){\n                hupai = userData.holds.pop();\n            }\n            \n            cc.vv.mahjongmgr.sortMJ(userData.holds,userData.dingque);\n            \n            //胡牌不参与排序\n            if(hued){\n                userData.holds.push(hupai);\n            }\n            \n            //隐藏所有牌\n            for(var k = 0; k < seatView.mahjongs.childrenCount; ++k){\n                var n = seatView.mahjongs.children[k];\n                n.active = false;\n            }\n           \n            var lackingNum = (userData.pengs.length + numOfGangs)*3; \n            //显示相关的牌\n            for(var k = 0; k < userData.holds.length; ++k){\n                var pai = userData.holds[k];\n                var n = seatView.mahjongs.children[k + lackingNum];\n                n.active = true;\n                var sprite = n.getComponent(cc.Sprite);\n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai);\n            }\n            \n            \n            for(var k = 0; k < seatView._pengandgang.length; ++k){\n                seatView._pengandgang[k].active = false;\n            }\n            \n            //初始化杠牌\n            var index = 0;\n            var gangs = userData.angangs;\n            for(var k = 0; k < gangs.length; ++k){\n                var mjid = gangs[k];\n                this.initPengAndGangs(seatView,index,mjid,\"angang\");\n                index++;    \n            }\n            \n            var gangs = userData.diangangs;\n            for(var k = 0; k < gangs.length; ++k){\n                var mjid = gangs[k];\n                this.initPengAndGangs(seatView,index,mjid,\"diangang\");\n                index++;    \n            }\n            \n            var gangs = userData.wangangs;\n            for(var k = 0; k < gangs.length; ++k){\n                var mjid = gangs[k];\n                this.initPengAndGangs(seatView,index,mjid,\"wangang\");\n                index++;    \n            }\n            \n            //初始化碰牌\n            var pengs = userData.pengs\n            if(pengs){\n                for(var k = 0; k < pengs.length; ++k){\n                    var mjid = pengs[k];\n                    this.initPengAndGangs(seatView,index,mjid,\"peng\");\n                    index++;    \n                }    \n            }\n        }\n    },\n\n\n\n\n\n\n//这是自己加的日照麻将结束是的规则\n    onGameOver_RZMJ(data){\n        console.log(data);\n        if(data.length == 0){\n            this._gameresult.active = true;\n            return;\n        }\n        this._gameover.active = true;\n        this._pingju.active = false;\n        this._win.active = false;\n        this._lose.active = false;\n\n        var myscore = data[cc.vv.gameNetMgr.seatIndex].score;\n        if(myscore > 0){\n            this._win.active = true;\n        }         \n        else if(myscore < 0){\n            this._lose.active = true;\n        }\n        else{\n            this._pingju.active = true;\n        }\n        \n            \n        //显示玩家信息\n        for(var i = 0; i < 4; ++i){\n            var seatView = this._seats[i];\n            var userData = data[i];\n            var hued = false;\n            //胡牌的玩家才显示 是否清一色 根xn的字样\n            var numOfGangs = userData.angangs.length + userData.wangangs.length + userData.diangangs.length;\n            var numOfGen = userData.numofgen;\n            var actionArr = [];\n            var is7pairs = false;\n            var ischadajiao = false;\n            for(var j = 0; j < userData.actions.length; ++j){\n                var ac = userData.actions[j];\n                if(ac.type == \"zimo\" || ac.type == \"ganghua\" || ac.type == \"dianganghua\" || ac.type == \"hu\" || ac.type == \"gangpaohu\" || ac.type == \"qiangganghu\" || ac.type == \"chadajiao\"){\n                    if(userData.pattern == \"7pairs\"){\n                        actionArr.push(\"七对\");\n                    }\n                    else if(userData.pattern == \"l7pairs\"){\n                        actionArr.push(\"龙七对\");\n                    }\n                    else if(userData.pattern == \"j7pairs\"){\n                        actionArr.push(\"将七对\");\n                    }\n                    else if(userData.pattern == \"duidui\"){\n                        actionArr.push(\"碰碰胡\");\n                    }\n                    else if(userData.pattern == \"jiangdui\"){\n                        actionArr.push(\"将对\");\n                    }\n                    \n                    if(ac.type == \"zimo\"){\n                        actionArr.push(\"自摸\");\n                    }\n                    else if(ac.type == \"ganghua\"){\n                        actionArr.push(\"杠上花\");\n                    }\n                    else if(ac.type == \"dianganghua\"){\n                        actionArr.push(\"点杠花\");\n                    }\n                    else if(ac.type == \"gangpaohu\"){\n                        actionArr.push(\"杠炮胡\");\n                    }\n                    else if(ac.type == \"qiangganghu\"){\n                        actionArr.push(\"抢杠胡\");\n                    }\n                    else if(ac.type == \"chadajiao\"){\n                        ischadajiao = true;\n                    }\n                    hued = true;\n                }\n                else if(ac.type == \"fangpao\"){\n                    actionArr.push(\"放炮\");\n                }\n                else if(ac.type == \"angang\"){\n                    actionArr.push(\"暗杠\");\n                }\n                else if(ac.type == \"diangang\"){\n                    actionArr.push(\"明杠\");\n                }\n                else if(ac.type == \"wangang\"){\n                    actionArr.push(\"弯杠\");\n                }\n                else if(ac.type == \"fanggang\"){\n                   actionArr.push(\"放杠\");\n                }\n                else if(ac.type == \"zhuanshougang\"){\n                    actionArr.push(\"转手杠\");\n                }\n                else if(ac.type == \"beiqianggang\"){\n                    actionArr.push(\"被抢杠\");\n                }\n                else if(ac.type == \"beichadajiao\"){\n                    actionArr.push(\"被查叫\");\n                }\n            }\n            \n            if(hued){\n                if(userData.qingyise){\n                    actionArr.push(\"清一色\");\n                }\n                \n                if(userData.menqing){\n                    actionArr.push(\"门清\");\n                }\n                \n                if(userData.zhongzhang){\n                    actionArr.push(\"中张\");\n                }\n                \n                if(userData.jingouhu){\n                    actionArr.push(\"金钩胡\");\n                }\n                                \n                if(userData.haidihu){\n                    actionArr.push(\"海底胡\");\n                }\n                \n                if(userData.tianhu){\n                    actionArr.push(\"天胡\");\n                }\n                \n                if(userData.dihu){\n                    actionArr.push(\"地胡\");\n                }\n            \n                if(numOfGen > 0){\n                    actionArr.push(\"根x\" + numOfGen); \n                }                \n                \n                if(ischadajiao){\n                    actionArr.push(\"查大叫\");\n                }\n            }\n            \n            for(var o = 0; o < 3;++o){\n                seatView.hu.children[o].active = false;    \n            }\n            if(userData.huorder >= 0){\n                seatView.hu.children[userData.huorder].active = true;    \n            }\n\n            seatView.username.string = cc.vv.gameNetMgr.seats[i].name;\n            seatView.zhuang.active = cc.vv.gameNetMgr.button == i;\n            seatView.reason.string = actionArr.join(\"、\");\n            \n            //胡牌的玩家才有番\n            var fan = 0;\n            if(hued){\n                fan = userData.fan;\n            }\n            seatView.fan.string = fan + \"番\";\n            \n            //\n            if(userData.score > 0){\n                seatView.score.string = \"+\" + userData.score;    \n            }\n            else{\n                seatView.score.string = userData.score;\n            }\n           \n            \n            var hupai = -1;\n            if(hued){\n                hupai = userData.holds.pop();\n            }\n            \n            cc.vv.mahjongmgr.sortMJ(userData.holds,userData.dingque);\n            \n            //胡牌不参与排序\n            if(hued){\n                userData.holds.push(hupai);\n            }\n            \n            //隐藏所有牌\n            for(var k = 0; k < seatView.mahjongs.childrenCount; ++k){\n                var n = seatView.mahjongs.children[k];\n                n.active = false;\n            }\n           \n            var lackingNum = (userData.pengs.length + numOfGangs)*3; \n            //显示相关的牌\n            for(var k = 0; k < userData.holds.length; ++k){\n                var pai = userData.holds[k];\n                var n = seatView.mahjongs.children[k + lackingNum];\n                n.active = true;\n                var sprite = n.getComponent(cc.Sprite);\n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai);\n            }\n            \n            \n            for(var k = 0; k < seatView._pengandgang.length; ++k){\n                seatView._pengandgang[k].active = false;\n            }\n            \n            //初始化杠牌\n            var index = 0;\n            var gangs = userData.angangs;\n            for(var k = 0; k < gangs.length; ++k){\n                var mjid = gangs[k];\n                this.initPengAndGangs(seatView,index,mjid,\"angang\");\n                index++;    \n            }\n            \n            var gangs = userData.diangangs;\n            for(var k = 0; k < gangs.length; ++k){\n                var mjid = gangs[k];\n                this.initPengAndGangs(seatView,index,mjid,\"diangang\");\n                index++;    \n            }\n            \n            var gangs = userData.wangangs;\n            for(var k = 0; k < gangs.length; ++k){\n                var mjid = gangs[k];\n                this.initPengAndGangs(seatView,index,mjid,\"wangang\");\n                index++;    \n            }\n            \n            //初始化碰牌\n            var pengs = userData.pengs\n            if(pengs){\n                for(var k = 0; k < pengs.length; ++k){\n                    var mjid = pengs[k];\n                    this.initPengAndGangs(seatView,index,mjid,\"peng\");\n                    index++;    \n                }    \n            }\n        }\n    },\n\n\n\n\n\n    onGameOver_XLCH:function(data){\n        console.log(data);\n        if(data.length == 0){\n            this._gameresult.active = true;\n            return;\n        }\n        this._gameover.active = true;\n        this._pingju.active = false;\n        this._win.active = false;\n        this._lose.active = false;\n\n        var myscore = data[cc.vv.gameNetMgr.seatIndex].score;\n        if(myscore > 0){\n            this._win.active = true;\n        }         \n        else if(myscore < 0){\n            this._lose.active = true;\n        }\n        else{\n            this._pingju.active = true;\n        }\n            \n        //显示玩家信息\n        for(var i = 0; i < 4; ++i){\n            var seatView = this._seats[i];\n            var userData = data[i];\n            var hued = false;\n            var actionArr = [];\n            var is7pairs = false;\n            var ischadajiao = false;\n            var hupaiRoot = seatView.hupai;\n            \n            for(var j = 0; j < hupaiRoot.children.length; ++j){\n                hupaiRoot.children[j].active = false;\n            }\n            \n            var hi = 0;\n            for(var j = 0; j < userData.huinfo.length; ++j){\n                var info = userData.huinfo[j];\n                hued = hued || info.ishupai;\n                if(info.ishupai){\n                    if(hi < hupaiRoot.children.length){\n                        var hupaiView = hupaiRoot.children[hi]; \n                        hupaiView.active = true;\n                        hupaiView.getComponent(cc.Sprite).spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"B_\",info.pai);\n                        hi++;   \n                    }\n                }\n                \n                var str = \"\"\n                var sep = \"\";\n                \n                var dataseat = userData;\n                if(!info.ishupai){\n                    if(info.action == \"fangpao\"){\n                        str = \"放炮\";\n                    }\n                    else if(info.action == \"gangpao\"){\n                        str = \"杠上炮\";\n                    }\n                    else if(info.action == \"beiqianggang\"){\n                        str = \"被抢杠\";\n                    }\n                    else{\n                        str = \"被查大叫\";\n                    }\n                    \n                    dataseat = data[info.target]; \n                    info = dataseat.huinfo[info.index];\n                }\n                else{\n                    if(info.action == \"hu\"){\n                        str = \"接炮胡\"\n                    }\n                    else if(info.action == \"zimo\"){\n                        str = \"自摸\";\n                    }\n                    else if(info.action == \"ganghua\"){\n                        str = \"杠上花\";\n                    }\n                    else if(info.action == \"dianganghua\"){\n                        str = \"点杠花\";\n                    }\n                    else if(info.action == \"gangpaohu\"){\n                        str = \"杠炮胡\";\n                    }\n                    else if(info.action == \"qiangganghu\"){\n                        str = \"抢杠胡\";\n                    }\n                    else if(info.action == \"chadajiao\"){\n                        str = \"查大叫\";\n                    }   \n                }\n                \n                str += \"(\";\n                \n                if(info.pattern == \"7pairs\"){\n                    str += \"七对\";\n                    sep = \"、\"\n                }\n                else if(info.pattern == \"l7pairs\"){\n                    str += \"龙七对\";\n                    sep = \"、\"\n                }\n                else if(info.pattern == \"j7pairs\"){\n                    str += \"将七对\";\n                    sep = \"、\"\n                }\n                else if(info.pattern == \"duidui\"){\n                    str += \"碰碰胡\";\n                    sep = \"、\"\n                }\n                else if(info.pattern == \"jiangdui\"){\n                    str += \"将对\";\n                    sep = \"、\"\n                }\n                    \n                if(info.haidihu){\n                    str += sep + \"海底胡\";\n                    sep = \"、\";\n                }\n                \n                if(info.tianhu){\n                    str += sep + \"天胡\";\n                    sep = \"、\";\n                }\n                \n                if(info.dihu){\n                    str += sep + \"地胡\";\n                    sep = \"、\";\n                }\n                \n                if(dataseat.qingyise){\n                    str += sep + \"清一色\";\n                    sep = \"、\";\n                }\n                \n                if(dataseat.menqing){\n                    str += sep + \"门清\";\n                    sep = \"、\";\n                }\n                \n                if(dataseat.jingouhu){\n                    str += sep + \"金钩胡\";\n                    sep = \"、\";\n                }\n                         \n                if(dataseat.zhongzhang){\n                    str += sep + \"中张\";\n                    sep = \"、\";\n                }\n            \n                if(info.numofgen > 0){\n                    str += sep + \"根x\" + info.numofgen;\n                    sep = \"、\"; \n                }\n                \n                if(sep == \"\"){\n                    str += \"平胡\";\n                }\n                \n                str += \"、\" + info.fan + \"番\";\n                \n                str += \")\";\n                actionArr.push(str);\n            }\n            \n            seatView.hu.active = hued;\n            \n            if(userData.angangs.length){\n                actionArr.push(\"暗杠x\" + userData.angangs.length);\n            }\n            \n            if(userData.diangangs.length){\n                actionArr.push(\"明杠x\" + userData.diangangs.length);\n            }\n            \n            if(userData.wangangs.length){\n                actionArr.push(\"巴杠x\" + userData.wangangs.length);\n            }\n\n            seatView.username.string = cc.vv.gameNetMgr.seats[i].name;\n            seatView.zhuang.active = cc.vv.gameNetMgr.button == i;\n            seatView.reason.string = actionArr.join(\"、\");\n            \n            //\n            if(userData.score > 0){\n                seatView.score.string = \"+\" + userData.score;    \n            }\n            else{\n                seatView.score.string = userData.score;\n            }\n           \n            //隐藏所有牌\n            for(var k = 0; k < seatView.mahjongs.childrenCount; ++k){\n                var n = seatView.mahjongs.children[k];\n                n.active = false;\n            }\n            \n            cc.vv.mahjongmgr.sortMJ(userData.holds,userData.dingque);\n            \n            var numOfGangs = userData.angangs.length + userData.wangangs.length + userData.diangangs.length;\n           \n            var lackingNum = (userData.pengs.length + numOfGangs)*3; \n            //显示相关的牌\n            for(var k = 0; k < userData.holds.length; ++k){\n                var pai = userData.holds[k];\n                var n = seatView.mahjongs.children[k + lackingNum];\n                n.active = true;\n                var sprite = n.getComponent(cc.Sprite);\n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai);\n            }\n            \n            \n            for(var k = 0; k < seatView._pengandgang.length; ++k){\n                seatView._pengandgang[k].active = false;\n            }\n            \n            //初始化杠牌\n            var index = 0;\n            var gangs = userData.angangs;\n            for(var k = 0; k < gangs.length; ++k){\n                var mjid = gangs[k];\n                this.initPengAndGangs(seatView,index,mjid,\"angang\");\n                index++;    \n            }\n            \n            var gangs = userData.diangangs;\n            for(var k = 0; k < gangs.length; ++k){\n                var mjid = gangs[k];\n                this.initPengAndGangs(seatView,index,mjid,\"diangang\");\n                index++;    \n            }\n            \n            var gangs = userData.wangangs;\n            for(var k = 0; k < gangs.length; ++k){\n                var mjid = gangs[k];\n                this.initPengAndGangs(seatView,index,mjid,\"wangang\");\n                index++;    \n            }\n            \n            //初始化碰牌\n            var pengs = userData.pengs\n            if(pengs){\n                for(var k = 0; k < pengs.length; ++k){\n                    var mjid = pengs[k];\n                    this.initPengAndGangs(seatView,index,mjid,\"peng\");\n                    index++;    \n                }    \n            }\n        }\n    },\n    \n    initPengAndGangs:function(seatView,index,mjid,flag){\n        var pgroot = null;\n        if(seatView._pengandgang.length <= index){\n            pgroot = cc.instantiate(cc.vv.mahjongmgr.pengPrefabSelf);\n            seatView._pengandgang.push(pgroot);\n            seatView.mahjongs.addChild(pgroot);    \n        }\n        else{\n            pgroot = seatView._pengandgang[index];\n            pgroot.active = true;\n        }\n      \n        var sprites = pgroot.getComponentsInChildren(cc.Sprite);\n        for(var s = 0; s < sprites.length; ++s){\n            var sprite = sprites[s];\n            if(sprite.node.name == \"gang\"){\n                var isGang = flag != \"peng\";\n                sprite.node.active = isGang;\n                sprite.node.scaleX = 1.0;\n                sprite.node.scaleY = 1.0;\n                if(flag == \"angang\"){\n                    sprite.spriteFrame = cc.vv.mahjongmgr.getEmptySpriteFrame(\"myself\");\n                    sprite.node.scaleX = 1.4;\n                    sprite.node.scaleY = 1.4;                        \n                }   \n                else{\n                    sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"B_\",mjid);    \n                }\n            }\n            else{ \n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"B_\",mjid);\n            }\n        }\n        pgroot.x = index * 55 * 3 + index * 10;\n    },\n    \n    onBtnReadyClicked:function(){\n        console.log(\"onBtnReadyClicked\");\n        if(this._isGameEnd){\n            this._gameresult.active = true;\n        }\n        else{\n            cc.vv.net.send('ready');   \n        }\n        this._gameover.active = false;\n    },\n    \n    onBtnShareClicked:function(){\n        console.log(\"onBtnShareClicked\");\n    }\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _gameresult:null,\n        _seats:[],\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        if(cc.vv == null){\n            return;\n        }\n        \n        this._gameresult = this.node.getChildByName(\"game_result\");\n        //this._gameresult.active = false;\n        \n        var seats = this._gameresult.getChildByName(\"seats\");\n        for(var i = 0; i < seats.children.length; ++i){\n            this._seats.push(seats.children[i].getComponent(\"Seat\"));   \n        }\n        \n        var btnClose = cc.find(\"Canvas/game_result/btnClose\");\n        if(btnClose){\n            cc.vv.utils.addClickEvent(btnClose,this.node,\"GameResult\",\"onBtnCloseClicked\");\n        }\n        \n        var btnShare = cc.find(\"Canvas/game_result/btnShare\");\n        if(btnShare){\n            cc.vv.utils.addClickEvent(btnShare,this.node,\"GameResult\",\"onBtnShareClicked\");\n        }\n        \n        //初始化网络事件监听器\n        var self = this;\n        this.node.on('game_end',function(data){self.onGameEnd(data);});\n    },\n    \n    showResult:function(seat,info,isZuiJiaPaoShou){\n        seat.node.getChildByName(\"zuijiapaoshou\").active = isZuiJiaPaoShou;\n        \n        seat.node.getChildByName(\"zimocishu\").getComponent(cc.Label).string = info.numzimo;\n        seat.node.getChildByName(\"jiepaocishu\").getComponent(cc.Label).string = info.numjiepao;\n        seat.node.getChildByName(\"dianpaocishu\").getComponent(cc.Label).string = info.numdianpao;\n        seat.node.getChildByName(\"angangcishu\").getComponent(cc.Label).string = info.numangang;\n        seat.node.getChildByName(\"minggangcishu\").getComponent(cc.Label).string = info.numminggang;\n        seat.node.getChildByName(\"chajiaocishu\").getComponent(cc.Label).string = info.numchadajiao;\n    },\n    \n    onGameEnd:function(endinfo){\n        var seats = cc.vv.gameNetMgr.seats;\n        var maxscore = -1;\n        var maxdianpao = 0;\n        var dianpaogaoshou = -1;\n        for(var i = 0; i < seats.length; ++i){\n            var seat = seats[i];\n            if(seat.score > maxscore){\n                maxscore = seat.score;\n            }\n            if(endinfo[i].numdianpao > maxdianpao){\n                maxdianpao = endinfo[i].numdianpao;\n                dianpaogaoshou = i;\n            }\n        }\n        \n        for(var i = 0; i < seats.length; ++i){\n            var seat = seats[i];\n            var isBigwin = false;\n            if(seat.score > 0){\n                isBigwin = seat.score == maxscore;\n            }\n            this._seats[i].setInfo(seat.name,seat.score, isBigwin);\n            this._seats[i].setID(seat.userid);\n            var isZuiJiaPaoShou = dianpaogaoshou == i;\n            this.showResult(this._seats[i],endinfo[i],isZuiJiaPaoShou);\n        }\n    },\n    \n    onBtnCloseClicked:function(){\n        cc.director.loadScene(\"hall\");\n    },\n    \n    onBtnShareClicked:function(){\n        // cc.vv.anysdkMgr.shareResult();\n    }\n});\n","var Global = cc.Class({\n    extends: cc.Component,\n    statics: {\n        \n        isstarted:false,\n        netinited:false,\n        userguid:0,\n        nickname:\"\",\n        money:0,\n        lv:0,\n        roomId:0,\n    },\n});","//var URL = \"https://act.nings.ca:9000\";\nvar URL = \"https://act.game.com:9000\";\n\ncc.VERSION = 20161227;\nvar HTTP = cc.Class({\n    extends: cc.Component,\n\n    statics:{\n        sessionId : 0,\n        userId : 0,\n        master_url:URL,\n        url:URL,\n        sendRequest : function(path,data,handler,extraUrl){\n            var xhr = cc.loader.getXMLHttpRequest();\n            xhr.timeout = 5000;\n            var str = \"?\";\n            for(var k in data){\n                if(str != \"?\"){\n                    str += \"&\";\n                }\n                str += k + \"=\" + data[k];\n            }\n            if(extraUrl == null){\n                extraUrl = HTTP.url;\n            }\n            //这里把str（就是CreateRoom里面选择好的数据）交给requestURL，然后通过get把数据打给服务器\n            var requestURL = extraUrl + path + encodeURI(str);\n            console.log(\"RequestURL:\" + requestURL);\n            //这个方法调用一下这只是初始化一个请请求\n            xhr.open(\"GET\",requestURL, true);\n            if (cc.sys.isNative){\n                xhr.setRequestHeader(\"Accept-Encoding\",\"gzip,deflate\",\"text/html;charset=UTF-8\");\n            }\n            \n            xhr.onreadystatechange = function() {\n                if(xhr.readyState === 4 && (xhr.status >= 200 && xhr.status < 300)){\n                    console.log(\"http res(\"+ xhr.responseText.length + \"):\" + xhr.responseText);\n                    try {\n                        var ret = JSON.parse(xhr.responseText);\n                        if(handler !== null){\n                            handler(ret);\n                        }                        /* code */\n                    } catch (e) {\n                        console.log(\"err:\" + e);\n                        //handler(null);\n                    } \n                    finally{\n                        if(cc.vv && cc.vv.wc){\n                        //       cc.vv.wc.hide();    \n                        }\n                    }\n                }\n            };\n            \n            if(cc.vv && cc.vv.wc){\n                //cc.vv.wc.show();\n            }\n            //发送请求\n            xhr.send();\n            return xhr;\n        },\n    },\n});","//拿到这两文件\nvar Net = require(\"Net\")\nvar Global = require(\"Global\")\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        //这些label，这些玩家信息\n        lblName:cc.Label,\n        lblMoney:cc.Label,\n        lblGems:cc.Label,\n        lblID:cc.Label,\n        lblNotice:cc.Label,\n        //这些是一些节点窗口或按钮\n        joinGameWin:cc.Node,\n        createRoomWin:cc.Node,\n        settingsWin:cc.Node,\n        helpWin:cc.Node,\n        xiaoxiWin:cc.Node,\n        btnJoinGame:cc.Node,\n        btnReturnGame:cc.Node,\n        //这是一张头像\n        sprHeadImg:cc.Sprite,\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n\n    },\n    \n    initNetHandlers:function(){\n        var self = this;\n    },\n    \n    onShare:function(){\n        cc.vv.anysdkMgr.share(\"达达麻将\",\"达达麻将，包含了血战到底、血流成河等多种四川流行麻将玩法。\");   \n    },\n\n    // use this for initialization\n    onLoad: function () {\n        if(!cc.sys.isNative && cc.sys.isMobile){\n            var cvs = this.node.getComponent(cc.Canvas);\n            cvs.fitHeight = true;\n            cvs.fitWidth = true;\n        }\n        if(!cc.vv){\n            cc.director.loadScene(\"loading\");\n            return;\n        }\n        this.initLabels();\n        \n        if(cc.vv.gameNetMgr.roomId == null){\n            this.btnJoinGame.active = true;\n            this.btnReturnGame.active = false;\n        }\n        else{\n            this.btnJoinGame.active = false;\n            this.btnReturnGame.active = true;\n        }\n        \n        //var params = cc.vv.args;\n        var roomId = cc.vv.userMgr.oldRoomId \n        if( roomId != null){\n            cc.vv.userMgr.oldRoomId = null;\n            cc.vv.userMgr.enterRoom(roomId);\n        }\n        \n        var imgLoader = this.sprHeadImg.node.getComponent(\"ImageLoader\");\n        imgLoader.setUserID(cc.vv.userMgr.userId);\n        cc.vv.utils.addClickEvent(this.sprHeadImg.node,this.node,\"Hall\",\"onBtnClicked\");\n        \n        \n        this.addComponent(\"UserInfoShow\");\n        \n        this.initButtonHandler(\"Canvas/right_bottom/btn_shezhi\");\n        this.initButtonHandler(\"Canvas/right_bottom/btn_help\");\n        this.initButtonHandler(\"Canvas/right_bottom/btn_xiaoxi\");\n        this.helpWin.addComponent(\"OnBack\");\n        this.xiaoxiWin.addComponent(\"OnBack\");\n        \n        if(!cc.vv.userMgr.notice){\n            cc.vv.userMgr.notice = {\n                version:null,\n                msg:\"数据请求中...\",\n            }\n        }\n        \n        if(!cc.vv.userMgr.gemstip){\n            cc.vv.userMgr.gemstip = {\n                version:null,\n                msg:\"数据请求中...\",\n            }\n        }\n        \n        this.lblNotice.string = cc.vv.userMgr.notice.msg;\n        \n        this.refreshInfo();\n        this.refreshNotice();\n        this.refreshGemsTip();\n        \n        cc.vv.audioMgr.playBGM(\"bgMain.mp3\");\n    },\n    \n    refreshInfo:function(){\n        var self = this;\n        var onGet = function(ret){\n            if(ret.errcode !== 0){\n                console.log(ret.errmsg);\n            }\n            else{\n                if(ret.gems != null){\n                    this.lblGems.string = ret.gems;    \n                }\n            }\n        };\n        \n        var data = {\n            account:cc.vv.userMgr.account,\n            sign:cc.vv.userMgr.sign,\n        };\n        cc.vv.http.sendRequest(\"/get_user_status\",data,onGet.bind(this));\n    },\n    \n    refreshGemsTip:function(){\n        var self = this;\n        var onGet = function(ret){\n            if(ret.errcode !== 0){\n                console.log(ret.errmsg);\n            }\n            else{\n                cc.vv.userMgr.gemstip.version = ret.version;\n                cc.vv.userMgr.gemstip.msg = ret.msg.replace(\"<newline>\",\"\\n\");\n            }\n        };\n        \n        var data = {\n            account:cc.vv.userMgr.account,\n            sign:cc.vv.userMgr.sign,\n            type:\"fkgm\",\n            version:cc.vv.userMgr.gemstip.version\n        };\n        cc.vv.http.sendRequest(\"/get_message\",data,onGet.bind(this));\n    },\n    \n    refreshNotice:function(){\n        var self = this;\n        var onGet = function(ret){\n            if(ret.errcode !== 0){\n                console.log(ret.errmsg);\n            }\n            else{\n                cc.vv.userMgr.notice.version = ret.version;\n                cc.vv.userMgr.notice.msg = ret.msg;\n                this.lblNotice.string = ret.msg;\n            }\n        };\n        \n        var data = {\n            account:cc.vv.userMgr.account,\n            sign:cc.vv.userMgr.sign,\n            type:\"notice\",\n            version:cc.vv.userMgr.notice.version\n        };\n        cc.vv.http.sendRequest(\"/get_message\",data,onGet.bind(this));\n    },\n    \n    initButtonHandler:function(btnPath){\n        var btn = cc.find(btnPath);\n        cc.vv.utils.addClickEvent(btn,this.node,\"Hall\",\"onBtnClicked\");        \n    },\n    \n    \n    \n    initLabels:function(){\n        this.lblName.string = cc.vv.userMgr.userName;\n        this.lblMoney.string = cc.vv.userMgr.coins;\n        this.lblGems.string = cc.vv.userMgr.gems;\n        this.lblID.string = \"ID:\" + cc.vv.userMgr.userId;\n    },\n    \n    onBtnClicked:function(event){\n        if(event.target.name == \"btn_shezhi\"){\n            this.settingsWin.active = true;\n        }   \n        else if(event.target.name == \"btn_help\"){\n            this.helpWin.active = true;\n        }\n        else if(event.target.name == \"btn_xiaoxi\"){\n            this.xiaoxiWin.active = true;\n        }\n        else if(event.target.name == \"head\"){\n            cc.vv.userinfoShow.show(cc.vv.userMgr.userName,cc.vv.userMgr.userId,this.sprHeadImg,cc.vv.userMgr.sex,cc.vv.userMgr.ip);\n        }\n    },\n    //加入房间\n    onJoinGameClicked:function(){\n        this.joinGameWin.active = true;\n    },\n    \n    onReturnGameClicked:function(){\n            cc.director.loadScene(\"mjgame\");\n    },\n    \n    onBtnAddGemsClicked:function(){\n        cc.vv.alert.show(\"提示\",cc.vv.userMgr.gemstip.msg);\n        this.refreshInfo();\n    },\n    \n    onCreateRoomClicked:function(){\n        if(cc.vv.gameNetMgr.roomId != null){\n            cc.vv.alert.show(\"提示\",\"房间已经创建!\\n必须解散当前房间才能创建新的房间\");\n            return;\n        }\n        console.log(\"onCreateRoomClicked\");\n        this.createRoomWin.active = true;   \n    },\n\n    // called every frame, uncomment this function to activate update callback\n    update: function (dt) {\n        var x = this.lblNotice.node.x;\n        x -= dt*100;\n        if(x + this.lblNotice.node.width < -1000){\n            x = 500;\n        }\n        this.lblNotice.node.x = x;\n        \n        if(cc.vv && cc.vv.userMgr.roomData != null){\n            cc.vv.userMgr.enterRoom(cc.vv.userMgr.roomData);\n            cc.vv.userMgr.roomData = null;\n        }\n    },\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        HistoryItemPrefab:{\n            default:null,\n            type:cc.Prefab,\n        },\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _history:null,\n        _viewlist:null,\n        _content:null,\n        _viewitemTemp:null,\n        _historyData:null,\n        _curRoomInfo:null,\n        _emptyTip:null,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        this._history = this.node.getChildByName(\"history\");\n        this._history.active = false;\n        \n        this._emptyTip = this._history.getChildByName(\"emptyTip\");\n        this._emptyTip.active = true;\n        \n        this._viewlist = this._history.getChildByName(\"viewlist\");\n        this._content = cc.find(\"view/content\",this._viewlist);\n        \n        this._viewitemTemp = this._content.children[0];\n        this._content.removeChild(this._viewitemTemp);\n\n        var node = cc.find(\"Canvas/btn_zhanji\");        \n        this.addClickEvent(node,this.node,\"History\",\"onBtnHistoryClicked\");\n        \n        var node = cc.find(\"Canvas/history/btn_back\");  \n        this.addClickEvent(node,this.node,\"History\",\"onBtnBackClicked\");\n    },\n    \n    addClickEvent:function(node,target,component,handler){\n        var eventHandler = new cc.Component.EventHandler();\n        eventHandler.target = target;\n        eventHandler.component = component;\n        eventHandler.handler = handler;\n\n        var clickEvents = node.getComponent(cc.Button).clickEvents;\n        clickEvents.push(eventHandler);\n    },\n    \n    onBtnBackClicked:function(){\n        if(this._curRoomInfo == null){\n            this._historyData = null;\n            this._history.active = false;            \n        }\n        else{\n            this.initRoomHistoryList(this._historyData);   \n        }\n    },\n    \n    onBtnHistoryClicked:function(){\n        this._history.active = true;\n        var self = this;\n        cc.vv.userMgr.getHistoryList(function(data){\n            data.sort(function(a,b){\n                return a.time < b.time; \n            });\n            self._historyData = data;\n            for(var i = 0; i < data.length; ++i){\n                for(var j = 0; j < 4; ++j){\n                    var s = data[i].seats[j];\n                    s.name = new Buffer(s.name,'base64').toString();\n                }\n            }\n            self.initRoomHistoryList(data);\n        });\n    },\n    \n    dateFormat:function(time){\n        var date = new Date(time);\n        var datetime = \"{0}-{1}-{2} {3}:{4}:{5}\";\n        var year = date.getFullYear();\n        var month = date.getMonth() + 1;\n        month = month >= 10? month : (\"0\"+month);\n        var day = date.getDate();\n        day = day >= 10? day : (\"0\"+day);\n        var h = date.getHours();\n        h = h >= 10? h : (\"0\"+h);\n        var m = date.getMinutes();\n        m = m >= 10? m : (\"0\"+m);\n        var s = date.getSeconds();\n        s = s >= 10? s : (\"0\"+s);\n        datetime = datetime.format(year,month,day,h,m,s);\n        return datetime;\n    },\n    \n    initRoomHistoryList:function(data){\n        for(var i = 0; i < data.length; ++i){\n            var node = this.getViewItem(i);\n            node.idx = i;\n            var titleId = \"\" + (i + 1);\n            node.getChildByName(\"title\").getComponent(cc.Label).string = titleId;\n            node.getChildByName(\"roomNo\").getComponent(cc.Label).string = \"房间ID:\" + data[i].id;\n            var datetime = this.dateFormat(data[i].time * 1000);\n            node.getChildByName(\"time\").getComponent(cc.Label).string = datetime;\n            \n            var btnOp = node.getChildByName(\"btnOp\");\n            btnOp.idx = i;\n            btnOp.getChildByName(\"Label\").getComponent(cc.Label).string = \"详情\";\n            \n            for(var j = 0; j < 4; ++j){\n                var s = data[i].seats[j];\n                var info = s.name + \":\" +  s.score;\n                //console.log(info);\n                node.getChildByName(\"info\" + j).getComponent(cc.Label).string = info;\n            }\n        }\n        this._emptyTip.active = data.length == 0;\n        this.shrinkContent(data.length);\n        this._curRoomInfo = null;\n    },\n    \n    initGameHistoryList:function(roomInfo,data){\n        data.sort(function(a,b){\n           return a.create_time < b.create_time; \n        });\n        for(var i = 0; i < data.length; ++i){\n            var node = this.getViewItem(i);\n            var idx = data.length - i - 1;\n            node.idx = idx;\n            var titleId = \"\" + (idx + 1);\n            node.getChildByName(\"title\").getComponent(cc.Label).string = titleId;\n            node.getChildByName(\"roomNo\").getComponent(cc.Label).string = \"房间ID:\" + roomInfo.id;\n            var datetime = this.dateFormat(data[i].create_time * 1000);\n            node.getChildByName(\"time\").getComponent(cc.Label).string = datetime;\n            \n            var btnOp = node.getChildByName(\"btnOp\");\n            btnOp.idx = idx; \n            btnOp.getChildByName(\"Label\").getComponent(cc.Label).string = \"回放\";\n            \n            var result = JSON.parse(data[i].result);\n            for(var j = 0; j < 4; ++j){\n                var s = roomInfo.seats[j];\n                var info = s.name + \":\" + result[j];\n                //console.log(info);\n                node.getChildByName(\"info\" + j).getComponent(cc.Label).string = info;\n            }\n        }\n        this.shrinkContent(data.length);\n        this._curRoomInfo = roomInfo;\n    },\n    \n    getViewItem:function(index){\n        var content = this._content;\n        if(content.childrenCount > index){\n            return content.children[index];\n        }\n        var node = cc.instantiate(this._viewitemTemp);\n        content.addChild(node);\n        return node;\n    },\n    shrinkContent:function(num){\n        while(this._content.childrenCount > num){\n            var lastOne = this._content.children[this._content.childrenCount -1];\n            this._content.removeChild(lastOne,true);\n        }\n    },\n    \n    getGameListOfRoom:function(idx){\n        var self = this;\n        var roomInfo = this._historyData[idx];        \n        cc.vv.userMgr.getGamesOfRoom(roomInfo.uuid,function(data){\n            if(data != null && data.length > 0){\n                self.initGameHistoryList(roomInfo,data);\n            }\n        });\n    },\n    \n    getDetailOfGame:function(idx){\n        var self = this;\n        var roomUUID = this._curRoomInfo.uuid;\n        cc.vv.userMgr.getDetailOfGame(roomUUID,idx,function(data){\n            data.base_info = JSON.parse(data.base_info);\n            data.action_records = JSON.parse(data.action_records);\n            cc.vv.gameNetMgr.prepareReplay(self._curRoomInfo,data);\n            cc.vv.replayMgr.init(data);\n            cc.director.loadScene(\"mjgame\"); \n        });\n    },\n    \n    onViewItemClicked:function(event){\n        var idx = event.target.idx;\n        console.log(idx);\n        if(this._curRoomInfo == null){\n            this.getGameListOfRoom(idx);\n        }\n        else{\n            this.getDetailOfGame(idx);      \n        }\n    },\n    \n    onBtnOpClicked:function(event){\n        var idx = event.target.parent.idx;\n        console.log(idx);\n        if(this._curRoomInfo == null){\n            this.getGameListOfRoom(idx);\n        }\n        else{\n            this.getDetailOfGame(idx);      \n        }\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        updatePanel: {\n            default: null,\n            type: cc.Node\n        },\n        manifestUrl: {\n            default: null,\n            url: cc.RawAsset\n        },\n        percent: {\n            default: null,\n            type: cc.Label\n        },\n        lblErr: {\n            default: null,\n            type: cc.Label\n        }\n    },\n\n    checkCb: function (event) {\n        cc.log('Code: ' + event.getEventCode());\n        switch (event.getEventCode())\n        {\n            case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:\n                cc.log(\"No local manifest file found, hot update skipped.\");\n                cc.eventManager.removeListener(this._checkListener);\n                break;\n            case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:\n            case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:\n                cc.log(\"Fail to download manifest file, hot update skipped.\");\n                cc.eventManager.removeListener(this._checkListener);\n                break;\n            case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:\n                cc.log(\"Already up to date with the latest remote version.\");\n                cc.eventManager.removeListener(this._checkListener);\n                this.lblErr.string += \"游戏不需要更新\\n\";\n                cc.director.loadScene(\"loading\");\n                break;\n            case jsb.EventAssetsManager.NEW_VERSION_FOUND:\n                this._needUpdate = true;\n                this.updatePanel.active = true;\n                this.percent.string = '00.00%';\n                cc.eventManager.removeListener(this._checkListener);\n                break;\n            default:\n                break;\n        }\n        this.hotUpdate();\n    },\n\n    updateCb: function (event) {\n        var needRestart = false;\n        var failed = false;\n        switch (event.getEventCode())\n        {\n            case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:\n                cc.log('No local manifest file found, hot update skipped.');\n                failed = true;\n                break;\n            case jsb.EventAssetsManager.UPDATE_PROGRESSION:\n                var percent = event.getPercent();\n                var percentByFile = event.getPercentByFile();\n\n                var msg = event.getMessage();\n                if (msg) {\n                    cc.log(msg);\n                }\n                cc.log(percent.toFixed(2) + '%');\n                this.percent.string = percent + '%';\n                break;\n            case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:\n            case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:\n                cc.log('Fail to download manifest file, hot update skipped.');\n                failed = true;\n                break;\n            case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:\n                cc.log('Already up to date with the latest remote version.');\n                failed = true;\n                break;\n            case jsb.EventAssetsManager.UPDATE_FINISHED:\n                cc.log('Update finished. ' + event.getMessage());\n\n                needRestart = true;\n                break;\n            case jsb.EventAssetsManager.UPDATE_FAILED:\n                cc.log('Update failed. ' + event.getMessage());\n\n                this._failCount ++;\n                if (this._failCount < 5)\n                {\n                    this._am.downloadFailedAssets();\n                }\n                else\n                {\n                    cc.log('Reach maximum fail count, exit update process');\n                    this._failCount = 0;\n                    failed = true;\n                }\n                break;\n            case jsb.EventAssetsManager.ERROR_UPDATING:\n                cc.log('Asset update error: ' + event.getAssetId() + ', ' + event.getMessage());\n                break;\n            case jsb.EventAssetsManager.ERROR_DECOMPRESS:\n                cc.log(event.getMessage());\n                break;\n            default:\n                break;\n        }\n\n        if (failed) {\n            cc.eventManager.removeListener(this._updateListener);\n            this.updatePanel.active = false;\n        }\n\n        if (needRestart) {\n            cc.eventManager.removeListener(this._updateListener);\n            // Prepend the manifest's search path\n            var searchPaths = jsb.fileUtils.getSearchPaths();\n            var newPaths = this._am.getLocalManifest().getSearchPaths();\n            Array.prototype.unshift(searchPaths, newPaths);\n            // This value will be retrieved and appended to the default search path during game startup,\n            // please refer to samples/js-tests/main.js for detailed usage.\n            // !!! Re-add the search paths in main.js is very important, otherwise, new scripts won't take effect.\n            cc.sys.localStorage.setItem('HotUpdateSearchPaths', JSON.stringify(searchPaths));\n\n            jsb.fileUtils.setSearchPaths(searchPaths);\n            this.lblErr.string += \"游戏资源更新完毕\\n\";\n            cc.game.restart();\n        }\n    },\n\n    hotUpdate: function () {\n        if (this._am && this._needUpdate) {\n            this.lblErr.string += \"开始更新游戏资源...\\n\";\n            this._updateListener = new jsb.EventListenerAssetsManager(this._am, this.updateCb.bind(this));\n            cc.eventManager.addListener(this._updateListener, 1);\n\n            this._failCount = 0;\n            this._am.update();\n        }\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        // Hot update is only available in Native build\n        if (!cc.sys.isNative) {\n            return;\n        }\n        this.lblErr.string += \"检查游戏资源...\\n\";\n        var storagePath = ((jsb.fileUtils ? jsb.fileUtils.getWritablePath() : '/') + 'tiantianqipai-asset');\n        cc.log('Storage path for remote asset : ' + storagePath);\n        this.lblErr.string += storagePath + \"\\n\";\n        cc.log('Local manifest URL : ' + this.manifestUrl);\n        this._am = new jsb.AssetsManager(this.manifestUrl, storagePath);\n        this._am.retain();\n\n        this._needUpdate = false;\n        if (this._am.getLocalManifest().isLoaded())\n        {\n            this._checkListener = new jsb.EventListenerAssetsManager(this._am, this.checkCb.bind(this));\n            cc.eventManager.addListener(this._checkListener, 1);\n\n            this._am.checkUpdate();\n        }\n    },\n\n    onDestroy: function () {\n        this._am && this._am.release();\n    }\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _huanpaitip:null,\n        _huanpaiArr:[]\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        this._huanpaitip = cc.find(\"Canvas/huansanzhang\");\n        this._huanpaitip.active = cc.vv.gameNetMgr.isHuanSanZhang;\n        \n        if(this._huanpaitip.active){\n            this.showHuanpai(cc.vv.gameNetMgr.getSelfData().huanpais == null);\n        }\n        this.initHuaipaiInfo();\n        \n        var btnOk = cc.find(\"Canvas/huansanzhang/btn_ok\");\n        if(btnOk){\n            cc.vv.utils.addClickEvent(btnOk,this.node,\"HuanSanZhang\",\"onHuanSanZhang\");\n        }\n        \n        var self = this;\n        \n        this.node.on('game_huanpai',function(data){\n           self._huanpaitip.active = true;\n           self.showHuanpai(true);\n        });\n        \n        this.node.on('huanpai_notify',function(data){\n            if(data.seatindex == cc.vv.gameNetMgr.seatIndex){\n                self.initHuaipaiInfo();    \n            }\n        });\n        \n        this.node.on('game_huanpai_over',function(data){\n            self._huanpaitip.active = false;\n            for(var i = 0; i < self._huanpaiArr.length; ++i){\n                self._huanpaiArr[i].y = 0;\n            }\n            self._huanpaiArr = [];\n            self.initHuaipaiInfo();\n        });\n        \n        this.node.on('game_huanpai_result',function(data){\n            cc.vv.gameNetMgr.isHuanSanZhang = false;\n            self._huanpaitip.active = false;\n            for(var i = 0; i < self._huanpaiArr.length; ++i){\n                self._huanpaiArr[i].y = 0;\n            }\n            self._huanpaiArr = [];\n        });\n        \n        this.node.on('mj_clicked',function(data){\n            var target = data;\n            //如果已经点起来，则取消\n            var idx = self._huanpaiArr.indexOf(target); \n            if(idx != -1){\n                target.y = 0;\n                self._huanpaiArr.splice(idx,1);\n            }\n            else{\n                //如果是新的，则加入\n                if(self._huanpaiArr.length < 3){\n                    self._huanpaiArr.push(target);\n                    target.y = 15;\n                }\n            } \n        });\n    },\n    \n    showHuanpai:function(interactable){\n        this._huanpaitip.getChildByName(\"info\").getComponent(cc.Label).string = \"请选择三张一样花色的牌\";\n        this._huanpaitip.getChildByName(\"btn_ok\").getComponent(cc.Button).interactable = interactable;\n        this._huanpaitip.getChildByName(\"mask\").active = false;        \n    },\n    \n    initHuaipaiInfo:function(){\n        var huaipaiinfo = cc.find(\"Canvas/game/huanpaiinfo\");\n        var seat = cc.vv.gameNetMgr.getSelfData();\n        if(seat.huanpais == null){\n            huaipaiinfo.active = false;\n            return;\n        }\n        huaipaiinfo.active = true;\n        for(var i = 0; i < seat.huanpais.length; ++i){\n            huaipaiinfo.getChildByName(\"hp\" + (i + 1)).getComponent(cc.Sprite).spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",seat.huanpais[i]);\n        }\n        \n        var hpm = huaipaiinfo.getChildByName(\"hpm\");\n        hpm.active = true;\n        if(cc.vv.gameNetMgr.huanpaimethod == 0){\n            hpm.rotation = 90;\n        }\n        else if(cc.vv.gameNetMgr.huanpaimethod == 1){\n            hpm.rotation = 0;\n        }\n        else if(cc.vv.gameNetMgr.huanpaimethod == 2){\n            hpm.rotation = 180;\n        }\n        else{\n            hpm.active = false;\n        }\n    },\n    \n    onHuanSanZhang:function(event){\n        if(this._huanpaiArr.length != 3){\n            return;\n        }\n        \n        var type = null;\n        for(var i = 0; i < this._huanpaiArr.length; ++i){\n            var pai = this._huanpaiArr[i].mjId;\n            var nt = cc.vv.mahjongmgr.getMahjongType(pai); \n            if(type == null){\n                type = nt;\n            }\n            else{\n                if(type != nt){\n                    return;\n                }\n            }\n        }\n        \n        var data = {\n            p1:this._huanpaiArr[0].mjId,\n            p2:this._huanpaiArr[1].mjId,\n            p3:this._huanpaiArr[2].mjId,\n        }\n        \n        this._huanpaitip.getChildByName(\"info\").getComponent(cc.Label).string = \"等待其他玩家选牌...\";\n        this._huanpaitip.getChildByName(\"btn_ok\").getComponent(cc.Button).interactable = false;\n        this._huanpaitip.getChildByName(\"mask\").active = true;\n        \n        cc.vv.net.send(\"huanpai\",data);\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n","function loadImage(url,code,callback){\n    /*\n    if(cc.vv.images == null){\n        cc.vv.images = {};\n    }\n    var imageInfo = cc.vv.images[url];\n    if(imageInfo == null){\n        imageInfo = {\n            image:null,\n            queue:[],\n        };\n        cc.vv.images[url] = imageInfo;\n    }\n    \n    cc.loader.load(url,function (err,tex) {\n        imageInfo.image = tex;\n        var spriteFrame = new cc.SpriteFrame(tex, cc.Rect(0, 0, tex.width, tex.height));\n        for(var i = 0; i < imageInfo.queue.length; ++i){\n            var itm = imageInfo.queue[i];\n            itm.callback(itm.code,spriteFrame);\n        }\n        itm.queue = [];\n    });\n    if(imageInfo.image != null){\n        var tex = imageInfo.image;\n        var spriteFrame = new cc.SpriteFrame(tex, cc.Rect(0, 0, tex.width, tex.height));\n        callback(code,spriteFrame);\n    }\n    else{\n        imageInfo.queue.push({code:code,callback:callback});\n    }*/\n    cc.loader.load(url,function (err,tex) {\n        var spriteFrame = new cc.SpriteFrame(tex, cc.Rect(0, 0, tex.width, tex.height));\n        callback(code,spriteFrame);\n    });\n};\n\nfunction getBaseInfo(userid,callback){\n    if(cc.vv.baseInfoMap == null){\n        cc.vv.baseInfoMap = {};\n    }\n    \n    if(cc.vv.baseInfoMap[userid] != null){\n        callback(userid,cc.vv.baseInfoMap[userid]);\n    }\n    else{\n        cc.vv.http.sendRequest('/base_info',{userid:userid},function(ret){\n            var url = null;\n            if(ret.headimgurl){\n               url = ret.headimgurl + \".jpg\";\n            }\n            var info = {\n                name:ret.name,\n                sex:ret.sex,\n                url:url,\n            }\n            cc.vv.baseInfoMap[userid] = info;\n            callback(userid,info);\n            \n        },cc.vv.http.master_url);   \n    }  \n};\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        this.setupSpriteFrame();\n    },\n    \n    setUserID:function(userid){\n        if(cc.sys.isNative == false){\n            return;\n        }\n        if(!userid){\n            return;\n        }\n        if(cc.vv.images == null){\n            cc.vv.images = {};\n        }\n        \n        var self = this;\n        getBaseInfo(userid,function(code,info){\n           if(info && info.url){\n                loadImage(info.url,userid,function (err,spriteFrame) {\n                    self._spriteFrame = spriteFrame;\n                    self.setupSpriteFrame();\n                });   \n            } \n        });\n    },\n    \n    setupSpriteFrame:function(){\n        if(this._spriteFrame){\n            var spr = this.getComponent(cc.Sprite);\n            if(spr){\n                spr.spriteFrame = this._spriteFrame;    \n            }\n        }\n    }\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        nums:{\n            default:[],\n            type:[cc.Label]\n        },\n        _inputIndex:0,\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        lblJoinGameRoom: cc.Label,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        this.lblJoinGameRoom.node.color = new cc.Color().fromHEX(\"#A82121\");\n        this.lblJoinGameRoom.enableBold = true;\n    },\n    \n    onEnable:function(){\n        this.onResetClicked();\n    },\n    \n    onInputFinished:function(roomId){\n        cc.vv.userMgr.enterRoom(roomId,function(ret){\n            if(ret.errcode == 0){\n                this.node.active = false;\n            }\n            else{\n                var content = \"房间[\"+ roomId +\"]不存在，请重新输入!\";\n                if(ret.errcode == 4){\n                    content = \"房间[\"+ roomId + \"]已满!\";\n                }\n                cc.vv.alert.show(\"提示\",content);\n                this.onResetClicked();\n            }\n        }.bind(this)); \n    },\n    \n    onInput:function(num){\n        if(this._inputIndex >= this.nums.length){\n            return;\n        }\n        this.nums[this._inputIndex].string = num;\n        this._inputIndex += 1;\n        \n        if(this._inputIndex == this.nums.length){\n            var roomId = this.parseRoomID();\n            console.log(\"ok:\" + roomId);\n            this.onInputFinished(roomId);\n        }\n    },\n    \n    onN0Clicked:function(){\n        this.onInput(0);  \n    },\n    onN1Clicked:function(){\n        this.onInput(1);  \n    },\n    onN2Clicked:function(){\n        this.onInput(2);\n    },\n    onN3Clicked:function(){\n        this.onInput(3);\n    },\n    onN4Clicked:function(){\n        this.onInput(4);\n    },\n    onN5Clicked:function(){\n        this.onInput(5);\n    },\n    onN6Clicked:function(){\n        this.onInput(6);\n    },\n    onN7Clicked:function(){\n        this.onInput(7);\n    },\n    onN8Clicked:function(){\n        this.onInput(8);\n    },\n    onN9Clicked:function(){\n        this.onInput(9);\n    },\n    onResetClicked:function(){\n        for(var i = 0; i < this.nums.length; ++i){\n            this.nums[i].string = \"\";\n        }\n        this._inputIndex = 0;\n    },\n    onDelClicked:function(){\n        if(this._inputIndex > 0){\n            this._inputIndex -= 1;\n            this.nums[this._inputIndex].string = \"\";\n        }\n    },\n    onCloseClicked:function(){\n        this.node.active = false;\n    },\n    \n    parseRoomID:function(){\n        var str = \"\";\n        for(var i = 0; i < this.nums.length; ++i){\n            str += this.nums[i].string;\n        }\n        return str;\n    }\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n","//咋这个编译器中黄色代表函数（方法），蓝色代表变量和方法名，就是标识符，深蓝就是代表关键字\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        //这个是正在连接网路的字符串..\n        tipLabel:cc.Label,\n        //声明这个变量是为了给上面的变量赋值\n        _stateStr:'',\n        //定义一个计算数值的变量\n        _progress:0.0,\n        //定义一个splash来找到canvas的字节点\n        _splash:null,\n\n        _isLoading:false,\n    },\n\n    // use this for initialization\n    //初始化一般这个脚本中执行\n    onLoad: function () {\n        //首先执行这个方法\n        //先来得到Canvas组件，并且吧fitHeight设置为true。fitWidth = true，场景刚加载的时候我需要干什么\n        if(!cc.sys.isNative && cc.sys.isMobile){\n            //得到this.node.getComponent（cc.Canvas）\n            var cvs = this.node.getComponent(cc.Canvas);//得到本脚挂的本节点的组件Canvas\n            cvs.fitHeight = true;//设置是适配度\n            cvs.fitWidth = true;\n        }\n        this.initMgr();//初始化\n        this.tipLabel.string = this._stateStr;//这里是吧_stateStr:''，这个值给这个节点（tipLabel:cc.Label,）的string属性，_stateStr:''这个值在前面已经改变。\n        \n        this._splash = cc.find(\"Canvas/splash\");//把Canvas下的splash节点给this._splash.\n\n        this._splash.active = false;//将他的active设置为true\n        \n    },\n\n    //onEnable: function(){},\n    \n    start:function(){\n        //脚本及激活的时候我需要干的事情\n        var self = this;//记录一下本方法的this\n        var SHOW_TIME = 3000;//声明两个局部时间变量\n        var FADE_TIME = 500;\n        // if(cc.sys.os != cc.sys.OS_IOS || !cc.sys.isNative){\n        //     self._splash.active = true;\n        //     var t = Date.now();\n        //     var fn = function(){\n        //         var dt = Date.now() - t;\n        //         if(dt < SHOW_TIME){\n        //             setTimeout(fn,33);\n        //         }\n        //         else {\n        //             var op = (1 - ((dt - SHOW_TIME) / FADE_TIME)) * 255;\n        //             if(op < 0){\n        //                 self._splash.opacity = 0;\n        //                 self.checkVersion();    \n        //             }\n        //             else{\n        //                 self._splash.opacity = op;\n        //                 setTimeout(fn,33);   \n        //             }\n        //         }\n        //     };\n        //     setTimeout(fn,33);\n        // }\n        // else{\n        //     this._splash.active = false;\n        //     this.checkVersion();\n        // }\n        this.checkVersion();//这是核对版本的方法\n    },\n\n    // update: function(){},\n    // lateUpdate: function(){},\n    // onDisable: function(){\n\n    // },\n\n    // onDestroy: function(){\n\n    // },\n    \n    initMgr:function(){\n       //这些都是一些全局可能用到的脚本\n        //初始化函数，得到一些Script脚本，并对这些脚本进行初始化\n        cc.vv = {};//创建一个空的函数对象,实例化脚本\n        var UserMgr = require(\"UserMgr\");//获取脚本的名称\n        cc.vv.userMgr = new UserMgr();  //实例化这个脚本\n\n        var ReplayMgr = require(\"ReplayMgr\");\n        cc.vv.replayMgr = new ReplayMgr();\n        \n        cc.vv.http = require(\"HTTP\");\n        cc.vv.global = require(\"Global\");\n        cc.vv.net = require(\"Net\");\n        //游戏管理这个脚本是说我和客服端和服务器连发消息的纽带\n        var GameNetMgr = require(\"GameNetMgr\");\n        cc.vv.gameNetMgr = new GameNetMgr();\n        cc.vv.gameNetMgr.initHandlers();\n        // 一些原生接口的管理\n\n        var AnysdkMgr = require(\"AnysdkMgr\");\n        cc.vv.anysdkMgr = new AnysdkMgr();\n        cc.vv.anysdkMgr.init();\n        //这是声音的管里\n        var VoiceMgr = require(\"VoiceMgr\");\n        cc.vv.voiceMgr = new VoiceMgr();\n        cc.vv.voiceMgr.init();\n        \n\n        var AudioMgr = require(\"AudioMgr\");\n        cc.vv.audioMgr = new AudioMgr();\n        cc.vv.audioMgr.init();\n        \n        var Utils = require(\"Utils\");\n        cc.vv.utils = new Utils();\n        //记住的cc.args是跟获取地址字符串有关的东西\n        cc.args = this.urlParse(); //把方法给这个变量\n    },\n    \n    urlParse:function(){\n        var params = {};\n        if(window.location == null){\n            return params;\n        }\n        var name,value; \n        var str=window.location.href; //取得整个地址栏\n        \n        var num=str.indexOf(\"?\")\n        str=str.substr(num+1); //取得所有参数   stringvar.substr(start [, length ]\n        \n        var arr=str.split(\"&\"); //各个参数放到数组里\n        for(var i=0;i < arr.length;i++){ \n            num=arr[ i].indexOf(\"=\"); \n            if(num>0){ \n                name=arr[i].substring(0,num);\n                value=arr[i].substr(num+1);\n                params[name]=value;\n            } \n        }\n        return params;\n    },\n    \n    checkVersion:function(){\n        var self = this;\n        var onGetVersion = function(ret){\n            if(ret.version == null){\n                console.log(\"error.\");\n            }\n            else{\n                //cc.vv.SI = 服务端穿过来的数据这里面饱含了服务器的hallAddr = config.HALL_IP  + \":\" + config.HALL_EXT_PORT;\n                cc.vv.SI = ret;\n                if(ret.version != cc.VERSION){\n                    cc.find(\"Canvas/alert\").active = true;\n                }\n                else{\n                    self.startPreloading();\n                }\n            }\n        };\n        \n        var xhr = null;\n        var complete = false;\n        var fnRequest = function(){\n            self._stateStr = \"正在连接服务器\";\n            xhr = cc.vv.http.sendRequest(\"/get_serverinfo\",null,function(ret){\n                xhr = null;\n                complete = true;\n                onGetVersion(ret);\n            });\n            setTimeout(fn,5000);            \n        }\n        \n        var fn = function(){\n            if(!complete){\n                if(xhr){\n                    xhr.abort();//如果请求已经被发送，则立刻停止\n                    self._stateStr = \"连接失败，即将重试\";\n                    setTimeout(function(){\n                        fnRequest();\n                    },5000);\n                }\n                else{\n                    fnRequest();\n                }\n            }\n        };\n        fn();\n    },\n    \n    onBtnDownloadClicked:function(){\n        cc.sys.openURL(cc.vv.SI.appweb);\n    },\n    \n    startPreloading:function(){\n        this._stateStr = \"正在加载资源，请稍候\";\n        this._isLoading = true;\n        var self = this;\n        //重写onProgress函数\n        // cc.loader.onProgress = function ( completedCount, totalCount,  item ){\n        //     //console.log(\"completedCount:\" + completedCount + \",totalCount:\" + totalCount );\n        //     if(self._isLoading){\n        //         self._progress = completedCount/totalCount;\n        //     }\n        // };\n        \n        cc.loader.loadResDir(\"textures\", function ( completedCount, totalCount,  item ){\n            //console.log(\"completedCount:\" + completedCount + \",totalCount:\" + totalCount );\n             if(self._isLoading){\n                self._progress = completedCount/totalCount;\n                //self.tipLabel.string = Math.floor(self._progress * 100) + \"%\"; \n            }\n        }, function (err, assets) {\n            self.onLoadComplete();\n        });      \n    },\n    \n    onLoadComplete:function(){\n        this._isLoading = false;\n        this._stateStr = \"准备登陆\";\n        cc.director.loadScene(\"login\");//进入下一个页面\n        cc.loader.onComplete = null;\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    update: function (dt) {\n        if(this._stateStr.length == 0){\n            return;\n        }\n        this.tipLabel.string = this._stateStr + ' ';\n        if(this._isLoading){\n            this.tipLabel.string += Math.floor(this._progress * 100) + \"%\";   \n        }\n        else{\n            var t = Math.floor(Date.now() / 1000) % 4;\n            for(var i = 0; i < t; ++ i){\n                this.tipLabel.string += '.';\n            }            \n        }\n    }\n\n});","String.prototype.format = function(args) { \n    if (arguments.length>0) { \n        var result = this; \n        if (arguments.length == 1 && typeof (args) == \"object\") { \n            for (var key in args) { \n                var reg=new RegExp (\"({\"+key+\"})\",\"g\"); \n                result = result.replace(reg, args[key]); \n            } \n        } \n        else { \n            for (var i = 0; i < arguments.length; i++) { \n                if(arguments[i]==undefined) { \n                    return \"\"; \n                } \n                else { \n                    var reg=new RegExp (\"({[\"+i+\"]})\",\"g\"); \n                    result = result.replace(reg, arguments[i]); \n                } \n            } \n        } \n        return result; \n    } \n    else { \n        return this; \n    } \n};\n \ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _mima:null,\n        _mimaIndex:0,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        if(!cc.sys.isNative && cc.sys.isMobile){\n            var cvs = this.node.getComponent(cc.Canvas);\n            cvs.fitHeight = true;\n            cvs.fitWidth = true;\n        }\n        \n        if(!cc.vv){\n            cc.director.loadScene(\"loading\");\n            return;\n        }\n        cc.vv.http.url = cc.vv.http.master_url;\n        //接受服务器传来的信息\n        cc.vv.net.addHandler('push_need_create_role',function(){\n            console.log(\"onLoad:push_need_create_role\");\n            cc.director.loadScene(\"createrole\");\n        });\n        \n        cc.vv.audioMgr.playBGM(\"bgMain.mp3\");\n        \n        this._mima = [\"A\",\"A\",\"B\",\"B\",\"A\",\"B\",\"A\",\"B\",\"A\",\"A\",\"A\",\"B\",\"B\",\"B\"];\n        \n        if(!cc.sys.isNative || cc.sys.os == cc.sys.OS_WINDOWS){\n            cc.find(\"Canvas/btn_yk\").active = true;    \n        }\n\n        cc.find(\"Canvas/btn_yk\").active = true;\n    },\n    \n    start:function(){\n        var account =  cc.sys.localStorage.getItem(\"wx_account\");\n        var sign = cc.sys.localStorage.getItem(\"wx_sign\");\n        if(account != null && sign != null){\n            var ret = {\n                errcode:0,\n                account:account,\n                sign:sign\n            }\n            cc.vv.userMgr.onAuth(ret);\n        }   \n    },\n    \n    onBtnQuickStartClicked:function(){\n        cc.vv.userMgr.guestAuth();\n    },\n    \n    onBtnWeichatClicked:function(){\n        var self = this;\n            cc.vv.anysdkMgr.login();\n    },\n    \n    onBtnMIMAClicked:function(event){\n        // if(this._mima[this._mimaIndex] == event.target.name){\n        //     this._mimaIndex++;\n        //     if(this._mimaIndex == this._mima.length){\n                cc.find(\"Canvas/btn_yk\").active = true;\n        //     }\n        // }\n        // else{\n        //     console.log(\"oh ho~~~\");\n        //     this._mimaIndex = 0;\n        // }\n    }\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {        \n        gameRoot:{\n            default:null,\n            type:cc.Node\n        },\n        \n        prepareRoot:{\n            default:null,\n            type:cc.Node   \n        },\n        \n        _myMJArr:[],\n        _options:null,\n        _selectedMJ:null,\n        _chupaiSprite:[],\n        _mjcount:null,\n        _gamecount:null,\n        _hupaiTips:[],\n        _hupaiLists:[],\n        _playEfxs:[],\n        _opts:[],\n    },\n    \n    onLoad: function () {\n        if(!cc.sys.isNative && cc.sys.isMobile){\n            var cvs = this.node.getComponent(cc.Canvas);\n            cvs.fitHeight = true;\n            cvs.fitWidth = true;\n        }\n        if(!cc.vv){\n            cc.director.loadScene(\"loading\");\n            return;\n        }\n        this.addComponent(\"NoticeTip\");\n        this.addComponent(\"GameOver\");\n        //从这里判断\n         if(cc.vv.gameNetMgr.conf.type != \"rzmj\" ){\n              this.addComponent(\"DingQue\");\n        }\n       \n        //this.addComponent(\"DingQue\");\n        this.addComponent(\"PengGangs\");\n        this.addComponent(\"MJRoom\");\n        this.addComponent(\"TimePointer\");\n        this.addComponent(\"GameResult\");\n        this.addComponent(\"Chat\");\n        this.addComponent(\"Folds\");\n        this.addComponent(\"ReplayCtrl\");\n        this.addComponent(\"PopupMgr\");\n        this.addComponent(\"HuanSanZhang\");\n        this.addComponent(\"ReConnect\");\n        this.addComponent(\"Voice\");\n        this.addComponent(\"UserInfoShow\");\n        \n        this.initView();\n        this.initEventHandlers();\n        \n        this.gameRoot.active = false;\n        this.prepareRoot.active = true;\n        this.initWanfaLabel();\n        this.onGameBeign();\n        cc.vv.audioMgr.playBGM(\"bgFight.mp3\");\n    },\n    \n    initView:function(){\n        \n        //搜索需要的子节点\n        var gameChild = this.node.getChildByName(\"game\");\n        \n        this._mjcount = gameChild.getChildByName('mjcount').getComponent(cc.Label);\n        this._mjcount.string = \"剩余\" + cc.vv.gameNetMgr.numOfMJ + \"张\";\n        this._gamecount = gameChild.getChildByName('gamecount').getComponent(cc.Label);\n        this._gamecount.string = \"\" + cc.vv.gameNetMgr.numOfGames + \"/\" + cc.vv.gameNetMgr.maxNumOfGames + \"局\";\n\n        var myselfChild = gameChild.getChildByName(\"myself\");\n        var myholds = myselfChild.getChildByName(\"holds\");\n        \n        for(var i = 0; i < myholds.children.length; ++i){\n            var sprite = myholds.children[i].getComponent(cc.Sprite);\n            this._myMJArr.push(sprite);\n            sprite.spriteFrame = null;\n        }\n        \n        var realwidth = cc.view.getVisibleSize().width;\n        myholds.scaleX *= realwidth/1280;\n        myholds.scaleY *= realwidth/1280;  \n        \n        var sides = [\"myself\",\"right\",\"up\",\"left\"];\n        for(var i = 0; i < sides.length; ++i){\n            var side = sides[i];\n            \n            var sideChild = gameChild.getChildByName(side);\n            this._hupaiTips.push(sideChild.getChildByName(\"HuPai\"));\n            this._hupaiLists.push(sideChild.getChildByName(\"hupailist\"));\n            this._playEfxs.push(sideChild.getChildByName(\"play_efx\").getComponent(cc.Animation));\n            this._chupaiSprite.push(sideChild.getChildByName(\"ChuPai\").children[0].getComponent(cc.Sprite));\n            \n            var opt = sideChild.getChildByName(\"opt\");\n            opt.active = false;\n            var sprite = opt.getChildByName(\"pai\").getComponent(cc.Sprite);\n            var data = {\n                node:opt,\n                sprite:sprite\n            };\n            this._opts.push(data);\n        }\n        \n        var opts = gameChild.getChildByName(\"ops\");\n        this._options = opts;\n        this.hideOptions();\n        this.hideChupai();\n    },\n    \n    hideChupai:function(){\n        for(var i = 0; i < this._chupaiSprite.length; ++i){\n            this._chupaiSprite[i].node.active = false;\n        }        \n    },\n    \n    initEventHandlers:function(){\n        cc.vv.gameNetMgr.dataEventHandler = this.node;\n        \n        //初始化事件监听器\n        var self = this;\n        \n        this.node.on('game_holds',function(data){\n           self.initMahjongs();\n           self.checkQueYiMen();\n        });\n        \n        this.node.on('game_begin',function(data){\n            self.onGameBeign();\n        });\n        \n        this.node.on('game_sync',function(data){\n            self.onGameBeign();\n        });\n        \n        this.node.on('game_chupai',function(data){\n            self.hideChupai();\n            self.checkQueYiMen();\n            if(data.last != cc.vv.gameNetMgr.seatIndex){\n                self.initMopai(data.last,null);   \n            }\n            if(!cc.vv.replayMgr.isReplay() && data.turn != cc.vv.gameNetMgr.seatIndex){\n                self.initMopai(data.turn,-1);\n            }\n        });\n        \n        this.node.on('game_mopai',function(data){\n            self.hideChupai();\n            data = data;\n            var pai = data.pai;\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(data.seatIndex);\n            if(localIndex == 0){\n                var index = 13;\n                var sprite = self._myMJArr[index];\n                self.setSpriteFrameByMJID(\"M_\",sprite,pai,index);\n                sprite.node.mjId = pai;                \n            }\n            else if(cc.vv.replayMgr.isReplay()){\n                self.initMopai(data.seatIndex,pai);\n            }\n        });\n        \n        this.node.on('game_action',function(data){\n            self.showAction(data);\n        });\n        \n        this.node.on('hupai',function(data){\n            var data = data;\n            //如果不是玩家自己，则将玩家的牌都放倒\n            var seatIndex = data.seatindex;\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatIndex);\n            var hupai = self._hupaiTips[localIndex];\n            hupai.active = true;\n            \n            if(localIndex == 0){\n                self.hideOptions();\n            }\n            var seatData = cc.vv.gameNetMgr.seats[seatIndex];\n            seatData.hued = true;\n            if(cc.vv.gameNetMgr.conf.type == \"xlch\"){\n                hupai.getChildByName(\"sprHu\").active = true;\n                hupai.getChildByName(\"sprZimo\").active = false;\n                self.initHupai(localIndex,data.hupai);\n                if(data.iszimo){\n                    if(seatData.seatindex == cc.vv.gameNetMgr.seatIndex){\n                        seatData.holds.pop();\n                        self.initMahjongs();                \n                    }\n                    else{\n                        self.initOtherMahjongs(seatData);\n                    }\n                } \n            }\n            else{\n                hupai.getChildByName(\"sprHu\").active = !data.iszimo;\n                hupai.getChildByName(\"sprZimo\").active = data.iszimo;\n                \n                if(!(data.iszimo && localIndex==0))\n                {\n                    //if(cc.vv.replayMgr.isReplay() == false && localIndex != 0){\n                    //    self.initEmptySprites(seatIndex);                \n                    //}\n                    self.initMopai(seatIndex,data.hupai);\n                }                                         \n            }\n            \n            if(cc.vv.replayMgr.isReplay() == true && cc.vv.gameNetMgr.conf.type != \"xlch\"){\n                var opt = self._opts[localIndex];\n                opt.node.active = true;\n                opt.sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",data.hupai);                \n            }\n            \n            if(data.iszimo){\n                self.playEfx(localIndex,\"play_zimo\");    \n            }\n            else{\n                self.playEfx(localIndex,\"play_hu\");\n            }\n            \n            cc.vv.audioMgr.playSFX(\"nv/hu.mp3\");\n        });\n        \n        this.node.on('mj_count',function(data){\n            self._mjcount.string = \"剩余\" + cc.vv.gameNetMgr.numOfMJ + \"张\";\n        });\n        \n        this.node.on('game_num',function(data){\n            self._gamecount.string = \"\" + cc.vv.gameNetMgr.numOfGames + \"/\" + cc.vv.gameNetMgr.maxNumOfGames + \"局\";\n        });\n        \n        this.node.on('game_over',function(data){\n            self.gameRoot.active = false;\n            self.prepareRoot.active = true;\n        });\n        \n        \n        this.node.on('game_chupai_notify',function(data){\n            console.log(\"出的牌的数据\"+data);\n            self.hideChupai();\n            var seatData = data.seatData;\n            //如果是自己，则刷新手牌\n            if(seatData.seatindex == cc.vv.gameNetMgr.seatIndex){\n                self.initMahjongs();                \n            }\n            else{\n                self.initOtherMahjongs(seatData);\n            }\n            self.showChupai();\n            var audioUrl = cc.vv.mahjongmgr.getAudioURLByMJID(data.pai);\n            cc.vv.audioMgr.playSFX(audioUrl);\n        });\n        \n        this.node.on('guo_notify',function(data){\n            self.hideChupai();\n            self.hideOptions();\n            var seatData = data;\n            //如果是自己，则刷新手牌\n            if(seatData.seatindex == cc.vv.gameNetMgr.seatIndex){\n                self.initMahjongs();                \n            }\n            cc.vv.audioMgr.playSFX(\"give.mp3\");\n        });\n        \n        this.node.on('guo_result',function(data){\n            self.hideOptions();\n        });\n        \n        this.node.on('game_dingque_finish',function(data){\n            self.initMahjongs();\n        });\n        \n        this.node.on('peng_notify',function(data){    \n            self.hideChupai();\n            \n            var seatData = data;\n            if(seatData.seatindex == cc.vv.gameNetMgr.seatIndex){\n                self.initMahjongs();                \n            }\n            else{\n                self.initOtherMahjongs(seatData);\n            }\n            var localIndex = self.getLocalIndex(seatData.seatindex);\n            self.playEfx(localIndex,\"play_peng\");\n            cc.vv.audioMgr.playSFX(\"nv/peng.mp3\");\n            self.hideOptions();\n        });\n        \n        this.node.on('gang_notify',function(data){\n            self.hideChupai();\n            var data = data;\n            var seatData = data.seatData;\n            var gangtype = data.gangtype;\n            if(seatData.seatindex == cc.vv.gameNetMgr.seatIndex){\n                self.initMahjongs();                \n            }\n            else{\n                self.initOtherMahjongs(seatData);\n            }\n            \n            var localIndex = self.getLocalIndex(seatData.seatindex);\n            if(gangtype == \"wangang\"){\n                self.playEfx(localIndex,\"play_guafeng\");\n                cc.vv.audioMgr.playSFX(\"guafeng.mp3\");\n            }\n            else{\n                self.playEfx(localIndex,\"play_xiayu\");\n                cc.vv.audioMgr.playSFX(\"rain.mp3\");\n            }\n        });\n        \n        this.node.on(\"hangang_notify\",function(data){\n            var data = data;\n            var localIndex = self.getLocalIndex(data);\n            self.playEfx(localIndex,\"play_gang\");\n            cc.vv.audioMgr.playSFX(\"nv/gang.mp3\");\n            self.hideOptions();\n        });\n    },\n    \n    showChupai:function(){\n        var pai = cc.vv.gameNetMgr.chupai; \n        if( pai >= 0 ){\n            //\n            var localIndex = this.getLocalIndex(cc.vv.gameNetMgr.turn);\n            var sprite = this._chupaiSprite[localIndex];\n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai);\n            sprite.node.active = true;   \n        }\n    },\n    \n    addOption:function(btnName,pai){\n        for(var i = 0; i < this._options.childrenCount; ++i){\n            var child = this._options.children[i]; \n            if(child.name == \"op\" && child.active == false){\n                child.active = true;\n                var sprite = child.getChildByName(\"opTarget\").getComponent(cc.Sprite);\n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(\"M_\",pai);\n                var btn = child.getChildByName(btnName); \n                btn.active = true;\n                btn.pai = pai;\n                return;\n            }\n        }\n    },\n    \n    hideOptions:function(data){\n        this._options.active = false;\n        for(var i = 0; i < this._options.childrenCount; ++i){\n            var child = this._options.children[i]; \n            if(child.name == \"op\"){\n                child.active = false;\n                child.getChildByName(\"btnPeng\").active = false;\n                child.getChildByName(\"btnGang\").active = false;\n                child.getChildByName(\"btnHu\").active = false;\n            }\n        }\n    },\n    \n    showAction:function(data){\n        if(this._options.active){\n            this.hideOptions();\n        }\n        \n        if(data && (data.hu || data.gang || data.peng)){\n            this._options.active = true;\n            if(data.hu){\n                this.addOption(\"btnHu\",data.pai);\n            }\n            if(data.peng){\n                this.addOption(\"btnPeng\",data.pai);\n            }\n            \n            if(data.gang){\n                for(var i = 0; i < data.gangpai.length;++i){\n                    var gp = data.gangpai[i];\n                    this.addOption(\"btnGang\",gp);\n                }\n            }   \n        }\n    },\n    \n    initWanfaLabel:function(){\n        var wanfa = cc.find(\"Canvas/infobar/wanfa\").getComponent(cc.Label);\n        wanfa.string = cc.vv.gameNetMgr.getWanfa();\n    },\n    \n    initHupai:function(localIndex,pai){\n        if(cc.vv.gameNetMgr.conf.type == \"xlch\"){\n            var hupailist = this._hupaiLists[localIndex];\n            for(var i = 0; i < hupailist.children.length; ++i){\n                var hupainode = hupailist.children[i]; \n                if(hupainode.active == false){\n                    var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\n                    hupainode.getComponent(cc.Sprite).spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,pai);\n                    hupainode.active = true;\n                    break;\n                }\n            }   \n        }\n    },\n    \n    playEfx:function(index,name){\n        this._playEfxs[index].node.active = true;\n        this._playEfxs[index].play(name);\n    },\n    \n    onGameBeign:function(){\n        \n        for(var i = 0; i < this._playEfxs.length; ++i){\n            this._playEfxs[i].node.active = false;\n        }\n        \n        for(var i = 0; i < this._hupaiLists.length; ++i){\n            for(var j = 0; j < this._hupaiLists[i].childrenCount; ++j){\n                this._hupaiLists[i].children[j].active = false;\n            }\n        }\n        \n        for(var i = 0; i < cc.vv.gameNetMgr.seats.length; ++i){\n            var seatData = cc.vv.gameNetMgr.seats[i];\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(i);        \n            var hupai = this._hupaiTips[localIndex];\n            hupai.active = seatData.hued;\n            if(seatData.hued){\n                hupai.getChildByName(\"sprHu\").active = !seatData.iszimo;\n                hupai.getChildByName(\"sprZimo\").active = seatData.iszimo;\n            }\n            \n            if(seatData.huinfo){\n                for(var j = 0; j < seatData.huinfo.length; ++j){\n                    var info = seatData.huinfo[j];\n                    if(info.ishupai){\n                        this.initHupai(localIndex,info.pai);    \n                    }\n                }\n            }\n        }\n        \n        this.hideChupai();\n        this.hideOptions();\n        var sides = [\"right\",\"up\",\"left\"];        \n        var gameChild = this.node.getChildByName(\"game\");\n        for(var i = 0; i < sides.length; ++i){\n            var sideChild = gameChild.getChildByName(sides[i]);\n            var holds = sideChild.getChildByName(\"holds\");\n            for(var j = 0; j < holds.childrenCount; ++j){\n                var nc = holds.children[j];\n                nc.active = true;\n                nc.scaleX = 1.0;\n                nc.scaleY = 1.0;\n                var sprite = nc.getComponent(cc.Sprite); \n                sprite.spriteFrame = cc.vv.mahjongmgr.holdsEmpty[i+1];\n            }            \n        }\n      \n        if(cc.vv.gameNetMgr.gamestate == \"\" && cc.vv.replayMgr.isReplay() == false){\n            return;\n        }\n\n        this.gameRoot.active = true;\n        this.prepareRoot.active = false;\n        this.initMahjongs();\n        var seats = cc.vv.gameNetMgr.seats;\n        for(var i in seats){\n            var seatData = seats[i];\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(i);\n            if(localIndex != 0){\n                this.initOtherMahjongs(seatData);\n                if(i == cc.vv.gameNetMgr.turn){\n                    this.initMopai(i,-1);\n                }\n                else{\n                    this.initMopai(i,null);    \n                }\n            }\n        }\n        this.showChupai();\n        if(cc.vv.gameNetMgr.curaction != null){\n            this.showAction(cc.vv.gameNetMgr.curaction);\n            cc.vv.gameNetMgr.curaction = null;\n        }\n        \n        this.checkQueYiMen();\n    },\n    \n    onMJClicked:function(event){\n        if(cc.vv.gameNetMgr.isHuanSanZhang){\n            this.node.emit(\"mj_clicked\",event.target);\n            return;\n        }\n        \n        //如果不是自己的轮子，则忽略\n        if(cc.vv.gameNetMgr.turn != cc.vv.gameNetMgr.seatIndex){\n            console.log(\"not your turn.\" + cc.vv.gameNetMgr.turn);\n            return;\n        }\n        \n        for(var i = 0; i < this._myMJArr.length; ++i){\n            if(event.target == this._myMJArr[i].node){\n                //如果是再次点击，则出牌\n                if(event.target == this._selectedMJ){\n                    console.log(\"我的牌的ID\"+this._selectedMJ.mjId);\n                    this.shoot(this._selectedMJ.mjId); \n                    this._selectedMJ.y = 0;\n                    this._selectedMJ = null;\n                    return;\n                }\n                if(this._selectedMJ != null){\n                    this._selectedMJ.y = 0;\n                }\n                event.target.y = 15;\n                this._selectedMJ = event.target;\n                return;\n            }\n        }\n    },\n    \n    //出牌\n    shoot:function(mjId){\n        if(mjId == null){\n             console.log(\"我向服务器传送我出的牌\"+mjId);\n            return;\n        }\n       \n        cc.vv.net.send('chupai',mjId);\n    },\n    \n    getMJIndex:function(side,index){\n        if(side == \"right\" || side == \"up\"){\n            return 13 - index;\n        }\n        return index;\n    },\n    \n    initMopai:function(seatIndex,pai){\n        var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatIndex);\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\n        \n        var gameChild = this.node.getChildByName(\"game\");\n        var sideChild = gameChild.getChildByName(side);\n        var holds = sideChild.getChildByName(\"holds\");\n\n        var lastIndex = this.getMJIndex(side,13);\n        var nc = holds.children[lastIndex];\n\n        nc.scaleX = 1.0;\n        nc.scaleY = 1.0;\n                        \n        if(pai == null){\n            nc.active = false;\n        }\n        else if(pai >= 0){\n            nc.active = true;\n            if(side == \"up\"){\n                nc.scaleX = 0.73;\n                nc.scaleY = 0.73;                    \n            }\n            var sprite = nc.getComponent(cc.Sprite); \n            sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,pai);\n        }\n        else if(pai != null){\n            nc.active = true;\n            if(side == \"up\"){\n                nc.scaleX = 1.0;\n                nc.scaleY = 1.0;                    \n            }\n            var sprite = nc.getComponent(cc.Sprite); \n            sprite.spriteFrame = cc.vv.mahjongmgr.getHoldsEmptySpriteFrame(side);\n        }\n    },\n    \n    initEmptySprites:function(seatIndex){\n        var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatIndex);\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\n        \n        var gameChild = this.node.getChildByName(\"game\");\n        var sideChild = gameChild.getChildByName(side);\n        var holds = sideChild.getChildByName(\"holds\");\n        var spriteFrame = cc.vv.mahjongmgr.getEmptySpriteFrame(side);\n        for(var i = 0; i < holds.childrenCount; ++i){\n            var nc = holds.children[i];\n            nc.scaleX = 1.0;\n            nc.scaleY = 1.0;\n            \n            var sprite = nc.getComponent(cc.Sprite); \n            sprite.spriteFrame = spriteFrame;\n        }\n    },\n    \n    initOtherMahjongs:function(seatData){\n        //console.log(\"seat:\" + seatData.seatindex);\n        var localIndex = this.getLocalIndex(seatData.seatindex);\n        if(localIndex == 0){\n            return;\n        }\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\n        var game = this.node.getChildByName(\"game\");\n        var sideRoot = game.getChildByName(side);\n        var sideHolds = sideRoot.getChildByName(\"holds\");\n        var num = seatData.pengs.length + seatData.angangs.length + seatData.diangangs.length + seatData.wangangs.length;\n        num *= 3;\n        for(var i = 0; i < num; ++i){\n            var idx = this.getMJIndex(side,i);\n            sideHolds.children[idx].active = false;\n        }\n        \n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\n        var holds = this.sortHolds(seatData);\n        if(holds != null && holds.length > 0){\n            for(var i = 0; i < holds.length; ++i){\n                var idx = this.getMJIndex(side,i + num);\n                var sprite = sideHolds.children[idx].getComponent(cc.Sprite); \n                if(side == \"up\"){\n                    sprite.node.scaleX = 0.73;\n                    sprite.node.scaleY = 0.73;                    \n                }\n                sprite.node.active = true;\n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,holds[i]);\n            }\n            \n            if(holds.length + num == 13){\n                var lasetIdx = this.getMJIndex(side,13);\n                sideHolds.children[lasetIdx].active = false;\n            }\n        }\n    },\n    \n    sortHolds:function(seatData){\n        var holds = seatData.holds;\n        if(holds == null){\n            return null;\n        }\n        //如果手上的牌的数目是2,5,8,11,14，表示最后一张牌是刚摸到的牌\n        var mopai = null;\n        var l = holds.length \n        if( l == 2 || l == 5 || l == 8 || l == 11 || l == 14){\n            mopai = holds.pop();\n        }\n        \n        var dingque = seatData.dingque;\n        cc.vv.mahjongmgr.sortMJ(holds,dingque);\n        \n        //将摸牌添加到最后\n        if(mopai != null){\n            holds.push(mopai);\n        }\n        return holds;\n    },\n    \n    initMahjongs:function(){\n        var seats = cc.vv.gameNetMgr.seats;\n        var seatData = seats[cc.vv.gameNetMgr.seatIndex];\n        var holds = this.sortHolds(seatData);\n        if(holds == null){\n            return;\n        }\n        \n        //初始化手牌\n        var lackingNum = (seatData.pengs.length + seatData.angangs.length + seatData.diangangs.length + seatData.wangangs.length)*3;\n        for(var i = 0; i < holds.length; ++i){\n            var mjid = holds[i];\n            var sprite = this._myMJArr[i + lackingNum];\n            sprite.node.mjId = mjid;\n            sprite.node.y = 0;\n            this.setSpriteFrameByMJID(\"M_\",sprite,mjid);\n        }\n        for(var i = 0; i < lackingNum; ++i){\n            var sprite = this._myMJArr[i]; \n            sprite.node.mjId = null;\n            sprite.spriteFrame = null;\n            sprite.node.active = false;\n        }\n        for(var i = lackingNum + holds.length; i < this._myMJArr.length; ++i){\n            var sprite = this._myMJArr[i]; \n            sprite.node.mjId = null;\n            sprite.spriteFrame = null;\n            sprite.node.active = false;            \n        }\n    },\n    \n    setSpriteFrameByMJID:function(pre,sprite,mjid){\n        sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,mjid);\n        sprite.node.active = true;\n    },\n    \n    //如果玩家手上还有缺的牌没有打，则只能打缺牌\n    checkQueYiMen:function(){\n    if(cc.vv.gameNetMgr.conf.type != \"rzmj\" ){\n                 \n                    if(cc.vv.gameNetMgr.conf==null || cc.vv.gameNetMgr.conf.type != \"xlch\" || !cc.vv.gameNetMgr.getSelfData().hued){\n            //遍历检查看是否有未打缺的牌 如果有，则需要将不是定缺的牌设置为不可用\n            var dingque = cc.vv.gameNetMgr.dingque;\n    //        console.log(dingque)\n            var hasQue = false;\n            if(cc.vv.gameNetMgr.seatIndex == cc.vv.gameNetMgr.turn){\n                for(var i = 0; i < this._myMJArr.length; ++i){\n                    var sprite = this._myMJArr[i];\n    //                console.log(\"sprite.node.mjId:\" + sprite.node.mjId);\n                    if(sprite.node.mjId != null){\n                        var type = cc.vv.mahjongmgr.getMahjongType(sprite.node.mjId);\n                        if(type == dingque){\n                            hasQue = true;\n                            break;\n                        }\n                    }\n                }            \n            }\n\n    //        console.log(\"hasQue:\" + hasQue);\n            for(var i = 0; i < this._myMJArr.length; ++i){\n                var sprite = this._myMJArr[i];\n                if(sprite.node.mjId != null){\n                    var type = cc.vv.mahjongmgr.getMahjongType(sprite.node.mjId);\n                    if(hasQue && type != dingque){\n                        sprite.node.getComponent(cc.Button).interactable = false;\n                    }\n                    else{\n                        sprite.node.getComponent(cc.Button).interactable = true;\n                    }\n                }\n            }   \n        }\n        else{\n            if(cc.vv.gameNetMgr.seatIndex == cc.vv.gameNetMgr.turn){\n                for(var i = 0; i < 14; ++i){\n                    var sprite = this._myMJArr[i]; \n                    if(sprite.node.active == true){\n                        sprite.node.getComponent(cc.Button).interactable = i == 13;\n                    }\n                }\n            }\n            else{\n                for(var i = 0; i < 14; ++i){\n                    var sprite = this._myMJArr[i]; \n                    if(sprite.node.active == true){\n                        sprite.node.getComponent(cc.Button).interactable = true;\n                    }\n                }\n            }\n        }\n        }\n    \n    },\n    \n    getLocalIndex:function(index){\n        var ret = (index - cc.vv.gameNetMgr.seatIndex + 4) % 4;\n        //console.log(\"old:\" + index + \",base:\" + cc.vv.gameNetMgr.seatIndex + \",new:\" + ret);\n        return ret;\n    },\n    \n    onOptionClicked:function(event){\n        console.log(event.target.pai);\n        if(event.target.name == \"btnPeng\"){\n            cc.vv.net.send(\"peng\");\n        }\n        else if(event.target.name == \"btnGang\"){\n            cc.vv.net.send(\"gang\",event.target.pai);\n        }\n        else if(event.target.name == \"btnHu\"){\n            cc.vv.net.send(\"hu\");\n        }\n        else if(event.target.name == \"btnGuo\"){\n            cc.vv.net.send(\"guo\");\n        }\n    },\n    \n    // called every frame, uncomment this function to activate update callback\n    update: function (dt) {\n    },\n    \n    onDestroy:function(){\n        console.log(\"onDestroy\");\n        if(cc.vv){\n            cc.vv.gameNetMgr.clear();   \n        }\n    }\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        lblRoomNo:{\n            default:null,\n            type:cc.Label\n        },\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _seats:[],\n        _seats2:[],\n        _timeLabel:null,\n        _voiceMsgQueue:[],\n        _lastPlayingSeat:null,\n        _playingSeat:null,\n        _lastPlayTime:null,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        if(cc.vv == null){\n            return;\n        }\n        \n        this.initView();\n        this.initSeats();\n        this.initEventHandlers();\n    },\n    //初始化视图\n    initView:function(){\n        var prepare = this.node.getChildByName(\"prepare\");\n        var seats = prepare.getChildByName(\"seats\");\n        for(var i = 0; i < seats.children.length; ++i){\n            this._seats.push(seats.children[i].getComponent(\"Seat\"));\n        }\n        \n        this.refreshBtns();\n        \n        this.lblRoomNo = cc.find(\"Canvas/infobar/Z_room_txt/New Label\").getComponent(cc.Label);\n        this._timeLabel = cc.find(\"Canvas/infobar/time\").getComponent(cc.Label);\n        this.lblRoomNo.string = cc.vv.gameNetMgr.roomId;\n        var gameChild = this.node.getChildByName(\"game\");\n        var sides = [\"myself\",\"right\",\"up\",\"left\"];\n        for(var i = 0; i < sides.length; ++i){\n            var sideNode = gameChild.getChildByName(sides[i]);\n            var seat = sideNode.getChildByName(\"seat\");\n            this._seats2.push(seat.getComponent(\"Seat\"));\n        }\n        \n        var btnWechat = cc.find(\"Canvas/prepare/btnWeichat\");\n        if(btnWechat){\n            btnWechat.active = false;\n            cc.vv.utils.addClickEvent(btnWechat,this.node,\"MJRoom\",\"onBtnWeichatClicked\");\n        }\n        \n        var titles = cc.find(\"Canvas/typeTitle\");\n        for(var i = 0; i < titles.children.length; ++i){\n            titles.children[i].active = false;\n        }\n        \n        if(cc.vv.gameNetMgr.conf){\n            var type = cc.vv.gameNetMgr.conf.type;\n            if(type == null || type == \"\"){\n                type = \"xzdd\";\n            }\n            //console.log(cc.vv.gameNetMgr.conf.type);\n            //hide rzmj\n            //titles.getChildByName(type).active = true;   \n        }\n    },\n    \n    refreshBtns:function(){\n        var prepare = this.node.getChildByName(\"prepare\");\n        var btnExit = prepare.getChildByName(\"btnExit\");\n        var btnDispress = prepare.getChildByName(\"btnDissolve\");\n        var btnWeichat = prepare.getChildByName(\"btnWeichat\");\n        var btnBack = prepare.getChildByName(\"btnBack\");\n        var isIdle = cc.vv.gameNetMgr.numOfGames == 0;\n        \n        btnExit.active = !cc.vv.gameNetMgr.isOwner() && isIdle;\n        btnDispress.active = cc.vv.gameNetMgr.isOwner() && isIdle;\n        \n        btnWeichat.active = isIdle;\n        btnBack.active = isIdle;\n    },\n    \n    initEventHandlers:function(){\n        var self = this;\n        //on一般是接受消息\n        this.node.on('new_user',function(data){\n            self.initSingleSeat(data);\n        });\n        \n        this.node.on('user_state_changed',function(data){\n            self.initSingleSeat(data);\n        });\n        \n        this.node.on('game_begin',function(data){\n            self.refreshBtns();\n            self.initSeats();\n        });\n        \n        this.node.on('game_num',function(data){\n            self.refreshBtns();\n        });\n\n        this.node.on('game_huanpai',function(data){\n            for(var i in self._seats2){\n                self._seats2[i].refreshXuanPaiState();    \n            }\n        });\n                \n        this.node.on('huanpai_notify',function(data){\n            var idx = data.seatindex;\n            var localIdx = cc.vv.gameNetMgr.getLocalIndex(idx);\n            self._seats2[localIdx].refreshXuanPaiState();\n        });\n        \n        this.node.on('game_huanpai_over',function(data){\n            for(var i in self._seats2){\n                self._seats2[i].refreshXuanPaiState();    \n            }\n        });\n        \n        this.node.on('voice_msg',function(data){\n            self._voiceMsgQueue.push(data);\n            self.playVoice();\n        });\n        \n        this.node.on('chat_push',function(data){\n            var idx = cc.vv.gameNetMgr.getSeatIndexByID(data.sender);\n            var localIdx = cc.vv.gameNetMgr.getLocalIndex(idx);\n            self._seats[localIdx].chat(data.content);\n            self._seats2[localIdx].chat(data.content);\n        });\n        \n        this.node.on('quick_chat_push',function(data){\n            var idx = cc.vv.gameNetMgr.getSeatIndexByID(data.sender);\n            var localIdx = cc.vv.gameNetMgr.getLocalIndex(idx);\n            \n            var index = data.content;\n            var info = cc.vv.chat.getQuickChatInfo(index);\n            self._seats[localIdx].chat(info.content);\n            self._seats2[localIdx].chat(info.content);\n            \n            cc.vv.audioMgr.playSFX(info.sound);\n        });\n        \n        this.node.on('emoji_push',function(data){\n            var idx = cc.vv.gameNetMgr.getSeatIndexByID(data.sender);\n            var localIdx = cc.vv.gameNetMgr.getLocalIndex(idx);\n            console.log(data);\n            self._seats[localIdx].emoji(data.content);\n            self._seats2[localIdx].emoji(data.content);\n        });\n    },\n    \n    initSeats:function(){\n        var seats = cc.vv.gameNetMgr.seats;\n        for(var i = 0; i < seats.length; ++i){\n            this.initSingleSeat(seats[i]);\n        }\n    },\n    \n    initSingleSeat:function(seat){\n        var index = cc.vv.gameNetMgr.getLocalIndex(seat.seatindex);\n        var isOffline = !seat.online;\n        var isZhuang = seat.seatindex == cc.vv.gameNetMgr.button;\n        \n        console.log(\"isOffline:\" + isOffline);\n        \n        this._seats[index].setInfo(seat.name,seat.score);\n        this._seats[index].setReady(seat.ready);\n        this._seats[index].setOffline(isOffline);\n        this._seats[index].setID(seat.userid);\n        this._seats[index].voiceMsg(false);\n        \n        this._seats2[index].setInfo(seat.name,seat.score);\n        this._seats2[index].setZhuang(isZhuang);\n        this._seats2[index].setOffline(isOffline);\n        this._seats2[index].setID(seat.userid);\n        this._seats2[index].voiceMsg(false);\n        this._seats2[index].refreshXuanPaiState();\n    },\n    \n    onBtnSettingsClicked:function(){\n        cc.vv.popupMgr.showSettings();   \n    },\n\n    onBtnBackClicked:function(){\n        cc.vv.alert.show(\"返回大厅\",\"返回大厅房间仍会保留，快去邀请大伙来玩吧！\",function(){\n            cc.director.loadScene(\"hall\");    \n        },true);\n    },\n    \n    onBtnChatClicked:function(){\n        \n    },\n    \n    onBtnWeichatClicked:function(){\n        var title = \"<血战到底>\";\n        if(cc.vv.gameNetMgr.conf.type == \"xlch\"){\n            var title = \"<血流成河>\";\n        }\n        cc.vv.anysdkMgr.share(\"达达麻将\" + title,\"房号:\" + cc.vv.gameNetMgr.roomId + \" 玩法:\" + cc.vv.gameNetMgr.getWanfa());\n    },\n    \n    onBtnDissolveClicked:function(){\n        cc.vv.alert.show(\"解散房间\",\"解散房间不扣房卡，是否确定解散？\",function(){\n            cc.vv.net.send(\"dispress\");    \n        },true);\n    },\n    \n    onBtnExit:function(){\n        cc.vv.net.send(\"exit\");\n    },\n    \n    playVoice:function(){\n        if(this._playingSeat == null && this._voiceMsgQueue.length){\n            console.log(\"playVoice2\");\n            var data = this._voiceMsgQueue.shift();\n            var idx = cc.vv.gameNetMgr.getSeatIndexByID(data.sender);\n            var localIndex = cc.vv.gameNetMgr.getLocalIndex(idx);\n            this._playingSeat = localIndex;\n            this._seats[localIndex].voiceMsg(true);\n            this._seats2[localIndex].voiceMsg(true);\n            \n            var msgInfo = JSON.parse(data.content);\n            \n            var msgfile = \"voicemsg.amr\";\n            console.log(msgInfo.msg.length);\n            cc.vv.voiceMgr.writeVoice(msgfile,msgInfo.msg);\n            cc.vv.voiceMgr.play(msgfile);\n            this._lastPlayTime = Date.now() + msgInfo.time;\n        }\n    },\n    \n    // called every frame, uncomment this function to activate update callback\n    update: function (dt) {\n        var minutes = Math.floor(Date.now()/1000/60);\n        if(this._lastMinute != minutes){\n            this._lastMinute = minutes;\n            var date = new Date();\n            var h = date.getHours();\n            h = h < 10? \"0\"+h:h;\n            \n            var m = date.getMinutes();\n            m = m < 10? \"0\"+m:m;\n            this._timeLabel.string = \"\" + h + \":\" + m;             \n        }\n        \n        \n        if(this._lastPlayTime != null){\n            if(Date.now() > this._lastPlayTime + 200){\n                this.onPlayerOver();\n                this._lastPlayTime = null;    \n            }\n        }\n        else{\n            this.playVoice();\n        }\n    },\n    \n        \n    onPlayerOver:function(){\n        cc.vv.audioMgr.resumeAll();\n        console.log(\"onPlayCallback:\" + this._playingSeat);\n        var localIndex = this._playingSeat;\n        this._playingSeat = null;\n        this._seats[localIndex].voiceMsg(false);\n        this._seats2[localIndex].voiceMsg(false);\n    },\n    \n    onDestroy:function(){\n        cc.vv.voiceMgr.stop();\n//        cc.vv.voiceMgr.onPlayCallback = null;\n    }\n});\n","var mahjongSprites = [];\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        //这是麻将的图集\n        leftAtlas:{\n            default:null,\n            type:cc.SpriteAtlas\n        },\n        \n        rightAtlas:{\n            default:null,\n            type:cc.SpriteAtlas\n        },\n        \n        bottomAtlas:{\n            default:null,\n            type:cc.SpriteAtlas\n        },\n        \n        bottomFoldAtlas:{\n            default:null,\n            type:cc.SpriteAtlas\n        },\n        //这是自己碰的节点的prefab\n        pengPrefabSelf:{\n            default:null,\n            type:cc.Prefab\n        },\n       //这是自左右碰的节点的prefab\n        pengPrefabLeft:{\n            default:null,\n            type:cc.Prefab\n        },\n        //这是暗牌的图集\n        emptyAtlas:{\n            default:null,\n            type:cc.SpriteAtlas\n        },\n        //其余玩家的牌摆放方式\n        holdsEmpty:{\n            default:[],\n            type:[cc.SpriteFrame]\n        },\n        \n        _sides:null,\n        _pres:null,\n        _foldPres:null,\n    },\n    \n    onLoad:function(){\n        if(cc.vv == null){\n            return;\n        }\n        this._sides = [\"myself\",\"right\",\"up\",\"left\"];//存放的四个玩家\n        this._pres = [\"M_\",\"R_\",\"B_\",\"L_\"];//代表四个位置\n        this._foldPres = [\"B_\",\"R_\",\"B_\",\"L_\"];\n        cc.vv.mahjongmgr = this; \n        //筒0-8\n        for(var i = 1; i < 10; ++i){\n            mahjongSprites.push(\"dot_\" + i);        \n        }\n        \n        //条9-17\n        for(var i = 1; i < 10; ++i){\n            mahjongSprites.push(\"bamboo_\" + i);\n        }\n        \n        //万18-26\n        for(var i = 1; i < 10; ++i){\n            mahjongSprites.push(\"character_\" + i);\n        }\n        \n        //中、发、白27-29\n        mahjongSprites.push(\"red\");\n        mahjongSprites.push(\"green\");\n        mahjongSprites.push(\"white\");\n        \n        //东西南北风30-33\n        mahjongSprites.push(\"wind_east\");\n        mahjongSprites.push(\"wind_west\");\n        mahjongSprites.push(\"wind_south\");\n        mahjongSprites.push(\"wind_north\");\n    },\n    \n    getMahjongSpriteByID:function(id){\n        return mahjongSprites[id];\n    },\n    \n    getMahjongType:function(id){\n      if(id >= 0 && id < 9){\n          return 0;\n      }\n      else if(id >= 9 && id < 18){\n          return 1;\n      }\n      else if(id >= 18 && id < 27){\n          return 2;\n      }\n      //再增加中发白\n      else if(id >= 27 && id <30){\n         return 3;\n      }\n      //东南西北\n       else if(id >= 30 && id <34){\n         return 4;\n      }\n    },\n    \n    getSpriteFrameByMJID:function(pre,mjid){\n        var spriteFrameName = this.getMahjongSpriteByID(mjid);\n        spriteFrameName = pre + spriteFrameName;\n        if(pre == \"M_\"){\n            return this.bottomAtlas.getSpriteFrame(spriteFrameName);            \n        }\n        else if(pre == \"B_\"){\n            return this.bottomFoldAtlas.getSpriteFrame(spriteFrameName);\n        }\n        else if(pre == \"L_\"){\n            return this.leftAtlas.getSpriteFrame(spriteFrameName);\n        }\n        else if(pre == \"R_\"){\n            return this.rightAtlas.getSpriteFrame(spriteFrameName);\n        }\n    },\n    \n    getAudioURLByMJID:function(id){\n        var realId = 0;\n        if(id >= 0 && id < 9){\n            realId = id + 21;\n        }\n        else if(id >= 9 && id < 18){\n            realId = id - 8;\n        }\n        else if(id >= 18 && id < 27){\n            realId = id - 7;\n        }\n        return \"nv/\" + realId + \".mp3\";\n    },\n    \n    getEmptySpriteFrame:function(side){\n        if(side == \"up\"){\n            return this.emptyAtlas.getSpriteFrame(\"e_mj_b_up\");\n        }   \n        else if(side == \"myself\"){\n            return this.emptyAtlas.getSpriteFrame(\"e_mj_b_bottom\");\n        }\n        else if(side == \"left\"){\n            return this.emptyAtlas.getSpriteFrame(\"e_mj_b_left\");\n        }\n        else if(side == \"right\"){\n            return this.emptyAtlas.getSpriteFrame(\"e_mj_b_right\");\n        }\n    },\n    \n    getHoldsEmptySpriteFrame:function(side){\n        if(side == \"up\"){\n            return this.emptyAtlas.getSpriteFrame(\"e_mj_up\");\n        }   \n        else if(side == \"myself\"){\n            return null;\n        }\n        else if(side == \"left\"){\n            return this.emptyAtlas.getSpriteFrame(\"e_mj_left\");\n        }\n        else if(side == \"right\"){\n            return this.emptyAtlas.getSpriteFrame(\"e_mj_right\");\n        }\n    },\n    \n    sortMJ:function(mahjongs,dingque){\n        var self = this;\n        mahjongs.sort(function(a,b){\n            if(dingque >= 0){\n                var t1 = self.getMahjongType(a);\n                var t2 = self.getMahjongType(b);\n                if(t1 != t2){\n                    if(dingque == t1){\n                        return 1;\n                    }\n                    else if(dingque == t2){\n                        return -1;\n                    }\n                }\n            }\n            return a - b;\n        });\n    },\n    \n    getSide:function(localIndex){\n        return this._sides[localIndex];\n    },\n    \n    getPre:function(localIndex){\n        return this._pres[localIndex];\n    },\n    \n    getFoldPre:function(localIndex){\n        return this._foldPres[localIndex];\n    }\n});\n","if(window.io == null){\n    window.io = require(\"socket-io\");\n}\n \nvar Global = cc.Class({\n    extends: cc.Component,\n    statics: {\n        ip:\"\",\n        sio:null,\n        isPinging:false,\n        fnDisconnect:null,\n        handlers:{},\n        addHandler:function(event,fn){\n            if(this.handlers[event]){\n                console.log(\"event:\" + event + \"' handler has been registered.\");\n                return;\n            }\n\n            var handler = function(data){\n                //console.log(event + \"(\" + typeof(data) + \"):\" + (data? data.toString():\"null\"));\n                if(event != \"disconnect\" && typeof(data) == \"string\"){\n                    data = JSON.parse(data);\n                }\n                fn(data);\n            };\n            \n            this.handlers[event] = handler; \n            if(this.sio){\n                console.log(\"register:function \" + event);\n                //把消息和事件放到这里面\n                this.sio.on(event,handler);\n            }\n        },\n        connect:function(fnConnect,fnError) {\n            var self = this;\n            \n            var opts = {\n                'secure':false,\n                'reconnection':false,\n                'force new connection': true,\n                'transports':['websocket', 'polling']\n            }\n            this.sio = window.io.connect(\"https://\"+this.ip,opts);\n            this.sio.on('reconnect',function(){\n                console.log('reconnection');\n            });\n            this.sio.on('connect',function(data){\n                self.sio.connected = true;\n                fnConnect(data);\n            });\n            \n            this.sio.on('disconnect',function(data){\n                console.log(\"disconnect\");\n                self.sio.connected = false;\n                self.close();\n            });\n            \n            this.sio.on('connect_failed',function (){\n                console.log('connect_failed');\n            });\n            \n            for(var key in this.handlers){\n                var value = this.handlers[key];\n                if(typeof(value) == \"function\"){\n                    if(key == 'disconnect'){\n                        this.fnDisconnect = value;\n                    }\n                    else{\n                        console.log(\"register:function \" + key);\n                        this.sio.on(key,value);                        \n                    }\n                }\n            }\n            \n            this.startHearbeat();\n        },\n        \n        startHearbeat:function(){\n            this.sio.on('game_pong',function(){\n                console.log('game_pong');\n                self.lastRecieveTime = Date.now(); \n            });\n            this.lastRecieveTime = Date.now();\n            var self = this;\n            console.log(1);\n            if(!self.isPinging){\n                console.log(1);\n                self.isPinging = true;\n                setInterval(function(){\n                    console.log(3);\n                    if(self.sio){\n                        console.log(4);\n                        if(Date.now() - self.lastRecieveTime > 10000){\n                            self.close();\n                        }\n                        else{\n                            self.ping();\n                        }                        \n                    }\n                },5000);\n            }   \n        },\n        send:function(event,data){\n            if(this.sio.connected){\n                if(data != null && (typeof(data) == \"object\")){\n                    data = JSON.stringify(data);\n                    //console.log(data);              \n                }\n                this.sio.emit(event,data);                \n            }\n        },\n        \n        ping:function(){\n            this.send('game_ping');\n        },\n        \n        close:function(){\n            console.log('close');\n            if(this.sio && this.sio.connected){\n                this.sio.connected = false;\n                this.sio.disconnect();\n                this.sio = null;\n            }\n            if(this.fnDisconnect){\n                this.fnDisconnect();\n                this.fnDisconnect = null;\n            }\n        },\n        \n        test:function(fnResult){\n            var xhr = null;\n            var fn = function(ret){\n                fnResult(ret.isonline);\n                xhr = null;\n            }\n            \n            var arr = this.ip.split(':');\n            var data = {\n                account:cc.vv.userMgr.account,\n                sign:cc.vv.userMgr.sign,\n                ip:arr[0],\n                port:arr[1],\n            }\n            xhr = cc.vv.http.sendRequest(\"/is_server_online\",data,fn);\n            setTimeout(function(){\n                if(xhr){\n                    xhr.abort();\n                    fnResult(false);                    \n                }\n            },1500);\n            /*\n            var opts = {\n                'reconnection':false,\n                'force new connection': true,\n                'transports':['websocket', 'polling']\n            }\n            var self = this;\n            this.testsio = window.io.connect(this.ip,opts);\n            this.testsio.on('connect',function(){\n                console.log('connect');\n                self.testsio.close();\n                self.testsio = null;\n                fnResult(true);\n            });\n            this.testsio.on('connect_error',function(){\n                console.log('connect_failed');\n                self.testsio = null;\n                fnResult(false);\n            });\n            */\n        }\n    },\n});","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _guohu:null,\n        _info:null,\n        _guohuTime:-1,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        this._guohu = cc.find(\"Canvas/tip_notice\");\n        this._guohu.active = false;\n        \n        this._info = cc.find(\"Canvas/tip_notice/info\").getComponent(cc.Label);\n        \n        var self = this;\n        this.node.on('push_notice',function(data){\n            var data = data.detail;\n            self._guohu.active = true;\n            self._guohuTime = data.time;\n            self._info.string = data.info;\n        });\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    update: function (dt) {\n       if(this._guohuTime > 0){\n           this._guohuTime -= dt;\n           if(this._guohuTime < 0){\n               this._guohu.active = false;\n           }\n       }\n    },\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        var btn = this.node.getChildByName(\"btn_back\");\n        cc.vv.utils.addClickEvent(btn,this.node,\"OnBack\",\"onBtnClicked\");        \n    },\n    \n    onBtnClicked:function(event){\n        if(event.target.name == \"btn_back\"){\n            this.node.active = false;\n        }\n    }\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        if(!cc.vv){\n            return;\n        }\n        \n        var gameChild = this.node.getChildByName(\"game\");\n        var myself = gameChild.getChildByName(\"myself\");\n        var pengangroot = myself.getChildByName(\"penggangs\");\n\n        var realwidth = cc.view.getVisibleSize().width;\n        var scale = realwidth / 1280;\n        pengangroot.scaleX *= scale;\n        pengangroot.scaleY *= scale;\n        \n        var self = this;\n        this.node.on('peng_notify',function(data){\n            //刷新所有的牌\n            //console.log(data.detail);\n            self.onPengGangChanged(data);\n        });\n        \n        this.node.on('gang_notify',function(data){\n            //刷新所有的牌\n            //console.log(data.detail);\n            self.onPengGangChanged(data.seatData);\n        });\n        \n        this.node.on('game_begin',function(data){\n            self.onGameBein();\n        });\n        \n        var seats = cc.vv.gameNetMgr.seats;\n        for(var i in seats){\n            this.onPengGangChanged(seats[i]);\n        }\n    },\n    \n    onGameBein:function(){\n        this.hideSide(\"myself\");\n        this.hideSide(\"right\");\n        this.hideSide(\"up\");\n        this.hideSide(\"left\");\n    },\n    \n    hideSide:function(side){\n        var gameChild = this.node.getChildByName(\"game\");\n        var myself = gameChild.getChildByName(side);\n        var pengangroot = myself.getChildByName(\"penggangs\");\n        if(pengangroot){\n            for(var i = 0; i < pengangroot.childrenCount; ++i){\n                pengangroot.children[i].active = false;\n            }            \n        }\n    },\n    \n    onPengGangChanged:function(seatData){\n        \n        if(seatData.angangs == null && seatData.diangangs == null && seatData.wangangs == null && seatData.pengs == null){\n            return;\n        }\n        var localIndex = cc.vv.gameNetMgr.getLocalIndex(seatData.seatindex);\n        var side = cc.vv.mahjongmgr.getSide(localIndex);\n        var pre = cc.vv.mahjongmgr.getFoldPre(localIndex);\n       \n        console.log(\"onPengGangChanged\" + localIndex);\n            \n        var gameChild = this.node.getChildByName(\"game\");\n        var myself = gameChild.getChildByName(side);\n        var pengangroot = myself.getChildByName(\"penggangs\");\n        \n        for(var i = 0; i < pengangroot.childrenCount; ++i){\n            pengangroot.children[i].active = false;\n        }\n        //初始化杠牌\n        var index = 0;\n        \n        var gangs = seatData.angangs\n        for(var i = 0; i < gangs.length; ++i){\n            var mjid = gangs[i];\n            this.initPengAndGangs(pengangroot,side,pre,index,mjid,\"angang\");\n            index++;    \n        } \n        var gangs = seatData.diangangs\n        for(var i = 0; i < gangs.length; ++i){\n            var mjid = gangs[i];\n            this.initPengAndGangs(pengangroot,side,pre,index,mjid,\"diangang\");\n            index++;    \n        }\n        \n        var gangs = seatData.wangangs\n        for(var i = 0; i < gangs.length; ++i){\n            var mjid = gangs[i];\n            this.initPengAndGangs(pengangroot,side,pre,index,mjid,\"wangang\");\n            index++;    \n        }\n        \n        //初始化碰牌\n        var pengs = seatData.pengs\n        if(pengs){\n            for(var i = 0; i < pengs.length; ++i){\n                var mjid = pengs[i];\n                this.initPengAndGangs(pengangroot,side,pre,index,mjid,\"peng\");\n                index++;    \n            }    \n        }        \n    },\n    \n    initPengAndGangs:function(pengangroot,side,pre,index,mjid,flag){\n        var pgroot = null;\n        if(pengangroot.childrenCount <= index){\n            if(side == \"left\" || side == \"right\"){\n                pgroot = cc.instantiate(cc.vv.mahjongmgr.pengPrefabLeft);\n            }\n            else{\n                pgroot = cc.instantiate(cc.vv.mahjongmgr.pengPrefabSelf);\n            }\n            \n            pengangroot.addChild(pgroot);    \n        }\n        else{\n            pgroot = pengangroot.children[index];\n            pgroot.active = true;\n        }\n        \n        if(side == \"left\"){\n            pgroot.y = -(index * 25 * 3);                    \n        }\n        else if(side == \"right\"){\n            pgroot.y = (index * 25 * 3);\n            pgroot.zIndex = -index;\n        }\n        else if(side == \"myself\"){\n            pgroot.x = index * 55 * 3 + index * 10;                    \n        }\n        else{\n            pgroot.x = -(index * 55*3);\n        }\n\n        var sprites = pgroot.getComponentsInChildren(cc.Sprite);\n        for(var s = 0; s < sprites.length; ++s){\n            var sprite = sprites[s];\n            if(sprite.node.name == \"gang\"){\n                var isGang = flag != \"peng\";\n                sprite.node.active = isGang;\n                sprite.node.scaleX = 1.0;\n                sprite.node.scaleY = 1.0;\n                if(flag == \"angang\"){\n                    sprite.spriteFrame = cc.vv.mahjongmgr.getEmptySpriteFrame(side);\n                    if(side == \"myself\" || side == \"up\"){\n                        sprite.node.scaleX = 1.4;\n                        sprite.node.scaleY = 1.4;                        \n                    }\n                }   \n                else{\n                    sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,mjid);    \n                }\n            }\n            else{ \n                sprite.spriteFrame = cc.vv.mahjongmgr.getSpriteFrameByMJID(pre,mjid);\n            }\n        }\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _popuproot:null,\n        _settings:null,\n        _dissolveNotice:null,\n        \n        _endTime:-1,\n        _extraInfo:null,\n        _noticeLabel:null,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        if(cc.vv == null){\n            return;\n        }\n        \n        cc.vv.popupMgr = this;\n        \n        this._popuproot = cc.find(\"Canvas/popups\");\n        this._settings = cc.find(\"Canvas/popups/settings\");\n        this._dissolveNotice = cc.find(\"Canvas/popups/dissolve_notice\");\n        this._noticeLabel = this._dissolveNotice.getChildByName(\"info\").getComponent(cc.Label);\n        \n        this.closeAll();\n        \n        this.addBtnHandler(\"settings/btn_close\");\n        this.addBtnHandler(\"settings/btn_sqjsfj\");\n        this.addBtnHandler(\"dissolve_notice/btn_agree\");\n        this.addBtnHandler(\"dissolve_notice/btn_reject\");\n        this.addBtnHandler(\"dissolve_notice/btn_ok\");\n        \n        var self = this;\n        this.node.on(\"dissolve_notice\",function(event){\n            var data = event.detail;\n            self.showDissolveNotice(data);\n        });\n        \n        this.node.on(\"dissolve_cancel\",function(event){\n            self.closeAll();\n        });\n    },\n    \n    start:function(){\n        if(cc.vv.gameNetMgr.dissoveData){\n            this.showDissolveNotice(cc.vv.gameNetMgr.dissoveData);\n        }\n    },\n    \n    addBtnHandler:function(btnName){\n        var btn = cc.find(\"Canvas/popups/\" + btnName);\n        this.addClickEvent(btn,this.node,\"PopupMgr\",\"onBtnClicked\");\n    },\n    \n    addClickEvent:function(node,target,component,handler){\n        var eventHandler = new cc.Component.EventHandler();\n        eventHandler.target = target;\n        eventHandler.component = component;\n        eventHandler.handler = handler;\n\n        var clickEvents = node.getComponent(cc.Button).clickEvents;\n        clickEvents.push(eventHandler);\n    },\n    \n    onBtnClicked:function(event){\n        this.closeAll();\n        var btnName = event.target.name;\n        if(btnName == \"btn_agree\"){\n            cc.vv.net.send(\"dissolve_agree\");\n        }\n        else if(btnName == \"btn_reject\"){\n            cc.vv.net.send(\"dissolve_reject\");\n        }\n        else if(btnName == \"btn_sqjsfj\"){\n            cc.vv.net.send(\"dissolve_request\"); \n        }\n    },\n    \n    closeAll:function(){\n        this._popuproot.active = false;\n        this._settings.active = false;\n        this._dissolveNotice.active = false;\n    },\n    \n    showSettings:function(){\n        this.closeAll();\n        this._popuproot.active = true;\n        this._settings.active = true;\n    },\n    \n    showDissolveRequest:function(){\n        this.closeAll();\n        this._popuproot.active = true;\n    },\n    \n    showDissolveNotice:function(data){\n        this._endTime = Date.now()/1000 + data.time;\n        this._extraInfo = \"\";\n        for(var i = 0; i < data.states.length; ++i){\n            var b = data.states[i];\n            var name = cc.vv.gameNetMgr.seats[i].name;\n            if(b){\n                this._extraInfo += \"\\n[已同意] \"+ name;\n            }\n            else{\n                this._extraInfo += \"\\n[待确认] \"+ name;\n            }\n        }\n        this.closeAll();\n        this._popuproot.active = true;\n        this._dissolveNotice.active = true;;\n    },\n    \n    // called every frame, uncomment this function to activate update callback\n    update: function (dt) {\n        if(this._endTime > 0){\n            var lastTime = this._endTime - Date.now() / 1000;\n            if(lastTime < 0){\n                this._endTime = -1;\n            }\n            \n            var m = Math.floor(lastTime / 60);\n            var s = Math.ceil(lastTime - m*60);\n            \n            var str = \"\";\n            if(m > 0){\n                str += m + \"分\"; \n            }\n            \n            this._noticeLabel.string = str + s + \"秒后房间将自动解散\" + this._extraInfo;\n        }\n    },\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        target:cc.Node,\n        sprite:cc.SpriteFrame,\n        checkedSprite:cc.SpriteFrame,\n        checked:false,\n        groupId:-1,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        if(cc.vv == null){\n            return;\n        }\n        if(cc.vv.radiogroupmgr == null){\n            var RadioGroupMgr = require(\"RadioGroupMgr\");\n            cc.vv.radiogroupmgr = new RadioGroupMgr();\n            cc.vv.radiogroupmgr.init();\n        }\n        console.log(typeof(cc.vv.radiogroupmgr.add));\n        cc.vv.radiogroupmgr.add(this);\n\n        this.refresh();\n    },\n    \n    refresh:function(){\n        var targetSprite = this.target.getComponent(cc.Sprite);\n        if(this.checked){\n            targetSprite.spriteFrame = this.checkedSprite;\n        }\n        else{\n            targetSprite.spriteFrame = this.sprite;\n        }\n    },\n    \n    check:function(value){\n        this.checked = value;\n        this.refresh();\n    },\n    \n    onClicked:function(){\n        cc.vv.radiogroupmgr.check(this);\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n    \n    onDestroy:function(){\n        if(cc.vv && cc.vv.radiogroupmgr){\n            cc.vv.radiogroupmgr.del(this);            \n        }\n    }\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _groups:null\n    },\n\n    // use this for initialization\n    init: function () {\n        this._groups = {};\n    },\n    \n    add:function(radioButton){\n        var groupId = radioButton.groupId; \n        var buttons = this._groups[groupId];\n        if(buttons == null){\n            buttons = [];\n            this._groups[groupId] = buttons; \n        }\n        buttons.push(radioButton);\n    },\n    \n    del:function(radioButton){\n        var groupId = radioButton.groupId;\n        var buttons = this._groups[groupId];\n        if(buttons == null){\n            return; \n        }\n        var idx = buttons.indexOf(radioButton);\n        if(idx != -1){\n            buttons.splice(idx,1);            \n        }\n        if(buttons.length == 0){\n            delete this._groups[groupId]   \n        }\n    },\n    \n    check:function(radioButton){\n        var groupId = radioButton.groupId;\n        var buttons = this._groups[groupId];\n        if(buttons == null){\n            return; \n        }\n        for(var i = 0; i < buttons.length; ++i){\n            var btn = buttons[i];\n            if(btn == radioButton){\n                btn.check(true);\n            }else{\n                btn.check(false);\n            }\n        }        \n    }\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _reconnect:null,\n        _lblTip:null,\n        _lastPing:0,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        this._reconnect = cc.find(\"Canvas/reconnect\");\n        this._lblTip = cc.find(\"Canvas/reconnect/tip\").getComponent(cc.Label);\n        var self = this;\n        \n        var fnTestServerOn = function(){\n            cc.vv.net.test(function(ret){\n               if(ret){\n                    cc.director.loadScene('hall');                \n               }\n               else{\n                   setTimeout(fnTestServerOn,3000);\n               }\n            });\n        }\n        \n        var fn = function(data){\n            self.node.off('disconnect',fn);\n            self._reconnect.active = true;\n            fnTestServerOn();\n        };\n        console.log(\"adasfdasdfsdf\");\n        this.node.on('disconnect',fn);\n    },\n    // called every frame, uncomment this function to activate update callback\n    update: function (dt) {\n        if(this._reconnect.active){\n            var t = Math.floor(Date.now() / 1000) % 4;\n            this._lblTip.string = \"与服务器断开连接，正在尝试重连\";\n            for(var i = 0; i < t; ++ i){\n                this._lblTip.string += '.';\n            }\n        }\n    },\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _nextPlayTime:1,\n        _replay:null,\n        _isPlaying:true,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        if(cc.vv == null){\n            return;\n        }\n        \n        this._replay = cc.find(\"Canvas/replay\");\n        this._replay.active = cc.vv.replayMgr.isReplay();\n    },\n    \n    onBtnPauseClicked:function(){\n        this._isPlaying = false;\n    },\n    \n    onBtnPlayClicked:function(){\n        this._isPlaying = true;\n    },\n    \n    onBtnBackClicked:function(){\n        cc.vv.replayMgr.clear();\n        cc.vv.gameNetMgr.reset();\n        cc.vv.gameNetMgr.roomId = null;\n        cc.director.loadScene(\"hall\");\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    update: function (dt) {\n        if(cc.vv){\n            if(this._isPlaying && cc.vv.replayMgr.isReplay() == true && this._nextPlayTime > 0){\n                this._nextPlayTime -= dt;\n                if(this._nextPlayTime < 0){\n                    this._nextPlayTime = cc.vv.replayMgr.takeAction();\n                }\n            }\n        }\n    },\n});\n","var ACTION_CHUPAI = 1;\nvar ACTION_MOPAI = 2;\nvar ACTION_PENG = 3;\nvar ACTION_GANG = 4;\nvar ACTION_HU = 5;\n\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _lastAction:null,\n        _actionRecords:null,\n        _currentIndex:0,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n\n    },\n    \n    clear:function(){\n        this._lastAction = null;\n        this._actionRecords = null;\n        this._currentIndex = 0;\n    },\n    \n    init:function(data){\n        this._actionRecords = data.action_records;\n        if(this._actionRecords == null){\n            this._actionRecords = {};\n        }\n        this._currentIndex = 0;\n        this._lastAction = null;\n    },\n    \n    isReplay:function(){\n        return this._actionRecords != null;    \n    },\n    \n    getNextAction:function(){\n        if(this._currentIndex >= this._actionRecords.length){\n            return null;\n        }\n        \n        var si = this._actionRecords[this._currentIndex++];\n        var action = this._actionRecords[this._currentIndex++];\n        var pai = this._actionRecords[this._currentIndex++];\n        return {si:si,type:action,pai:pai};\n    },\n    \n    takeAction:function(){\n        var action = this.getNextAction();\n        if(this._lastAction != null && this._lastAction.type == ACTION_CHUPAI){\n            if(action != null && action.type != ACTION_PENG && action.type != ACTION_GANG && action.type != ACTION_HU){\n                cc.vv.gameNetMgr.doGuo(this._lastAction.si,this._lastAction.pai);\n            }\n        }\n        this._lastAction = action;\n        if(action == null){\n            return -1;\n        }\n        var nextActionDelay = 1.0;\n        if(action.type == ACTION_CHUPAI){\n            //console.log(\"chupai\");\n            cc.vv.gameNetMgr.doChupai(action.si,action.pai);\n            return 1.0;\n        }\n        else if(action.type == ACTION_MOPAI){\n            //console.log(\"mopai\");\n            cc.vv.gameNetMgr.doMopai(action.si,action.pai);\n            cc.vv.gameNetMgr.doTurnChange(action.si);\n            return 0.5;\n        }\n        else if(action.type == ACTION_PENG){\n            //console.log(\"peng\");\n            cc.vv.gameNetMgr.doPeng(action.si,action.pai);\n            cc.vv.gameNetMgr.doTurnChange(action.si);\n            return 1.0;\n        }\n        else if(action.type == ACTION_GANG){\n            //console.log(\"gang\");\n            cc.vv.gameNetMgr.dispatchEvent('hangang_notify',action.si);\n            cc.vv.gameNetMgr.doGang(action.si,action.pai);\n            cc.vv.gameNetMgr.doTurnChange(action.si);\n            return 1.0;\n        }\n        else if(action.type == ACTION_HU){\n            //console.log(\"hu\");\n            cc.vv.gameNetMgr.doHu({seatindex:action.si,hupai:action.pai,iszimo:false});\n            return 1.5;\n        }\n    }\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        _sprIcon:null,\n        _zhuang:null,\n        _ready:null,\n        _offline:null,\n        _lblName:null,\n        _lblScore:null,\n        _scoreBg:null,\n        _nddayingjia:null,\n        _voicemsg:null,\n        \n        _chatBubble:null,\n        _emoji:null,\n        _lastChatTime:-1,\n        \n        _userName:\"\",\n        _score:0,\n        _dayingjia:false,\n        _isOffline:false,\n        _isReady:false,\n        _isZhuang:false,\n        _userId:null,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        if(cc.vv == null){\n            return;\n        }\n        \n        this._sprIcon = this.node.getChildByName(\"icon\").getComponent(\"ImageLoader\");\n        this._lblName = this.node.getChildByName(\"name\").getComponent(cc.Label);\n        this._lblScore = this.node.getChildByName(\"score\").getComponent(cc.Label);\n        this._voicemsg = this.node.getChildByName(\"voicemsg\");\n        this._xuanpai = this.node.getChildByName(\"xuanpai\");\n        this.refreshXuanPaiState();\n        \n        if(this._voicemsg){\n            this._voicemsg.active = false;\n        }\n        \n        if(this._sprIcon && this._sprIcon.getComponent(cc.Button)){\n            cc.vv.utils.addClickEvent(this._sprIcon,this.node,\"Seat\",\"onIconClicked\");    \n        }\n        \n        \n        this._offline = this.node.getChildByName(\"offline\");\n        \n        this._ready = this.node.getChildByName(\"ready\");\n        \n        this._zhuang = this.node.getChildByName(\"zhuang\");\n        \n        this._scoreBg = this.node.getChildByName(\"Z_money_frame\");\n        this._nddayingjia = this.node.getChildByName(\"dayingjia\");\n        \n        this._chatBubble = this.node.getChildByName(\"ChatBubble\");\n        if(this._chatBubble != null){\n            this._chatBubble.active = false;            \n        }\n        \n        this._emoji = this.node.getChildByName(\"emoji\");\n        if(this._emoji != null){\n            this._emoji.active = false;\n        }\n        \n        this.refresh();\n        \n        if(this._sprIcon && this._userId){\n            this._sprIcon.setUserID(this._userId);\n        }\n    },\n    \n    onIconClicked:function(){\n        var iconSprite = this._sprIcon.node.getComponent(cc.Sprite);\n        if(this._userId != null && this._userId > 0){\n           var seat = cc.vv.gameNetMgr.getSeatByID(this._userId);\n            var sex = 0;\n            if(cc.vv.baseInfoMap){\n                var info = cc.vv.baseInfoMap[this._userId];\n                if(info){\n                    sex = info.sex;\n                }                \n            }\n            cc.vv.userinfoShow.show(seat.name,seat.userid,iconSprite,sex,seat.ip);         \n        }\n    },\n    \n    refresh:function(){\n        if(this._lblName != null){\n            this._lblName.string = this._userName;    \n        }\n        \n        if(this._lblScore != null){\n            this._lblScore.string = this._score;            \n        }        \n        \n        if(this._nddayingjia != null){\n            this._nddayingjia.active = this._dayingjia == true;\n        }\n        \n        if(this._offline){\n            this._offline.active = this._isOffline && this._userName != \"\";\n        }\n        \n        if(this._ready){\n            this._ready.active = this._isReady && (cc.vv.gameNetMgr.numOfGames > 0); \n        }\n        \n        if(this._zhuang){\n            this._zhuang.active = this._isZhuang;    \n        }\n        \n        this.node.active = this._userName != null && this._userName != \"\"; \n    },\n    \n    setInfo(name,score,dayingjia){\n        this._userName = name;\n        this._score = score;\n        if(this._score == null){\n            this._score = 0;\n        }\n        this._dayingjia = dayingjia;\n        \n        if(this._scoreBg != null){\n            this._scoreBg.active = this._score != null;            \n        }\n\n        if(this._lblScore != null){\n            this._lblScore.node.active = this._score != null;            \n        }\n\n        this.refresh();    \n    },\n    \n    setZhuang:function(value){\n        if(this._zhuang){\n            this._zhuang.active = value;\n        }\n    },\n    \n    setReady:function(isReady){\n        this._isReady = isReady;\n        if(this._ready){\n            this._ready.active = this._isReady && (cc.vv.gameNetMgr.numOfGames > 0); \n        }\n    },\n    \n    setID:function(id){\n        var idNode = this.node.getChildByName(\"id\");\n        if(idNode){\n            var lbl = idNode.getComponent(cc.Label);\n            lbl.string = \"ID:\" + id;            \n        }\n        \n        this._userId = id;\n        if(this._sprIcon){\n            this._sprIcon.setUserID(id); \n        }\n    },\n    \n    setOffline:function(isOffline){\n        this._isOffline = isOffline;\n        if(this._offline){\n            this._offline.active = this._isOffline && this._userName != \"\";\n        }\n    },\n    \n    chat:function(content){\n        if(this._chatBubble == null || this._emoji == null){\n            return;\n        }\n        this._emoji.active = false;\n        this._chatBubble.active = true;\n        this._chatBubble.getComponent(cc.Label).string = content;\n        this._chatBubble.getChildByName(\"New Label\").getComponent(cc.Label).string = content;\n        this._lastChatTime = 3;\n    },\n    \n    emoji:function(emoji){\n        //emoji = JSON.parse(emoji);\n        if(this._emoji == null || this._emoji == null){\n            return;\n        }\n        console.log(emoji);\n        this._chatBubble.active = false;\n        this._emoji.active = true;\n        this._emoji.getComponent(cc.Animation).play(emoji);\n        this._lastChatTime = 3;\n    },\n    \n    voiceMsg:function(show){\n        if(this._voicemsg){\n            this._voicemsg.active = show;\n        }\n    },\n    \n    refreshXuanPaiState:function(){\n        if(this._xuanpai == null){\n            return;\n        }\n        \n        this._xuanpai.active = cc.vv.gameNetMgr.isHuanSanZhang;\n        if(cc.vv.gameNetMgr.isHuanSanZhang == false){ \n            return;\n        }\n       \n        this._xuanpai.getChildByName(\"xz\").active = false;\n        this._xuanpai.getChildByName(\"xd\").active = false;\n        \n        var seat = cc.vv.gameNetMgr.getSeatByID(this._userId);\n        if(seat){\n            if(seat.huanpais == null){\n                this._xuanpai.getChildByName(\"xz\").active = true;\n            }\n            else{\n                this._xuanpai.getChildByName(\"xd\").active = true;\n            }\n        }\n    },\n   \n    // called every frame, uncomment this function to activate update callback\n    update: function (dt) {\n        if(this._lastChatTime > 0){\n            this._lastChatTime -= dt;\n            if(this._lastChatTime < 0){\n                this._chatBubble.active = false;\n                this._emoji.active = false;\n                this._emoji.getComponent(cc.Animation).stop();\n            }\n        }\n    },\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _btnYXOpen:null,\n        _btnYXClose:null,\n        _btnYYOpen:null,\n        _btnYYClose:null,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        if(cc.vv == null){\n            return;\n        }\n                \n        this._btnYXOpen = this.node.getChildByName(\"yinxiao\").getChildByName(\"btn_yx_open\");\n        this._btnYXClose = this.node.getChildByName(\"yinxiao\").getChildByName(\"btn_yx_close\");\n        \n        this._btnYYOpen = this.node.getChildByName(\"yinyue\").getChildByName(\"btn_yy_open\");\n        this._btnYYClose = this.node.getChildByName(\"yinyue\").getChildByName(\"btn_yy_close\");\n        \n        this.initButtonHandler(this.node.getChildByName(\"btn_close\"));\n        this.initButtonHandler(this.node.getChildByName(\"btn_exit\"));\n        \n        \n        this.initButtonHandler(this._btnYXOpen);\n        this.initButtonHandler(this._btnYXClose);\n        this.initButtonHandler(this._btnYYOpen);\n        this.initButtonHandler(this._btnYYClose);\n        \n\n        var slider = this.node.getChildByName(\"yinxiao\").getChildByName(\"progress\");\n        cc.vv.utils.addSlideEvent(slider,this.node,\"Settings\",\"onSlided\");\n        \n        var slider = this.node.getChildByName(\"yinyue\").getChildByName(\"progress\");\n        cc.vv.utils.addSlideEvent(slider,this.node,\"Settings\",\"onSlided\");\n        \n        this.refreshVolume();\n    },\n    \n    onSlided:function(slider){\n        if(slider.node.parent.name == \"yinxiao\"){\n            cc.vv.audioMgr.setSFXVolume(slider.progress);\n        }\n        else if(slider.node.parent.name == \"yinyue\"){\n            cc.vv.audioMgr.setBGMVolume(slider.progress);\n        }\n        this.refreshVolume();\n    },\n    \n    initButtonHandler:function(btn){\n        cc.vv.utils.addClickEvent(btn,this.node,\"Settings\",\"onBtnClicked\");    \n    },\n    \n    refreshVolume:function(){\n        \n        this._btnYXClose.active = cc.vv.audioMgr.sfxVolume > 0;\n        this._btnYXOpen.active = !this._btnYXClose.active;\n        \n        var yx = this.node.getChildByName(\"yinxiao\");\n        var width = 430 * cc.vv.audioMgr.sfxVolume;\n        var progress = yx.getChildByName(\"progress\")\n        progress.getComponent(cc.Slider).progress = cc.vv.audioMgr.sfxVolume;\n        progress.getChildByName(\"progress\").width = width;  \n        //yx.getChildByName(\"btn_progress\").x = progress.x + width;\n        \n        \n        this._btnYYClose.active = cc.vv.audioMgr.bgmVolume > 0;\n        this._btnYYOpen.active = !this._btnYYClose.active;\n        var yy = this.node.getChildByName(\"yinyue\");\n        var width = 430 * cc.vv.audioMgr.bgmVolume;\n        var progress = yy.getChildByName(\"progress\");\n        progress.getComponent(cc.Slider).progress = cc.vv.audioMgr.bgmVolume; \n        \n        progress.getChildByName(\"progress\").width = width;\n        //yy.getChildByName(\"btn_progress\").x = progress.x + width;\n    },\n    \n    onBtnClicked:function(event){\n        if(event.target.name == \"btn_close\"){\n            this.node.active = false;\n        }\n        else if(event.target.name == \"btn_exit\"){\n            cc.sys.localStorage.removeItem(\"wx_account\");\n            cc.sys.localStorage.removeItem(\"wx_sign\");\n            cc.director.loadScene(\"login\");\n        }\n        else if(event.target.name == \"btn_yx_open\"){\n            cc.vv.audioMgr.setSFXVolume(1.0);\n            this.refreshVolume(); \n        }\n        else if(event.target.name == \"btn_yx_close\"){\n            cc.vv.audioMgr.setSFXVolume(0);\n            this.refreshVolume();\n        }\n        else if(event.target.name == \"btn_yy_open\"){\n            cc.vv.audioMgr.setBGMVolume(1);\n            this.refreshVolume();\n        }\n        else if(event.target.name == \"btn_yy_close\"){\n            cc.vv.audioMgr.setBGMVolume(0);\n            this.refreshVolume();\n        }\n    }\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        _arrow:null,\n        _pointer:null,\n        _timeLabel:null,\n        _time:-1,\n        _alertTime:-1,\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        var gameChild = this.node.getChildByName(\"game\");\n        this._arrow = gameChild.getChildByName(\"arrow\");\n        this._pointer = this._arrow.getChildByName(\"pointer\");\n        this.initPointer();\n        \n        this._timeLabel = this._arrow.getChildByName(\"lblTime\").getComponent(cc.Label);\n        this._timeLabel.string = \"00\";\n        \n        var self = this;\n        \n        this.node.on('game_begin',function(data){\n            self.initPointer();\n        });\n        \n        this.node.on('game_chupai',function(data){\n            self.initPointer();\n            self._time = 10;\n            self._alertTime = 3;\n        });\n    }, \n    \n    initPointer:function(){\n        if(cc.vv == null){\n            return;\n        }\n        this._arrow.active = cc.vv.gameNetMgr.gamestate == \"playing\";\n        if(!this._arrow.active){\n            return;\n        }\n        var turn = cc.vv.gameNetMgr.turn;\n        var localIndex = cc.vv.gameNetMgr.getLocalIndex(turn);\n        for(var i = 0; i < this._pointer.children.length; ++i){\n            this._pointer.children[i].active = i == localIndex;\n        }\n    },\n    \n    // called every frame, uncomment this function to activate update callback\n    update: function (dt) {\n        if(this._time > 0){\n            this._time -= dt;\n            if(this._alertTime > 0 && this._time < this._alertTime){\n                cc.vv.audioMgr.playSFX(\"timeup_alarm.mp3\");\n                this._alertTime = -1;\n            }\n            var pre = \"\";\n            if(this._time < 0){\n                this._time = 0;\n            }\n            \n            var t = Math.ceil(this._time);\n            if(t < 10){\n                pre = \"0\";\n            }\n            this._timeLabel.string = pre + t; \n        }\n    },\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _userinfo:null,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        if(cc.vv == null){\n            return;\n        }\n        \n        this._userinfo = cc.find(\"Canvas/userinfo\");\n        this._userinfo.active = false;\n        cc.vv.utils.addClickEvent(this._userinfo,this.node,\"UserInfoShow\",\"onClicked\");\n        \n        cc.vv.userinfoShow = this;\n    },\n    \n    show:function(name,userId,iconSprite,sex,ip){\n        if(userId != null && userId > 0){\n            this._userinfo.active = true;\n            this._userinfo.getChildByName(\"icon\").getComponent(cc.Sprite).spriteFrame = iconSprite.spriteFrame;\n            this._userinfo.getChildByName(\"name\").getComponent(cc.Label).string = name;\n            this._userinfo.getChildByName(\"ip\").getComponent(cc.Label).string = \"IP: \" + ip.replace(\"::ffff:\",\"\");\n            this._userinfo.getChildByName(\"id\").getComponent(cc.Label).string = \"ID: \" + userId;\n            \n            var sex_female = this._userinfo.getChildByName(\"sex_female\");\n            sex_female.active = false;\n            \n            var sex_male = this._userinfo.getChildByName(\"sex_male\");\n            sex_male.active = false;\n            \n            if(sex == 1){\n                sex_male.active = true;\n            }   \n            else if(sex == 2){\n                sex_female.active = true;\n            }\n        }\n    },\n    \n    onClicked:function(){\n        this._userinfo.active = false;\n    }\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n","cc.Class({\n    extends: cc.Component,\n    properties: {\n        account:null,\n\t    userId:null,\n\t\tuserName:null,\n\t\tlv:0,\n\t\texp:0,\n\t\tcoins:0,\n\t\tgems:0,\n\t\tsign:0,\n        ip:\"\",\n        sex:0,\n        roomData:null,\n        \n        oldRoomId:null,\n    },\n    \n    guestAuth:function(){\n        var account = cc.args[\"account\"];\n        if(account == null){\n            //remove this line will force browser alway start with a new account, for debug\n            //account = cc.sys.localStorage.getItem(\"account\");\n        }\n        \n        if(account == null){\n            account = Date.now();\n            cc.sys.localStorage.setItem(\"account\",account);\n        }\n        \n        cc.vv.http.sendRequest(\"/guest\",{account:account},this.onAuth);\n    },\n    \n    onAuth:function(ret){\n        var self = cc.vv.userMgr;\n        if(ret.errcode !== 0){\n            console.log(ret.errmsg);\n        }\n        else{\n            self.account = ret.account;\n            self.sign = ret.sign;\n            cc.vv.http.url = \"https://\" + cc.vv.SI.hall;\n            //cc.vv.http.url = \"http://\" + cc.vv.SI.hall;\n            //shawn use https\n            self.login();\n        }   \n    },\n    \n    login:function(){\n        var self = this;\n        var onLogin = function(ret){\n            if(ret.errcode !== 0){\n                console.log(ret.errmsg);\n            }\n            else{\n                if(!ret.userid){\n                    //jump to register user info.\n                    cc.director.loadScene(\"createrole\");\n                }\n                else{\n                    console.log(ret);\n                    self.account = ret.account;\n        \t\t\tself.userId = ret.userid;\n        \t\t\tself.userName = ret.name;\n        \t\t\tself.lv = ret.lv;\n        \t\t\tself.exp = ret.exp;\n        \t\t\tself.coins = ret.coins;\n        \t\t\tself.gems = ret.gems;\n                    self.roomData = ret.roomid;\n                    self.sex = ret.sex;\n                    self.ip = ret.ip;\n        \t\t\tcc.director.loadScene(\"hall\");\n                }\n            }\n        };\n        cc.vv.wc.show(\"正在登录游戏\");\n       //这里就是给大厅服务器发消息了\n        cc.vv.http.sendRequest(\"/login\",{account:this.account,sign:this.sign},onLogin);\n    },\n    \n    create:function(name){\n        var self = this;\n        var onCreate = function(ret){\n            if(ret.errcode !== 0){\n                console.log(ret.errmsg);\n            }\n            else{\n                self.login();\n            }\n        };\n        \n        var data = {\n            account:this.account,\n            sign:this.sign,\n            name:name\n        };\n        cc.vv.http.sendRequest(\"/create_user\",data,onCreate);    \n    },\n    \n    enterRoom:function(roomId,callback){\n        var self = this;\n        var onEnter = function(ret){\n            if(ret.errcode !== 0){\n                if(ret.errcode == -1){\n                    setTimeout(function(){\n                        self.enterRoom(roomId,callback);\n                    },5000);\n                }\n                else{\n                    cc.vv.wc.hide();\n                    if(callback != null){\n                        callback(ret);\n                    }\n                }\n            }\n            else{\n                if(callback != null){\n                    callback(ret);\n                }\n                cc.vv.gameNetMgr.connectGameServer(ret);\n            }\n        };\n        \n        var data = {\n            account:cc.vv.userMgr.account,\n            sign:cc.vv.userMgr.sign,\n            roomid:roomId\n        };\n        cc.vv.wc.show(\"正在进入房间 \" + roomId);\n        cc.vv.http.sendRequest(\"/enter_private_room\",data,onEnter);\n    },\n    getHistoryList:function(callback){\n        var self = this;\n        var onGet = function(ret){\n            if(ret.errcode !== 0){\n                console.log(ret.errmsg);\n            }\n            else{\n                console.log(ret.history);\n                if(callback != null){\n                    callback(ret.history);\n                }\n            }\n        };\n        \n        var data = {\n            account:cc.vv.userMgr.account,\n            sign:cc.vv.userMgr.sign,\n        };\n        cc.vv.http.sendRequest(\"/get_history_list\",data,onGet);\n    },\n    getGamesOfRoom:function(uuid,callback){\n        var self = this;\n        var onGet = function(ret){\n            if(ret.errcode !== 0){\n                console.log(ret.errmsg);\n            }\n            else{\n                console.log(ret.data);\n                callback(ret.data);\n            }\n        };\n        \n        var data = {\n            account:cc.vv.userMgr.account,\n            sign:cc.vv.userMgr.sign,\n            uuid:uuid,\n        };\n        cc.vv.http.sendRequest(\"/get_games_of_room\",data,onGet);\n    },\n    \n    getDetailOfGame:function(uuid,index,callback){\n        var self = this;\n        var onGet = function(ret){\n            if(ret.errcode !== 0){\n                console.log(ret.errmsg);\n            }\n            else{\n                console.log(ret.data);\n                callback(ret.data);\n            }       \n        };\n        \n        var data = {\n            account:cc.vv.userMgr.account,\n            sign:cc.vv.userMgr.sign,\n            uuid:uuid,\n            index:index,\n        };\n        cc.vv.http.sendRequest(\"/get_detail_of_game\",data,onGet);\n    }\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n    },\n\n    addClickEvent:function(node,target,component,handler){\n        console.log(component + \":\" + handler);\n        var eventHandler = new cc.Component.EventHandler();\n        eventHandler.target = target;\n        eventHandler.component = component;\n        eventHandler.handler = handler;\n\n        var clickEvents = node.getComponent(cc.Button).clickEvents;\n        clickEvents.push(eventHandler);\n    },\n    \n    addSlideEvent:function(node,target,component,handler){\n        var eventHandler = new cc.Component.EventHandler();\n        eventHandler.target = target;\n        eventHandler.component = component;\n        eventHandler.handler = handler;\n\n        var slideEvents = node.getComponent(cc.Slider).slideEvents;\n        slideEvents.push(eventHandler);\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n","var radix = 12;\nvar base = 128 - radix;\nfunction crypto(value){\n    value -= base;\n    var h = Math.floor(value/radix) + base;\n    var l = value%radix + base;\n    return String.fromCharCode(h) + String.fromCharCode(l);\n}\n\nvar encodermap = {}\nvar decodermap = {}\nfor(var i = 0; i < 256; ++i){\n    var code = null;\n    var v = i + 1;\n    if(v >= base){\n        code = crypto(v);\n    }\n    else{\n        code = String.fromCharCode(v);    \n    }\n    \n    encodermap[i] = code;\n    decodermap[code] = i;\n}\n\nfunction encode(data){\n    var content = \"\";\n    var len = data.length;\n    var a = (len >> 24) & 0xff;\n    var b = (len >> 16) & 0xff;\n    var c = (len >> 8) & 0xff;\n    var d = len & 0xff;\n    content += encodermap[a];\n    content += encodermap[b];\n    content += encodermap[c];\n    content += encodermap[d];\n    for(var i = 0; i < data.length; ++i){\n        content += encodermap[data[i]];\n    }\n    return content;\n}\n\nfunction getCode(content,index){\n    var c = content.charCodeAt(index);\n    if(c >= base){\n        c = content.charAt(index) + content.charAt(index + 1);\n    }\n    else{\n        c = content.charAt(index);\n    }\n    return c;\n}\nfunction decode(content){\n    var index = 0;\n    var len = 0;\n    for(var i = 0; i < 4; ++i){\n        var c = getCode(content,index);\n        index += c.length;\n        var v = decodermap[c];\n        len |= v << (3-i)*8;\n    }\n    \n    var newData = new Uint8Array(len);\n    var cnt = 0;\n    while(index < content.length){\n        var c = getCode(content,index);\n        index += c.length;\n        newData[cnt] = decodermap[c];\n        cnt++;\n    }\n    return newData;\n}\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        onPlayCallback:null,\n        _voiceMediaPath:null,\n    },\n\n    // use this for initialization\n    init: function () {\n        /*\n        var url = cc.url.raw(\"resources/test.amr\");\n        var fileData = jsb.fileUtils.getDataFromFile(url);\n        var content = \"\";\n        var sep = \"\";\n        for(var i = 0; i < fileData.length; ++i){\n            content += sep + fileData[i];\n            sep = \",\";\n        }\n        \n        var url = cc.url.raw(\"resources/test.txt\");\n        jsb.fileUtils.writeStringToFile(content,url);\n        \n        var url = cc.url.raw(\"resources/test2.amrs\");\n        var content = encode(fileData);\n        jsb.fileUtils.writeStringToFile(content,url);\n        \n        var url = cc.url.raw(\"resources/test2.amr\");\n        jsb.fileUtils.writeDataToFile(decode(content),url);\n        */\n        \n        // if(cc.sys.isNative){\n        //     this._voiceMediaPath = jsb.fileUtils.getWritablePath() + \"/voicemsgs/\";\n        //     this.setStorageDir(this._voiceMediaPath);\n        // }\n    },\n    \n    prepare:function(filename){\n        //注释调对原声方法的调用\n        // if(!cc.sys.isNative){\n        //     return;\n        // }\n        // cc.vv.audioMgr.pauseAll();\n        // this.clearCache(filename);\n        // if(cc.sys.os == cc.sys.OS_ANDROID){\n        //     jsb.reflection.callStaticMethod(\"com/vivigames/voicesdk/VoiceRecorder\", \"prepare\", \"(Ljava/lang/String;)V\",filename);\n        // }\n        // else if(cc.sys.os == cc.sys.OS_IOS){\n        //     jsb.reflection.callStaticMethod(\"VoiceSDK\", \"prepareRecord:\",filename);\n        // }\n    },\n    \n    release:function(){\n        //注释调对原声方法的调用\n        // if(!cc.sys.isNative){\n        //     return;\n        // }\n        // cc.vv.audioMgr.resumeAll();\n        // if(cc.sys.os == cc.sys.OS_ANDROID){\n        //     jsb.reflection.callStaticMethod(\"com/vivigames/voicesdk/VoiceRecorder\", \"release\", \"()V\");\n        // }\n        // else if(cc.sys.os == cc.sys.OS_IOS){\n        //     jsb.reflection.callStaticMethod(\"VoiceSDK\", \"finishRecord\");\n        // }\n    },\n    \n    cancel:function(){\n        //注释调对原声方法的调用\n        // if(!cc.sys.isNative){\n        //     return;\n        // }\n        // cc.vv.audioMgr.resumeAll();\n        // if(cc.sys.os == cc.sys.OS_ANDROID){\n        //     jsb.reflection.callStaticMethod(\"com/vivigames/voicesdk/VoiceRecorder\", \"cancel\", \"()V\");\n        // }\n        // else if(cc.sys.os == cc.sys.OS_IOS){\n        //     jsb.reflection.callStaticMethod(\"VoiceSDK\", \"cancelRecord\");\n        // }\n    },\n\n    writeVoice:function(filename,voiceData){\n        //注释调对原声方法的调用\n        // if(!cc.sys.isNative){\n        //     return;\n        // }\n        // if(voiceData && voiceData.length > 0){\n        //     var fileData = decode(voiceData);\n        //     var url = this._voiceMediaPath + filename;\n        //     this.clearCache(filename);\n        //     jsb.fileUtils.writeDataToFile(fileData,url); \n        // }\n    },\n    \n    clearCache:function(filename){\n        //注释调对原声方法的调用\n        // if(cc.sys.isNative){\n        //     var url = this._voiceMediaPath + filename;\n        //     //console.log(\"check file:\" + url);\n        //     if(jsb.fileUtils.isFileExist(url)){\n        //         //console.log(\"remove:\" + url);\n        //         jsb.fileUtils.removeFile(url);\n        //     }\n        //     if(jsb.fileUtils.isFileExist(url + \".wav\")){\n        //         //console.log(\"remove:\" + url + \".wav\");\n        //         jsb.fileUtils.removeFile(url + \".wav\");\n        //     }   \n        // }\n    },\n    \n    play:function(filename){\n        //注释调对原声方法的调用\n        // if(!cc.sys.isNative){\n        //     return;\n        // }\n        // cc.vv.audioMgr.pauseAll();\n        // if(cc.sys.os == cc.sys.OS_ANDROID){\n        //     jsb.reflection.callStaticMethod(\"com/vivigames/voicesdk/VoicePlayer\", \"play\", \"(Ljava/lang/String;)V\",filename); \n        // }\n        // else if(cc.sys.os == cc.sys.OS_IOS){\n        //     jsb.reflection.callStaticMethod(\"VoiceSDK\", \"play:\",filename);\n        // }\n        // else{\n        // }\n    },\n    \n    stop:function(){\n        // if(!cc.sys.isNative){\n        //     return;\n        // }\n        // cc.vv.audioMgr.resumeAll();\n        // if(cc.sys.os == cc.sys.OS_ANDROID){\n        //     jsb.reflection.callStaticMethod(\"com/vivigames/voicesdk/VoicePlayer\", \"stop\", \"()V\"); \n        // }\n        // else if(cc.sys.os == cc.sys.OS_IOS){\n        //     jsb.reflection.callStaticMethod(\"VoiceSDK\", \"stopPlay\");\n        // }\n        // else{\n        // }\n    },\n    \n    getVoiceLevel:function(maxLevel){\n        // return Math.floor(Math.random() * maxLevel + 1);\n        // if(cc.sys.os == cc.sys.OS_ANDROID){ \n        //     return jsb.reflection.callStaticMethod(\"com/vivigames/voicesdk/VoiceRecorder\", \"getVoiceLevel\", \"(I)I\",maxLevel);\n        // }\n        // else if(cc.sys.os == cc.sys.OS_IOS){\n        // }\n        // else{\n        //     return Math.floor(Math.random() * maxLevel + 1);\n        // }\n    },\n    \n    getVoiceData:function(filename){\n        // if(cc.sys.isNative){\n        //     var url = this._voiceMediaPath + filename;\n        //     console.log(\"getVoiceData:\" + url);\n        //     var fileData = jsb.fileUtils.getDataFromFile(url);\n        //     if(fileData){\n        //         var content = encode(fileData);\n        //         return content;\n        //     }\n        // }\n        // return \"\";\n    },\n    \n    download:function(){\n        \n    },\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n    \n    setStorageDir:function(dir){\n    //     if(!cc.sys.isNative){\n    //         return;\n    //     }\n    //     if(cc.sys.os == cc.sys.OS_ANDROID){ \n    //         jsb.reflection.callStaticMethod(\"com/vivigames/voicesdk/VoiceRecorder\", \"setStorageDir\", \"(Ljava/lang/String;)V\",dir);    \n    //     }\n    //     else if(cc.sys.os == cc.sys.OS_IOS){\n    //         jsb.reflection.callStaticMethod(\"VoiceSDK\", \"setStorageDir:\",dir);\n    //         if(!jsb.fileUtils.isDirectoryExist(dir)){\n    //             jsb.fileUtils.createDirectory(dir);\n    //         }\n    //     }\n     }\n});\n","cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _lastTouchTime:null,\n        _voice:null,\n        _volume:null,\n        _voice_failed:null,\n        _lastCheckTime:-1,\n        _timeBar:null,\n        MAX_TIME:15000,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        \n        this._voice = cc.find(\"Canvas/voice\");\n        this._voice.active = false;\n        \n        this._voice_failed = cc.find(\"Canvas/voice/voice_failed\");\n        this._voice_failed.active = false;\n        \n        this._timeBar = cc.find(\"Canvas/voice/time\");\n        this._timeBar.scaleX = 0.0;\n        \n        this._volume = cc.find(\"Canvas/voice/volume\");\n        for(var i = 1; i < this._volume.children.length; ++i){\n            this._volume.children[i].active = false;\n        }\n        \n        var btnVoice = cc.find(\"Canvas/voice/voice_failed/btn_ok\");\n        if(btnVoice){\n            cc.vv.utils.addClickEvent(btnVoice,this.node,\"Voice\",\"onBtnOKClicked\");\n        }\n        \n        var self = this;\n        var btnVoice = cc.find(\"Canvas/btn_voice\");\n        if(btnVoice){\n            btnVoice.on(cc.Node.EventType.TOUCH_START,function(){\n                console.log(\"cc.Node.EventType.TOUCH_START\");\n                cc.vv.voiceMgr.prepare(\"record.amr\");\n                self._lastTouchTime = Date.now();\n                self._voice.active = true;\n                self._voice_failed.active = false;\n            });\n\n            btnVoice.on(cc.Node.EventType.TOUCH_MOVE,function(){\n                console.log(\"cc.Node.EventType.TOUCH_MOVE\");\n            });\n                        \n            btnVoice.on(cc.Node.EventType.TOUCH_END,function(){\n                console.log(\"cc.Node.EventType.TOUCH_END\");\n                if(Date.now() - self._lastTouchTime < 1000){\n                    self._voice_failed.active = true;\n                    cc.vv.voiceMgr.cancel();\n                }\n                else{\n                    self.onVoiceOK();\n                }\n                self._lastTouchTime = null;\n            });\n            \n            btnVoice.on(cc.Node.EventType.TOUCH_CANCEL,function(){\n                console.log(\"cc.Node.EventType.TOUCH_CANCEL\");\n                cc.vv.voiceMgr.cancel();\n                self._lastTouchTime = null;\n                self._voice.active = false;\n            });\n        }\n    },\n    \n    onVoiceOK:function(){\n        if(this._lastTouchTime != null){\n            cc.vv.voiceMgr.release();\n            var time = Date.now() - this._lastTouchTime;\n            var msg = cc.vv.voiceMgr.getVoiceData(\"record.amr\");\n            cc.vv.net.send(\"voice_msg\",{msg:msg,time:time});\n        }\n        this._voice.active = false;\n    },\n    \n    onBtnOKClicked:function(){\n        this._voice.active = false;\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    update: function (dt) {\n        if(this._voice.active == true && this._voice_failed.active == false){\n            if(Date.now() - this._lastCheckTime > 300){\n                for(var i = 0; i < this._volume.children.length; ++i){\n                    this._volume.children[i].active = false;\n                }\n                var v = cc.vv.voiceMgr.getVoiceLevel(7);\n                if(v >= 1 && v <= 7){\n                    this._volume.children[v-1].active = true;   \n                }\n                this._lastCheckTime = Date.now();\n            }\n        }\n        \n        if(this._lastTouchTime){\n            var time = Date.now() - this._lastTouchTime;\n            if(time >= this.MAX_TIME){\n                this.onVoiceOK();\n                this._lastTouchTime = null;\n            }\n            else{\n                var percent = time / this.MAX_TIME;\n                this._timeBar.scaleX = 1 - percent;\n            }\n        }\n    },\n});\n","cc.Class({\n    extends: cc.Component,\n    properties: {\n        target:cc.Node,\n        // foo: {\n        //    default: null,\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        _isShow:false,\n        lblContent:cc.Label,\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        if(cc.vv == null){\n            return null;\n        }\n        \n        cc.vv.wc = this;\n        this.node.active = this._isShow;\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    update: function (dt) {\n        this.target.angle = this.target.angle - dt*45;\n    },\n    \n    show:function(content){\n        this._isShow = true;\n        if(this.node){\n            this.node.active = this._isShow;   \n        }\n        if(this.lblContent){\n            if(content == null){\n                content = \"\";\n            }\n            this.lblContent.string = content;\n        }\n    },\n    hide:function(){\n        this._isShow = false;\n        if(this.node){\n            this.node.active = this._isShow;   \n        }\n    }\n});\n","if (!CC_JSB && !cc.sys.isNative) {\n\t(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.io = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n\n\tmodule.exports =  _dereq_('./lib/');\n\n\t},{\"./lib/\":2}],2:[function(_dereq_,module,exports){\n\n\tmodule.exports = _dereq_('./socket');\n\n\t/**\n\t * Exports parser\n\t *\n\t * @api public\n\t *\n\t */\n\tmodule.exports.parser = _dereq_('engine.io-parser');\n\n\t},{\"./socket\":3,\"engine.io-parser\":19}],3:[function(_dereq_,module,exports){\n\t(function (global){\n\t/**\n\t * Module dependencies.\n\t */\n\n\tvar transports = _dereq_('./transports');\n\tvar Emitter = _dereq_('component-emitter');\n\tvar debug = _dereq_('debug')('engine.io-client:socket');\n\tvar index = _dereq_('indexof');\n\tvar parser = _dereq_('engine.io-parser');\n\tvar parseuri = _dereq_('parseuri');\n\tvar parsejson = _dereq_('parsejson');\n\tvar parseqs = _dereq_('parseqs');\n\n\t/**\n\t * Module exports.\n\t */\n\n\tmodule.exports = Socket;\n\n\t/**\n\t * Noop function.\n\t *\n\t * @api private\n\t */\n\n\tfunction noop(){}\n\n\t/**\n\t * Socket constructor.\n\t *\n\t * @param {String|Object} uri or options\n\t * @param {Object} options\n\t * @api public\n\t */\n\n\tfunction Socket(uri, opts){\n\t  if (!(this instanceof Socket)) return new Socket(uri, opts);\n\n\t  opts = opts || {};\n\n\t  if (uri && 'object' == typeof uri) {\n\t\topts = uri;\n\t\turi = null;\n\t  }\n\n\t  if (uri) {\n\t\turi = parseuri(uri);\n\t\topts.hostname = uri.host;\n\t\topts.secure = uri.protocol == 'https' || uri.protocol == 'wss';\n\t\topts.port = uri.port;\n\t\tif (uri.query) opts.query = uri.query;\n\t  } else if (opts.host) {\n\t\topts.hostname = parseuri(opts.host).host;\n\t  }\n\n\t  this.secure = null != opts.secure ? opts.secure :\n\t\t(global.location && 'https:' == location.protocol);\n\n\t  if (opts.hostname && !opts.port) {\n\t\t// if no port is specified manually, use the protocol default\n\t\topts.port = this.secure ? '443' : '80';\n\t  }\n\n\t  this.agent = opts.agent || false;\n\t  this.hostname = opts.hostname ||\n\t\t(global.location ? location.hostname : 'localhost');\n\t  this.port = opts.port || (global.location && location.port ?\n\t\t   location.port :\n\t\t   (this.secure ? 443 : 80));\n\t  this.query = opts.query || {};\n\t  if ('string' == typeof this.query) this.query = parseqs.decode(this.query);\n\t  this.upgrade = false !== opts.upgrade;\n\t  this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n\t  this.forceJSONP = !!opts.forceJSONP;\n\t  this.jsonp = false !== opts.jsonp;\n\t  this.forceBase64 = !!opts.forceBase64;\n\t  this.enablesXDR = !!opts.enablesXDR;\n\t  this.timestampParam = opts.timestampParam || 't';\n\t  this.timestampRequests = opts.timestampRequests;\n\t  this.transports = opts.transports || ['polling', 'websocket'];\n\t  this.readyState = '';\n\t  this.writeBuffer = [];\n\t  this.policyPort = opts.policyPort || 843;\n\t  this.rememberUpgrade = opts.rememberUpgrade || false;\n\t  this.binaryType = null;\n\t  this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n\t  this.perMessageDeflate = false !== opts.perMessageDeflate ? (opts.perMessageDeflate || {}) : false;\n\n\t  if (true === this.perMessageDeflate) this.perMessageDeflate = {};\n\t  if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {\n\t\tthis.perMessageDeflate.threshold = 1024;\n\t  }\n\n\t  // SSL options for Node.js client\n\t  this.pfx = opts.pfx || null;\n\t  this.key = opts.key || null;\n\t  this.passphrase = opts.passphrase || null;\n\t  this.cert = opts.cert || null;\n\t  this.ca = opts.ca || null;\n\t  this.ciphers = opts.ciphers || null;\n\t  this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? true : opts.rejectUnauthorized;\n\n\t  // other options for Node.js client\n\t  var freeGlobal = typeof global == 'object' && global;\n\t  if (freeGlobal.global === freeGlobal) {\n\t\tif (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {\n\t\t  this.extraHeaders = opts.extraHeaders;\n\t\t}\n\t  }\n\n\t  this.open();\n\t}\n\n\tSocket.priorWebsocketSuccess = false;\n\n\t/**\n\t * Mix in `Emitter`.\n\t */\n\n\tEmitter(Socket.prototype);\n\n\t/**\n\t * Protocol version.\n\t *\n\t * @api public\n\t */\n\n\tSocket.protocol = parser.protocol; // this is an int\n\n\t/**\n\t * Expose deps for legacy compatibility\n\t * and standalone browser access.\n\t */\n\n\tSocket.Socket = Socket;\n\tSocket.Transport = _dereq_('./transport');\n\tSocket.transports = _dereq_('./transports');\n\tSocket.parser = _dereq_('engine.io-parser');\n\n\t/**\n\t * Creates transport of the given type.\n\t *\n\t * @param {String} transport name\n\t * @return {Transport}\n\t * @api private\n\t */\n\n\tSocket.prototype.createTransport = function (name) {\n\t  debug('creating transport \"%s\"', name);\n\t  var query = clone(this.query);\n\n\t  // append engine.io protocol identifier\n\t  query.EIO = parser.protocol;\n\n\t  // transport name\n\t  query.transport = name;\n\n\t  // session id if we already have one\n\t  if (this.id) query.sid = this.id;\n\n\t  var transport = new transports[name]({\n\t\tagent: this.agent,\n\t\thostname: this.hostname,\n\t\tport: this.port,\n\t\tsecure: this.secure,\n\t\tpath: this.path,\n\t\tquery: query,\n\t\tforceJSONP: this.forceJSONP,\n\t\tjsonp: this.jsonp,\n\t\tforceBase64: this.forceBase64,\n\t\tenablesXDR: this.enablesXDR,\n\t\ttimestampRequests: this.timestampRequests,\n\t\ttimestampParam: this.timestampParam,\n\t\tpolicyPort: this.policyPort,\n\t\tsocket: this,\n\t\tpfx: this.pfx,\n\t\tkey: this.key,\n\t\tpassphrase: this.passphrase,\n\t\tcert: this.cert,\n\t\tca: this.ca,\n\t\tciphers: this.ciphers,\n\t\trejectUnauthorized: this.rejectUnauthorized,\n\t\tperMessageDeflate: this.perMessageDeflate,\n\t\textraHeaders: this.extraHeaders\n\t  });\n\n\t  return transport;\n\t};\n\n\tfunction clone (obj) {\n\t  var o = {};\n\t  for (var i in obj) {\n\t\tif (obj.hasOwnProperty(i)) {\n\t\t  o[i] = obj[i];\n\t\t}\n\t  }\n\t  return o;\n\t}\n\n\t/**\n\t * Initializes transport to use and starts probe.\n\t *\n\t * @api private\n\t */\n\tSocket.prototype.open = function () {\n\t  var transport;\n\t  if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') != -1) {\n\t\ttransport = 'websocket';\n\t  } else if (0 === this.transports.length) {\n\t\t// Emit error on next tick so it can be listened to\n\t\tvar self = this;\n\t\tsetTimeout(function() {\n\t\t  self.emit('error', 'No transports available');\n\t\t}, 0);\n\t\treturn;\n\t  } else {\n\t\ttransport = this.transports[0];\n\t  }\n\t  this.readyState = 'opening';\n\n\t  // Retry with the next transport if the transport is disabled (jsonp: false)\n\t  try {\n\t\ttransport = this.createTransport(transport);\n\t  } catch (e) {\n\t\tthis.transports.shift();\n\t\tthis.open();\n\t\treturn;\n\t  }\n\n\t  transport.open();\n\t  this.setTransport(transport);\n\t};\n\n\t/**\n\t * Sets the current transport. Disables the existing one (if any).\n\t *\n\t * @api private\n\t */\n\n\tSocket.prototype.setTransport = function(transport){\n\t  debug('setting transport %s', transport.name);\n\t  var self = this;\n\n\t  if (this.transport) {\n\t\tdebug('clearing existing transport %s', this.transport.name);\n\t\tthis.transport.removeAllListeners();\n\t  }\n\n\t  // set up transport\n\t  this.transport = transport;\n\n\t  // set up transport listeners\n\t  transport\n\t  .on('drain', function(){\n\t\tself.onDrain();\n\t  })\n\t  .on('packet', function(packet){\n\t\tself.onPacket(packet);\n\t  })\n\t  .on('error', function(e){\n\t\tself.onError(e);\n\t  })\n\t  .on('close', function(){\n\t\tself.onClose('transport close');\n\t  });\n\t};\n\n\t/**\n\t * Probes a transport.\n\t *\n\t * @param {String} transport name\n\t * @api private\n\t */\n\n\tSocket.prototype.probe = function (name) {\n\t  debug('probing transport \"%s\"', name);\n\t  var transport = this.createTransport(name, { probe: 1 })\n\t\t, failed = false\n\t\t, self = this;\n\n\t  Socket.priorWebsocketSuccess = false;\n\n\t  function onTransportOpen(){\n\t\tif (self.onlyBinaryUpgrades) {\n\t\t  var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n\t\t  failed = failed || upgradeLosesBinary;\n\t\t}\n\t\tif (failed) return;\n\n\t\tdebug('probe transport \"%s\" opened', name);\n\t\ttransport.send([{ type: 'ping', data: 'probe' }]);\n\t\ttransport.once('packet', function (msg) {\n\t\t  if (failed) return;\n\t\t  if ('pong' == msg.type && 'probe' == msg.data) {\n\t\t\tdebug('probe transport \"%s\" pong', name);\n\t\t\tself.upgrading = true;\n\t\t\tself.emit('upgrading', transport);\n\t\t\tif (!transport) return;\n\t\t\tSocket.priorWebsocketSuccess = 'websocket' == transport.name;\n\n\t\t\tdebug('pausing current transport \"%s\"', self.transport.name);\n\t\t\tself.transport.pause(function () {\n\t\t\t  if (failed) return;\n\t\t\t  if ('closed' == self.readyState) return;\n\t\t\t  debug('changing transport and sending upgrade packet');\n\n\t\t\t  cleanup();\n\n\t\t\t  self.setTransport(transport);\n\t\t\t  transport.send([{ type: 'upgrade' }]);\n\t\t\t  self.emit('upgrade', transport);\n\t\t\t  transport = null;\n\t\t\t  self.upgrading = false;\n\t\t\t  self.flush();\n\t\t\t});\n\t\t  } else {\n\t\t\tdebug('probe transport \"%s\" failed', name);\n\t\t\tvar err = new Error('probe error');\n\t\t\terr.transport = transport.name;\n\t\t\tself.emit('upgradeError', err);\n\t\t  }\n\t\t});\n\t  }\n\n\t  function freezeTransport() {\n\t\tif (failed) return;\n\n\t\t// Any callback called by transport should be ignored since now\n\t\tfailed = true;\n\n\t\tcleanup();\n\n\t\ttransport.close();\n\t\ttransport = null;\n\t  }\n\n\t  //Handle any error that happens while probing\n\t  function onerror(err) {\n\t\tvar error = new Error('probe error: ' + err);\n\t\terror.transport = transport.name;\n\n\t\tfreezeTransport();\n\n\t\tdebug('probe transport \"%s\" failed because of error: %s', name, err);\n\n\t\tself.emit('upgradeError', error);\n\t  }\n\n\t  function onTransportClose(){\n\t\tonerror(\"transport closed\");\n\t  }\n\n\t  //When the socket is closed while we're probing\n\t  function onclose(){\n\t\tonerror(\"socket closed\");\n\t  }\n\n\t  //When the socket is upgraded while we're probing\n\t  function onupgrade(to){\n\t\tif (transport && to.name != transport.name) {\n\t\t  debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n\t\t  freezeTransport();\n\t\t}\n\t  }\n\n\t  //Remove all listeners on the transport and on self\n\t  function cleanup(){\n\t\ttransport.removeListener('open', onTransportOpen);\n\t\ttransport.removeListener('error', onerror);\n\t\ttransport.removeListener('close', onTransportClose);\n\t\tself.removeListener('close', onclose);\n\t\tself.removeListener('upgrading', onupgrade);\n\t  }\n\n\t  transport.once('open', onTransportOpen);\n\t  transport.once('error', onerror);\n\t  transport.once('close', onTransportClose);\n\n\t  this.once('close', onclose);\n\t  this.once('upgrading', onupgrade);\n\n\t  transport.open();\n\n\t};\n\n\t/**\n\t * Called when connection is deemed open.\n\t *\n\t * @api public\n\t */\n\n\tSocket.prototype.onOpen = function () {\n\t  debug('socket open');\n\t  this.readyState = 'open';\n\t  Socket.priorWebsocketSuccess = 'websocket' == this.transport.name;\n\t  this.emit('open');\n\t  this.flush();\n\n\t  // we check for `readyState` in case an `open`\n\t  // listener already closed the socket\n\t  if ('open' == this.readyState && this.upgrade && this.transport.pause) {\n\t\tdebug('starting upgrade probes');\n\t\tfor (var i = 0, l = this.upgrades.length; i < l; i++) {\n\t\t  this.probe(this.upgrades[i]);\n\t\t}\n\t  }\n\t};\n\n\t/**\n\t * Handles a packet.\n\t *\n\t * @api private\n\t */\n\n\tSocket.prototype.onPacket = function (packet) {\n\t  if ('opening' == this.readyState || 'open' == this.readyState) {\n\t\tdebug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n\t\tthis.emit('packet', packet);\n\n\t\t// Socket is live - any packet counts\n\t\tthis.emit('heartbeat');\n\n\t\tswitch (packet.type) {\n\t\t  case 'open':\n\t\t\tthis.onHandshake(parsejson(packet.data));\n\t\t\tbreak;\n\n\t\t  case 'pong':\n\t\t\tthis.setPing();\n\t\t\tthis.emit('pong');\n\t\t\tbreak;\n\n\t\t  case 'error':\n\t\t\tvar err = new Error('server error');\n\t\t\terr.code = packet.data;\n\t\t\tthis.onError(err);\n\t\t\tbreak;\n\n\t\t  case 'message':\n\t\t\tthis.emit('data', packet.data);\n\t\t\tthis.emit('message', packet.data);\n\t\t\tbreak;\n\t\t}\n\t  } else {\n\t\tdebug('packet received with socket readyState \"%s\"', this.readyState);\n\t  }\n\t};\n\n\t/**\n\t * Called upon handshake completion.\n\t *\n\t * @param {Object} handshake obj\n\t * @api private\n\t */\n\n\tSocket.prototype.onHandshake = function (data) {\n\t  this.emit('handshake', data);\n\t  this.id = data.sid;\n\t  this.transport.query.sid = data.sid;\n\t  this.upgrades = this.filterUpgrades(data.upgrades);\n\t  this.pingInterval = data.pingInterval;\n\t  this.pingTimeout = data.pingTimeout;\n\t  this.onOpen();\n\t  // In case open handler closes socket\n\t  if  ('closed' == this.readyState) return;\n\t  this.setPing();\n\n\t  // Prolong liveness of socket on heartbeat\n\t  this.removeListener('heartbeat', this.onHeartbeat);\n\t  this.on('heartbeat', this.onHeartbeat);\n\t};\n\n\t/**\n\t * Resets ping timeout.\n\t *\n\t * @api private\n\t */\n\n\tSocket.prototype.onHeartbeat = function (timeout) {\n\t  clearTimeout(this.pingTimeoutTimer);\n\t  var self = this;\n\t  self.pingTimeoutTimer = setTimeout(function () {\n\t\tif ('closed' == self.readyState) return;\n\t\tself.onClose('ping timeout');\n\t  }, timeout || (self.pingInterval + self.pingTimeout));\n\t};\n\n\t/**\n\t * Pings server every `this.pingInterval` and expects response\n\t * within `this.pingTimeout` or closes connection.\n\t *\n\t * @api private\n\t */\n\n\tSocket.prototype.setPing = function () {\n\t  var self = this;\n\t  clearTimeout(self.pingIntervalTimer);\n\t  self.pingIntervalTimer = setTimeout(function () {\n\t\tdebug('writing ping packet - expecting pong within %sms', self.pingTimeout);\n\t\tself.ping();\n\t\tself.onHeartbeat(self.pingTimeout);\n\t  }, self.pingInterval);\n\t};\n\n\t/**\n\t* Sends a ping packet.\n\t*\n\t* @api private\n\t*/\n\n\tSocket.prototype.ping = function () {\n\t  var self = this;\n\t  this.sendPacket('ping', function(){\n\t\tself.emit('ping');\n\t  });\n\t};\n\n\t/**\n\t * Called on `drain` event\n\t *\n\t * @api private\n\t */\n\n\tSocket.prototype.onDrain = function() {\n\t  this.writeBuffer.splice(0, this.prevBufferLen);\n\n\t  // setting prevBufferLen = 0 is very important\n\t  // for example, when upgrading, upgrade packet is sent over,\n\t  // and a nonzero prevBufferLen could cause problems on `drain`\n\t  this.prevBufferLen = 0;\n\n\t  if (0 === this.writeBuffer.length) {\n\t\tthis.emit('drain');\n\t  } else {\n\t\tthis.flush();\n\t  }\n\t};\n\n\t/**\n\t * Flush write buffers.\n\t *\n\t * @api private\n\t */\n\n\tSocket.prototype.flush = function () {\n\t  if ('closed' != this.readyState && this.transport.writable &&\n\t\t!this.upgrading && this.writeBuffer.length) {\n\t\tdebug('flushing %d packets in socket', this.writeBuffer.length);\n\t\tthis.transport.send(this.writeBuffer);\n\t\t// keep track of current length of writeBuffer\n\t\t// splice writeBuffer and callbackBuffer on `drain`\n\t\tthis.prevBufferLen = this.writeBuffer.length;\n\t\tthis.emit('flush');\n\t  }\n\t};\n\n\t/**\n\t * Sends a message.\n\t *\n\t * @param {String} message.\n\t * @param {Function} callback function.\n\t * @param {Object} options.\n\t * @return {Socket} for chaining.\n\t * @api public\n\t */\n\n\tSocket.prototype.write =\n\tSocket.prototype.send = function (msg, options, fn) {\n\t  this.sendPacket('message', msg, options, fn);\n\t  return this;\n\t};\n\n\t/**\n\t * Sends a packet.\n\t *\n\t * @param {String} packet type.\n\t * @param {String} data.\n\t * @param {Object} options.\n\t * @param {Function} callback function.\n\t * @api private\n\t */\n\n\tSocket.prototype.sendPacket = function (type, data, options, fn) {\n\t  if('function' == typeof data) {\n\t\tfn = data;\n\t\tdata = undefined;\n\t  }\n\n\t  if ('function' == typeof options) {\n\t\tfn = options;\n\t\toptions = null;\n\t  }\n\n\t  if ('closing' == this.readyState || 'closed' == this.readyState) {\n\t\treturn;\n\t  }\n\n\t  options = options || {};\n\t  options.compress = false !== options.compress;\n\n\t  var packet = {\n\t\ttype: type,\n\t\tdata: data,\n\t\toptions: options\n\t  };\n\t  this.emit('packetCreate', packet);\n\t  this.writeBuffer.push(packet);\n\t  if (fn) this.once('flush', fn);\n\t  this.flush();\n\t};\n\n\t/**\n\t * Closes the connection.\n\t *\n\t * @api private\n\t */\n\n\tSocket.prototype.close = function () {\n\t  if ('opening' == this.readyState || 'open' == this.readyState) {\n\t\tthis.readyState = 'closing';\n\n\t\tvar self = this;\n\n\t\tif (this.writeBuffer.length) {\n\t\t  this.once('drain', function() {\n\t\t\tif (this.upgrading) {\n\t\t\t  waitForUpgrade();\n\t\t\t} else {\n\t\t\t  close();\n\t\t\t}\n\t\t  });\n\t\t} else if (this.upgrading) {\n\t\t  waitForUpgrade();\n\t\t} else {\n\t\t  close();\n\t\t}\n\t  }\n\n\t  function close() {\n\t\tself.onClose('forced close');\n\t\tdebug('socket closing - telling transport to close');\n\t\tself.transport.close();\n\t  }\n\n\t  function cleanupAndClose() {\n\t\tself.removeListener('upgrade', cleanupAndClose);\n\t\tself.removeListener('upgradeError', cleanupAndClose);\n\t\tclose();\n\t  }\n\n\t  function waitForUpgrade() {\n\t\t// wait for upgrade to finish since we can't send packets while pausing a transport\n\t\tself.once('upgrade', cleanupAndClose);\n\t\tself.once('upgradeError', cleanupAndClose);\n\t  }\n\n\t  return this;\n\t};\n\n\t/**\n\t * Called upon transport error\n\t *\n\t * @api private\n\t */\n\n\tSocket.prototype.onError = function (err) {\n\t  debug('socket error %j', err);\n\t  Socket.priorWebsocketSuccess = false;\n\t  this.emit('error', err);\n\t  this.onClose('transport error', err);\n\t};\n\n\t/**\n\t * Called upon transport close.\n\t *\n\t * @api private\n\t */\n\n\tSocket.prototype.onClose = function (reason, desc) {\n\t  if ('opening' == this.readyState || 'open' == this.readyState || 'closing' == this.readyState) {\n\t\tdebug('socket close with reason: \"%s\"', reason);\n\t\tvar self = this;\n\n\t\t// clear timers\n\t\tclearTimeout(this.pingIntervalTimer);\n\t\tclearTimeout(this.pingTimeoutTimer);\n\n\t\t// stop event from firing again for transport\n\t\tthis.transport.removeAllListeners('close');\n\n\t\t// ensure transport won't stay open\n\t\tthis.transport.close();\n\n\t\t// ignore further transport communication\n\t\tthis.transport.removeAllListeners();\n\n\t\t// set ready state\n\t\tthis.readyState = 'closed';\n\n\t\t// clear session id\n\t\tthis.id = null;\n\n\t\t// emit close event\n\t\tthis.emit('close', reason, desc);\n\n\t\t// clean buffers after, so users can still\n\t\t// grab the buffers on `close` event\n\t\tself.writeBuffer = [];\n\t\tself.prevBufferLen = 0;\n\t  }\n\t};\n\n\t/**\n\t * Filters upgrades, returning only those matching client transports.\n\t *\n\t * @param {Array} server upgrades\n\t * @api private\n\t *\n\t */\n\n\tSocket.prototype.filterUpgrades = function (upgrades) {\n\t  var filteredUpgrades = [];\n\t  for (var i = 0, j = upgrades.length; i<j; i++) {\n\t\tif (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n\t  }\n\t  return filteredUpgrades;\n\t};\n\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n\t},{\"./transport\":4,\"./transports\":5,\"component-emitter\":15,\"debug\":17,\"engine.io-parser\":19,\"indexof\":23,\"parsejson\":26,\"parseqs\":27,\"parseuri\":28}],4:[function(_dereq_,module,exports){\n\t/**\n\t * Module dependencies.\n\t */\n\n\tvar parser = _dereq_('engine.io-parser');\n\tvar Emitter = _dereq_('component-emitter');\n\n\t/**\n\t * Module exports.\n\t */\n\n\tmodule.exports = Transport;\n\n\t/**\n\t * Transport abstract constructor.\n\t *\n\t * @param {Object} options.\n\t * @api private\n\t */\n\n\tfunction Transport (opts) {\n\t  this.path = opts.path;\n\t  this.hostname = opts.hostname;\n\t  this.port = opts.port;\n\t  this.secure = opts.secure;\n\t  this.query = opts.query;\n\t  this.timestampParam = opts.timestampParam;\n\t  this.timestampRequests = opts.timestampRequests;\n\t  this.readyState = '';\n\t  this.agent = opts.agent || false;\n\t  this.socket = opts.socket;\n\t  this.enablesXDR = opts.enablesXDR;\n\n\t  // SSL options for Node.js client\n\t  this.pfx = opts.pfx;\n\t  this.key = opts.key;\n\t  this.passphrase = opts.passphrase;\n\t  this.cert = opts.cert;\n\t  this.ca = opts.ca;\n\t  this.ciphers = opts.ciphers;\n\t  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n\t  // other options for Node.js client\n\t  this.extraHeaders = opts.extraHeaders;\n\t}\n\n\t/**\n\t * Mix in `Emitter`.\n\t */\n\n\tEmitter(Transport.prototype);\n\n\t/**\n\t * Emits an error.\n\t *\n\t * @param {String} str\n\t * @return {Transport} for chaining\n\t * @api public\n\t */\n\n\tTransport.prototype.onError = function (msg, desc) {\n\t  var err = new Error(msg);\n\t  err.type = 'TransportError';\n\t  err.description = desc;\n\t  this.emit('error', err);\n\t  return this;\n\t};\n\n\t/**\n\t * Opens the transport.\n\t *\n\t * @api public\n\t */\n\n\tTransport.prototype.open = function () {\n\t  if ('closed' == this.readyState || '' == this.readyState) {\n\t\tthis.readyState = 'opening';\n\t\tthis.doOpen();\n\t  }\n\n\t  return this;\n\t};\n\n\t/**\n\t * Closes the transport.\n\t *\n\t * @api private\n\t */\n\n\tTransport.prototype.close = function () {\n\t  if ('opening' == this.readyState || 'open' == this.readyState) {\n\t\tthis.doClose();\n\t\tthis.onClose();\n\t  }\n\n\t  return this;\n\t};\n\n\t/**\n\t * Sends multiple packets.\n\t *\n\t * @param {Array} packets\n\t * @api private\n\t */\n\n\tTransport.prototype.send = function(packets){\n\t  if ('open' == this.readyState) {\n\t\tthis.write(packets);\n\t  } else {\n\t\tthrow new Error('Transport not open');\n\t  }\n\t};\n\n\t/**\n\t * Called upon open\n\t *\n\t * @api private\n\t */\n\n\tTransport.prototype.onOpen = function () {\n\t  this.readyState = 'open';\n\t  this.writable = true;\n\t  this.emit('open');\n\t};\n\n\t/**\n\t * Called with data.\n\t *\n\t * @param {String} data\n\t * @api private\n\t */\n\n\tTransport.prototype.onData = function(data){\n\t  var packet = parser.decodePacket(data, this.socket.binaryType);\n\t  this.onPacket(packet);\n\t};\n\n\t/**\n\t * Called with a decoded packet.\n\t */\n\n\tTransport.prototype.onPacket = function (packet) {\n\t  this.emit('packet', packet);\n\t};\n\n\t/**\n\t * Called upon close.\n\t *\n\t * @api private\n\t */\n\n\tTransport.prototype.onClose = function () {\n\t  this.readyState = 'closed';\n\t  this.emit('close');\n\t};\n\n\t},{\"component-emitter\":15,\"engine.io-parser\":19}],5:[function(_dereq_,module,exports){\n\t(function (global){\n\t/**\n\t * Module dependencies\n\t */\n\n\tvar XMLHttpRequest = _dereq_('xmlhttprequest-ssl');\n\tvar XHR = _dereq_('./polling-xhr');\n\tvar JSONP = _dereq_('./polling-jsonp');\n\tvar websocket = _dereq_('./websocket');\n\n\t/**\n\t * Export transports.\n\t */\n\n\texports.polling = polling;\n\texports.websocket = websocket;\n\n\t/**\n\t * Polling transport polymorphic constructor.\n\t * Decides on xhr vs jsonp based on feature detection.\n\t *\n\t * @api private\n\t */\n\n\tfunction polling(opts){\n\t  var xhr;\n\t  var xd = false;\n\t  var xs = false;\n\t  var jsonp = false !== opts.jsonp;\n\n\t  if (global.location) {\n\t\tvar isSSL = 'https:' == location.protocol;\n\t\tvar port = location.port;\n\n\t\t// some user agents have empty `location.port`\n\t\tif (!port) {\n\t\t  port = isSSL ? 443 : 80;\n\t\t}\n\n\t\txd = opts.hostname != location.hostname || port != opts.port;\n\t\txs = opts.secure != isSSL;\n\t  }\n\n\t  opts.xdomain = xd;\n\t  opts.xscheme = xs;\n\t  xhr = new XMLHttpRequest(opts);\n\n\t  if ('open' in xhr && !opts.forceJSONP) {\n\t\treturn new XHR(opts);\n\t  } else {\n\t\tif (!jsonp) throw new Error('JSONP disabled');\n\t\treturn new JSONP(opts);\n\t  }\n\t}\n\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n\t},{\"./polling-jsonp\":6,\"./polling-xhr\":7,\"./websocket\":9,\"xmlhttprequest-ssl\":10}],6:[function(_dereq_,module,exports){\n\t(function (global){\n\n\t/**\n\t * Module requirements.\n\t */\n\n\tvar Polling = _dereq_('./polling');\n\tvar inherit = _dereq_('component-inherit');\n\n\t/**\n\t * Module exports.\n\t */\n\n\tmodule.exports = JSONPPolling;\n\n\t/**\n\t * Cached regular expressions.\n\t */\n\n\tvar rNewline = /\\n/g;\n\tvar rEscapedNewline = /\\\\n/g;\n\n\t/**\n\t * Global JSONP callbacks.\n\t */\n\n\tvar callbacks;\n\n\t/**\n\t * Callbacks count.\n\t */\n\n\tvar index = 0;\n\n\t/**\n\t * Noop.\n\t */\n\n\tfunction empty () { }\n\n\t/**\n\t * JSONP Polling constructor.\n\t *\n\t * @param {Object} opts.\n\t * @api public\n\t */\n\n\tfunction JSONPPolling (opts) {\n\t  Polling.call(this, opts);\n\n\t  this.query = this.query || {};\n\n\t  // define global callbacks array if not present\n\t  // we do this here (lazily) to avoid unneeded global pollution\n\t  if (!callbacks) {\n\t\t// we need to consider multiple engines in the same page\n\t\tif (!global.___eio) global.___eio = [];\n\t\tcallbacks = global.___eio;\n\t  }\n\n\t  // callback identifier\n\t  this.index = callbacks.length;\n\n\t  // add callback to jsonp global\n\t  var self = this;\n\t  callbacks.push(function (msg) {\n\t\tself.onData(msg);\n\t  });\n\n\t  // append to query string\n\t  this.query.j = this.index;\n\n\t  // prevent spurious errors from being emitted when the window is unloaded\n\t  if (global.document && global.addEventListener) {\n\t\tglobal.addEventListener('beforeunload', function () {\n\t\t  if (self.script) self.script.onerror = empty;\n\t\t}, false);\n\t  }\n\t}\n\n\t/**\n\t * Inherits from Polling.\n\t */\n\n\tinherit(JSONPPolling, Polling);\n\n\t/*\n\t * JSONP only supports binary as base64 encoded strings\n\t */\n\n\tJSONPPolling.prototype.supportsBinary = false;\n\n\t/**\n\t * Closes the socket.\n\t *\n\t * @api private\n\t */\n\n\tJSONPPolling.prototype.doClose = function () {\n\t  if (this.script) {\n\t\tthis.script.parentNode.removeChild(this.script);\n\t\tthis.script = null;\n\t  }\n\n\t  if (this.form) {\n\t\tthis.form.parentNode.removeChild(this.form);\n\t\tthis.form = null;\n\t\tthis.iframe = null;\n\t  }\n\n\t  Polling.prototype.doClose.call(this);\n\t};\n\n\t/**\n\t * Starts a poll cycle.\n\t *\n\t * @api private\n\t */\n\n\tJSONPPolling.prototype.doPoll = function () {\n\t  var self = this;\n\t  var script = document.createElement('script');\n\n\t  if (this.script) {\n\t\tthis.script.parentNode.removeChild(this.script);\n\t\tthis.script = null;\n\t  }\n\n\t  script.async = true;\n\t  script.src = this.uri();\n\t  script.onerror = function(e){\n\t\tself.onError('jsonp poll error',e);\n\t  };\n\n\t  var insertAt = document.getElementsByTagName('script')[0];\n\t  if (insertAt) {\n\t\tinsertAt.parentNode.insertBefore(script, insertAt);\n\t  }\n\t  else {\n\t\t(document.head || document.body).appendChild(script);\n\t  }\n\t  this.script = script;\n\n\t  var isUAgecko = 'undefined' != typeof navigator && /gecko/i.test(navigator.userAgent);\n\t  \n\t  if (isUAgecko) {\n\t\tsetTimeout(function () {\n\t\t  var iframe = document.createElement('iframe');\n\t\t  document.body.appendChild(iframe);\n\t\t  document.body.removeChild(iframe);\n\t\t}, 100);\n\t  }\n\t};\n\n\t/**\n\t * Writes with a hidden iframe.\n\t *\n\t * @param {String} data to send\n\t * @param {Function} called upon flush.\n\t * @api private\n\t */\n\n\tJSONPPolling.prototype.doWrite = function (data, fn) {\n\t  var self = this;\n\n\t  if (!this.form) {\n\t\tvar form = document.createElement('form');\n\t\tvar area = document.createElement('textarea');\n\t\tvar id = this.iframeId = 'eio_iframe_' + this.index;\n\t\tvar iframe;\n\n\t\tform.className = 'socketio';\n\t\tform.style.position = 'absolute';\n\t\tform.style.top = '-1000px';\n\t\tform.style.left = '-1000px';\n\t\tform.target = id;\n\t\tform.method = 'POST';\n\t\tform.setAttribute('accept-charset', 'utf-8');\n\t\tarea.name = 'd';\n\t\tform.appendChild(area);\n\t\tdocument.body.appendChild(form);\n\n\t\tthis.form = form;\n\t\tthis.area = area;\n\t  }\n\n\t  this.form.action = this.uri();\n\n\t  function complete () {\n\t\tinitIframe();\n\t\tfn();\n\t  }\n\n\t  function initIframe () {\n\t\tif (self.iframe) {\n\t\t  try {\n\t\t\tself.form.removeChild(self.iframe);\n\t\t  } catch (e) {\n\t\t\tself.onError('jsonp polling iframe removal error', e);\n\t\t  }\n\t\t}\n\n\t\ttry {\n\t\t  // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n\t\t  var html = '<iframe src=\"javascript:0\" name=\"'+ self.iframeId +'\">';\n\t\t  iframe = document.createElement(html);\n\t\t} catch (e) {\n\t\t  iframe = document.createElement('iframe');\n\t\t  iframe.name = self.iframeId;\n\t\t  iframe.src = 'javascript:0';\n\t\t}\n\n\t\tiframe.id = self.iframeId;\n\n\t\tself.form.appendChild(iframe);\n\t\tself.iframe = iframe;\n\t  }\n\n\t  initIframe();\n\n\t  // escape \\n to prevent it from being converted into \\r\\n by some UAs\n\t  // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n\t  data = data.replace(rEscapedNewline, '\\\\\\n');\n\t  this.area.value = data.replace(rNewline, '\\\\n');\n\n\t  try {\n\t\tthis.form.submit();\n\t  } catch(e) {}\n\n\t  if (this.iframe.attachEvent) {\n\t\tthis.iframe.onreadystatechange = function(){\n\t\t  if (self.iframe.readyState == 'complete') {\n\t\t\tcomplete();\n\t\t  }\n\t\t};\n\t  } else {\n\t\tthis.iframe.onload = complete;\n\t  }\n\t};\n\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n\t},{\"./polling\":8,\"component-inherit\":16}],7:[function(_dereq_,module,exports){\n\t(function (global){\n\t/**\n\t * Module requirements.\n\t */\n\n\tvar XMLHttpRequest = _dereq_('xmlhttprequest-ssl');\n\tvar Polling = _dereq_('./polling');\n\tvar Emitter = _dereq_('component-emitter');\n\tvar inherit = _dereq_('component-inherit');\n\tvar debug = _dereq_('debug')('engine.io-client:polling-xhr');\n\n\t/**\n\t * Module exports.\n\t */\n\n\tmodule.exports = XHR;\n\tmodule.exports.Request = Request;\n\n\t/**\n\t * Empty function\n\t */\n\n\tfunction empty(){}\n\n\t/**\n\t * XHR Polling constructor.\n\t *\n\t * @param {Object} opts\n\t * @api public\n\t */\n\n\tfunction XHR(opts){\n\t  Polling.call(this, opts);\n\n\t  if (global.location) {\n\t\tvar isSSL = 'https:' == location.protocol;\n\t\tvar port = location.port;\n\n\t\t// some user agents have empty `location.port`\n\t\tif (!port) {\n\t\t  port = isSSL ? 443 : 80;\n\t\t}\n\n\t\tthis.xd = opts.hostname != global.location.hostname ||\n\t\t  port != opts.port;\n\t\tthis.xs = opts.secure != isSSL;\n\t  } else {\n\t\tthis.extraHeaders = opts.extraHeaders;\n\t  }\n\t}\n\n\t/**\n\t * Inherits from Polling.\n\t */\n\n\tinherit(XHR, Polling);\n\n\t/**\n\t * XHR supports binary\n\t */\n\n\tXHR.prototype.supportsBinary = true;\n\n\t/**\n\t * Creates a request.\n\t *\n\t * @param {String} method\n\t * @api private\n\t */\n\n\tXHR.prototype.request = function(opts){\n\t  opts = opts || {};\n\t  opts.uri = this.uri();\n\t  opts.xd = this.xd;\n\t  opts.xs = this.xs;\n\t  opts.agent = this.agent || false;\n\t  opts.supportsBinary = this.supportsBinary;\n\t  opts.enablesXDR = this.enablesXDR;\n\n\t  // SSL options for Node.js client\n\t  opts.pfx = this.pfx;\n\t  opts.key = this.key;\n\t  opts.passphrase = this.passphrase;\n\t  opts.cert = this.cert;\n\t  opts.ca = this.ca;\n\t  opts.ciphers = this.ciphers;\n\t  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n\t  // other options for Node.js client\n\t  opts.extraHeaders = this.extraHeaders;\n\n\t  return new Request(opts);\n\t};\n\n\t/**\n\t * Sends data.\n\t *\n\t * @param {String} data to send.\n\t * @param {Function} called upon flush.\n\t * @api private\n\t */\n\n\tXHR.prototype.doWrite = function(data, fn){\n\t  var isBinary = typeof data !== 'string' && data !== undefined;\n\t  var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n\t  var self = this;\n\t  req.on('success', fn);\n\t  req.on('error', function(err){\n\t\tself.onError('xhr post error', err);\n\t  });\n\t  this.sendXhr = req;\n\t};\n\n\t/**\n\t * Starts a poll cycle.\n\t *\n\t * @api private\n\t */\n\n\tXHR.prototype.doPoll = function(){\n\t  debug('xhr poll');\n\t  var req = this.request();\n\t  var self = this;\n\t  req.on('data', function(data){\n\t\tself.onData(data);\n\t  });\n\t  req.on('error', function(err){\n\t\tself.onError('xhr poll error', err);\n\t  });\n\t  this.pollXhr = req;\n\t};\n\n\t/**\n\t * Request constructor\n\t *\n\t * @param {Object} options\n\t * @api public\n\t */\n\n\tfunction Request(opts){\n\t  this.method = opts.method || 'GET';\n\t  this.uri = opts.uri;\n\t  this.xd = !!opts.xd;\n\t  this.xs = !!opts.xs;\n\t  this.async = false !== opts.async;\n\t  this.data = undefined != opts.data ? opts.data : null;\n\t  this.agent = opts.agent;\n\t  this.isBinary = opts.isBinary;\n\t  this.supportsBinary = opts.supportsBinary;\n\t  this.enablesXDR = opts.enablesXDR;\n\n\t  // SSL options for Node.js client\n\t  this.pfx = opts.pfx;\n\t  this.key = opts.key;\n\t  this.passphrase = opts.passphrase;\n\t  this.cert = opts.cert;\n\t  this.ca = opts.ca;\n\t  this.ciphers = opts.ciphers;\n\t  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n\t  // other options for Node.js client\n\t  this.extraHeaders = opts.extraHeaders;\n\n\t  this.create();\n\t}\n\n\t/**\n\t * Mix in `Emitter`.\n\t */\n\n\tEmitter(Request.prototype);\n\n\t/**\n\t * Creates the XHR object and sends the request.\n\t *\n\t * @api private\n\t */\n\n\tRequest.prototype.create = function(){\n\t  var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n\n\t  // SSL options for Node.js client\n\t  opts.pfx = this.pfx;\n\t  opts.key = this.key;\n\t  opts.passphrase = this.passphrase;\n\t  opts.cert = this.cert;\n\t  opts.ca = this.ca;\n\t  opts.ciphers = this.ciphers;\n\t  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n\t  var xhr = this.xhr = new XMLHttpRequest(opts);\n\t  var self = this;\n\n\t  try {\n\t\tdebug('xhr open %s: %s', this.method, this.uri);\n\t\txhr.open(this.method, this.uri, this.async);\n\t\ttry {\n\t\t  if (this.extraHeaders) {\n\t\t\txhr.setDisableHeaderCheck(true);\n\t\t\tfor (var i in this.extraHeaders) {\n\t\t\t  if (this.extraHeaders.hasOwnProperty(i)) {\n\t\t\t\txhr.setRequestHeader(i, this.extraHeaders[i]);\n\t\t\t  }\n\t\t\t}\n\t\t  }\n\t\t} catch (e) {}\n\t\tif (this.supportsBinary) {\n\t\t  // This has to be done after open because Firefox is stupid\n\t\t  // http://stackoverflow.com/questions/13216903/get-binary-data-with-xmlhttprequest-in-a-firefox-extension\n\t\t  xhr.responseType = 'arraybuffer';\n\t\t}\n\n\t\tif ('POST' == this.method) {\n\t\t  try {\n\t\t\tif (this.isBinary) {\n\t\t\t  xhr.setRequestHeader('Content-type', 'application/octet-stream');\n\t\t\t} else {\n\t\t\t  xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n\t\t\t}\n\t\t  } catch (e) {}\n\t\t}\n\n\t\t// ie6 check\n\t\tif ('withCredentials' in xhr) {\n\t\t  xhr.withCredentials = true;\n\t\t}\n\n\t\tif (this.hasXDR()) {\n\t\t  xhr.onload = function(){\n\t\t\tself.onLoad();\n\t\t  };\n\t\t  xhr.onerror = function(){\n\t\t\tself.onError(xhr.responseText);\n\t\t  };\n\t\t} else {\n\t\t  xhr.onreadystatechange = function(){\n\t\t\tif (4 != xhr.readyState) return;\n\t\t\tif (200 == xhr.status || 1223 == xhr.status) {\n\t\t\t  self.onLoad();\n\t\t\t} else {\n\t\t\t  // make sure the `error` event handler that's user-set\n\t\t\t  // does not throw in the same tick and gets caught here\n\t\t\t  setTimeout(function(){\n\t\t\t\tself.onError(xhr.status);\n\t\t\t  }, 0);\n\t\t\t}\n\t\t  };\n\t\t}\n\n\t\tdebug('xhr data %s', this.data);\n\t\txhr.send(this.data);\n\t  } catch (e) {\n\t\t// Need to defer since .create() is called directly fhrom the constructor\n\t\t// and thus the 'error' event can only be only bound *after* this exception\n\t\t// occurs.  Therefore, also, we cannot throw here at all.\n\t\tsetTimeout(function() {\n\t\t  self.onError(e);\n\t\t}, 0);\n\t\treturn;\n\t  }\n\n\t  if (global.document) {\n\t\tthis.index = Request.requestsCount++;\n\t\tRequest.requests[this.index] = this;\n\t  }\n\t};\n\n\t/**\n\t * Called upon successful response.\n\t *\n\t * @api private\n\t */\n\n\tRequest.prototype.onSuccess = function(){\n\t  this.emit('success');\n\t  this.cleanup();\n\t};\n\n\t/**\n\t * Called if we have data.\n\t *\n\t * @api private\n\t */\n\n\tRequest.prototype.onData = function(data){\n\t  this.emit('data', data);\n\t  this.onSuccess();\n\t};\n\n\t/**\n\t * Called upon error.\n\t *\n\t * @api private\n\t */\n\n\tRequest.prototype.onError = function(err){\n\t  this.emit('error', err);\n\t  this.cleanup(true);\n\t};\n\n\t/**\n\t * Cleans up house.\n\t *\n\t * @api private\n\t */\n\n\tRequest.prototype.cleanup = function(fromError){\n\t  if ('undefined' == typeof this.xhr || null === this.xhr) {\n\t\treturn;\n\t  }\n\t  // xmlhttprequest\n\t  if (this.hasXDR()) {\n\t\tthis.xhr.onload = this.xhr.onerror = empty;\n\t  } else {\n\t\tthis.xhr.onreadystatechange = empty;\n\t  }\n\n\t  if (fromError) {\n\t\ttry {\n\t\t  this.xhr.abort();\n\t\t} catch(e) {}\n\t  }\n\n\t  if (global.document) {\n\t\tdelete Request.requests[this.index];\n\t  }\n\n\t  this.xhr = null;\n\t};\n\n\t/**\n\t * Called upon load.\n\t *\n\t * @api private\n\t */\n\n\tRequest.prototype.onLoad = function(){\n\t  var data;\n\t  try {\n\t\tvar contentType;\n\t\ttry {\n\t\t  contentType = this.xhr.getResponseHeader('Content-Type').split(';')[0];\n\t\t} catch (e) {}\n\t\tif (contentType === 'application/octet-stream') {\n\t\t  data = this.xhr.response;\n\t\t} else {\n\t\t  if (!this.supportsBinary) {\n\t\t\tdata = this.xhr.responseText;\n\t\t  } else {\n\t\t\ttry {\n\t\t\t  data = String.fromCharCode.apply(null, new Uint8Array(this.xhr.response));\n\t\t\t} catch (e) {\n\t\t\t  var ui8Arr = new Uint8Array(this.xhr.response);\n\t\t\t  var dataArray = [];\n\t\t\t  for (var idx = 0, length = ui8Arr.length; idx < length; idx++) {\n\t\t\t\tdataArray.push(ui8Arr[idx]);\n\t\t\t  }\n\n\t\t\t  data = String.fromCharCode.apply(null, dataArray);\n\t\t\t}\n\t\t  }\n\t\t}\n\t  } catch (e) {\n\t\tthis.onError(e);\n\t  }\n\t  if (null != data) {\n\t\tthis.onData(data);\n\t  }\n\t};\n\n\t/**\n\t * Check if it has XDomainRequest.\n\t *\n\t * @api private\n\t */\n\n\tRequest.prototype.hasXDR = function(){\n\t  return 'undefined' !== typeof global.XDomainRequest && !this.xs && this.enablesXDR;\n\t};\n\n\t/**\n\t * Aborts the request.\n\t *\n\t * @api public\n\t */\n\n\tRequest.prototype.abort = function(){\n\t  this.cleanup();\n\t};\n\n\t/**\n\t * Aborts pending requests when unloading the window. This is needed to prevent\n\t * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n\t * emitted.\n\t */\n\n\tif (global.document) {\n\t  Request.requestsCount = 0;\n\t  Request.requests = {};\n\t  if (global.attachEvent) {\n\t\tglobal.attachEvent('onunload', unloadHandler);\n\t  } else if (global.addEventListener) {\n\t\tglobal.addEventListener('beforeunload', unloadHandler, false);\n\t  }\n\t}\n\n\tfunction unloadHandler() {\n\t  for (var i in Request.requests) {\n\t\tif (Request.requests.hasOwnProperty(i)) {\n\t\t  Request.requests[i].abort();\n\t\t}\n\t  }\n\t}\n\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n\t},{\"./polling\":8,\"component-emitter\":15,\"component-inherit\":16,\"debug\":17,\"xmlhttprequest-ssl\":10}],8:[function(_dereq_,module,exports){\n\t/**\n\t * Module dependencies.\n\t */\n\n\tvar Transport = _dereq_('../transport');\n\tvar parseqs = _dereq_('parseqs');\n\tvar parser = _dereq_('engine.io-parser');\n\tvar inherit = _dereq_('component-inherit');\n\tvar yeast = _dereq_('yeast');\n\tvar debug = _dereq_('debug')('engine.io-client:polling');\n\n\t/**\n\t * Module exports.\n\t */\n\n\tmodule.exports = Polling;\n\n\t/**\n\t * Is XHR2 supported?\n\t */\n\n\tvar hasXHR2 = (function() {\n\t  var XMLHttpRequest = _dereq_('xmlhttprequest-ssl');\n\t  var xhr = new XMLHttpRequest({ xdomain: false });\n\t  return null != xhr.responseType;\n\t})();\n\n\t/**\n\t * Polling interface.\n\t *\n\t * @param {Object} opts\n\t * @api private\n\t */\n\n\tfunction Polling(opts){\n\t  var forceBase64 = (opts && opts.forceBase64);\n\t  if (!hasXHR2 || forceBase64) {\n\t\tthis.supportsBinary = false;\n\t  }\n\t  Transport.call(this, opts);\n\t}\n\n\t/**\n\t * Inherits from Transport.\n\t */\n\n\tinherit(Polling, Transport);\n\n\t/**\n\t * Transport name.\n\t */\n\n\tPolling.prototype.name = 'polling';\n\n\t/**\n\t * Opens the socket (triggers polling). We write a PING message to determine\n\t * when the transport is open.\n\t *\n\t * @api private\n\t */\n\n\tPolling.prototype.doOpen = function(){\n\t  this.poll();\n\t};\n\n\t/**\n\t * Pauses polling.\n\t *\n\t * @param {Function} callback upon buffers are flushed and transport is paused\n\t * @api private\n\t */\n\n\tPolling.prototype.pause = function(onPause){\n\t  var pending = 0;\n\t  var self = this;\n\n\t  this.readyState = 'pausing';\n\n\t  function pause(){\n\t\tdebug('paused');\n\t\tself.readyState = 'paused';\n\t\tonPause();\n\t  }\n\n\t  if (this.polling || !this.writable) {\n\t\tvar total = 0;\n\n\t\tif (this.polling) {\n\t\t  debug('we are currently polling - waiting to pause');\n\t\t  total++;\n\t\t  this.once('pollComplete', function(){\n\t\t\tdebug('pre-pause polling complete');\n\t\t\t--total || pause();\n\t\t  });\n\t\t}\n\n\t\tif (!this.writable) {\n\t\t  debug('we are currently writing - waiting to pause');\n\t\t  total++;\n\t\t  this.once('drain', function(){\n\t\t\tdebug('pre-pause writing complete');\n\t\t\t--total || pause();\n\t\t  });\n\t\t}\n\t  } else {\n\t\tpause();\n\t  }\n\t};\n\n\t/**\n\t * Starts polling cycle.\n\t *\n\t * @api public\n\t */\n\n\tPolling.prototype.poll = function(){\n\t  debug('polling');\n\t  this.polling = true;\n\t  this.doPoll();\n\t  this.emit('poll');\n\t};\n\n\t/**\n\t * Overloads onData to detect payloads.\n\t *\n\t * @api private\n\t */\n\n\tPolling.prototype.onData = function(data){\n\t  var self = this;\n\t  debug('polling got data %s', data);\n\t  var callback = function(packet, index, total) {\n\t\t// if its the first message we consider the transport open\n\t\tif ('opening' == self.readyState) {\n\t\t  self.onOpen();\n\t\t}\n\n\t\t// if its a close packet, we close the ongoing requests\n\t\tif ('close' == packet.type) {\n\t\t  self.onClose();\n\t\t  return false;\n\t\t}\n\n\t\t// otherwise bypass onData and handle the message\n\t\tself.onPacket(packet);\n\t  };\n\n\t  // decode payload\n\t  parser.decodePayload(data, this.socket.binaryType, callback);\n\n\t  // if an event did not trigger closing\n\t  if ('closed' != this.readyState) {\n\t\t// if we got data we're not polling\n\t\tthis.polling = false;\n\t\tthis.emit('pollComplete');\n\n\t\tif ('open' == this.readyState) {\n\t\t  this.poll();\n\t\t} else {\n\t\t  debug('ignoring poll - transport state \"%s\"', this.readyState);\n\t\t}\n\t  }\n\t};\n\n\t/**\n\t * For polling, send a close packet.\n\t *\n\t * @api private\n\t */\n\n\tPolling.prototype.doClose = function(){\n\t  var self = this;\n\n\t  function close(){\n\t\tdebug('writing close packet');\n\t\tself.write([{ type: 'close' }]);\n\t  }\n\n\t  if ('open' == this.readyState) {\n\t\tdebug('transport open - closing');\n\t\tclose();\n\t  } else {\n\t\t// in case we're trying to close while\n\t\t// handshaking is in progress (GH-164)\n\t\tdebug('transport not open - deferring close');\n\t\tthis.once('open', close);\n\t  }\n\t};\n\n\t/**\n\t * Writes a packets payload.\n\t *\n\t * @param {Array} data packets\n\t * @param {Function} drain callback\n\t * @api private\n\t */\n\n\tPolling.prototype.write = function(packets){\n\t  var self = this;\n\t  this.writable = false;\n\t  var callbackfn = function() {\n\t\tself.writable = true;\n\t\tself.emit('drain');\n\t  };\n\n\t  var self = this;\n\t  parser.encodePayload(packets, this.supportsBinary, function(data) {\n\t\tself.doWrite(data, callbackfn);\n\t  });\n\t};\n\n\t/**\n\t * Generates uri for connection.\n\t *\n\t * @api private\n\t */\n\n\tPolling.prototype.uri = function(){\n\t  var query = this.query || {};\n\t  var schema = this.secure ? 'https' : 'http';\n\t  var port = '';\n\n\t  // cache busting is forced\n\t  if (false !== this.timestampRequests) {\n\t\tquery[this.timestampParam] = yeast();\n\t  }\n\n\t  if (!this.supportsBinary && !query.sid) {\n\t\tquery.b64 = 1;\n\t  }\n\n\t  query = parseqs.encode(query);\n\n\t  // avoid port if default for schema\n\t  if (this.port && (('https' == schema && this.port != 443) ||\n\t\t ('http' == schema && this.port != 80))) {\n\t\tport = ':' + this.port;\n\t  }\n\n\t  // prepend ? to query\n\t  if (query.length) {\n\t\tquery = '?' + query;\n\t  }\n\n\t  var ipv6 = this.hostname.indexOf(':') !== -1;\n\t  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n\t};\n\n\t},{\"../transport\":4,\"component-inherit\":16,\"debug\":17,\"engine.io-parser\":19,\"parseqs\":27,\"xmlhttprequest-ssl\":10,\"yeast\":30}],9:[function(_dereq_,module,exports){\n\t(function (global){\n\t/**\n\t * Module dependencies.\n\t */\n\n\tvar Transport = _dereq_('../transport');\n\tvar parser = _dereq_('engine.io-parser');\n\tvar parseqs = _dereq_('parseqs');\n\tvar inherit = _dereq_('component-inherit');\n\tvar yeast = _dereq_('yeast');\n\tvar debug = _dereq_('debug')('engine.io-client:websocket');\n\tvar BrowserWebSocket = global.WebSocket || global.MozWebSocket;\n\n\t/**\n\t * Get either the `WebSocket` or `MozWebSocket` globals\n\t * in the browser or try to resolve WebSocket-compatible\n\t * interface exposed by `ws` for Node-like environment.\n\t */\n\n\tvar WebSocket = BrowserWebSocket;\n\tif (!WebSocket && typeof window === 'undefined') {\n\t  try {\n\t\tWebSocket = _dereq_('ws');\n\t  } catch (e) { }\n\t}\n\n\t/**\n\t * Module exports.\n\t */\n\n\tmodule.exports = WS;\n\n\t/**\n\t * WebSocket transport constructor.\n\t *\n\t * @api {Object} connection options\n\t * @api public\n\t */\n\n\tfunction WS(opts){\n\t  var forceBase64 = (opts && opts.forceBase64);\n\t  if (forceBase64) {\n\t\tthis.supportsBinary = false;\n\t  }\n\t  this.perMessageDeflate = opts.perMessageDeflate;\n\t  Transport.call(this, opts);\n\t}\n\n\t/**\n\t * Inherits from Transport.\n\t */\n\n\tinherit(WS, Transport);\n\n\t/**\n\t * Transport name.\n\t *\n\t * @api public\n\t */\n\n\tWS.prototype.name = 'websocket';\n\n\t/*\n\t * WebSockets support binary\n\t */\n\n\tWS.prototype.supportsBinary = true;\n\n\t/**\n\t * Opens socket.\n\t *\n\t * @api private\n\t */\n\n\tWS.prototype.doOpen = function(){\n\t  if (!this.check()) {\n\t\t// let probe timeout\n\t\treturn;\n\t  }\n\n\t  var self = this;\n\t  var uri = this.uri();\n\t  var protocols = void(0);\n\t  var opts = {\n\t\tagent: this.agent,\n\t\tperMessageDeflate: this.perMessageDeflate\n\t  };\n\n\t  // SSL options for Node.js client\n\t  opts.pfx = this.pfx;\n\t  opts.key = this.key;\n\t  opts.passphrase = this.passphrase;\n\t  opts.cert = this.cert;\n\t  opts.ca = this.ca;\n\t  opts.ciphers = this.ciphers;\n\t  opts.rejectUnauthorized = this.rejectUnauthorized;\n\t  if (this.extraHeaders) {\n\t\topts.headers = this.extraHeaders;\n\t  }\n\n\t  this.ws = BrowserWebSocket ? new WebSocket(uri) : new WebSocket(uri, protocols, opts);\n\n\t  if (this.ws.binaryType === undefined) {\n\t\tthis.supportsBinary = false;\n\t  }\n\n\t  if (this.ws.supports && this.ws.supports.binary) {\n\t\tthis.supportsBinary = true;\n\t\tthis.ws.binaryType = 'buffer';\n\t  } else {\n\t\tthis.ws.binaryType = 'arraybuffer';\n\t  }\n\n\t  this.addEventListeners();\n\t};\n\n\t/**\n\t * Adds event listeners to the socket\n\t *\n\t * @api private\n\t */\n\n\tWS.prototype.addEventListeners = function(){\n\t  var self = this;\n\n\t  this.ws.onopen = function(){\n\t\tself.onOpen();\n\t  };\n\t  this.ws.onclose = function(){\n\t\tself.onClose();\n\t  };\n\t  this.ws.onmessage = function(ev){\n\t\tself.onData(ev.data);\n\t  };\n\t  this.ws.onerror = function(e){\n\t\tself.onError('websocket error', e);\n\t  };\n\t};\n\n\t/**\n\t * Override `onData` to use a timer on iOS.\n\t * See: https://gist.github.com/mloughran/2052006\n\t *\n\t * @api private\n\t */\n\n\tif ('undefined' != typeof navigator\n\t  && /iPad|iPhone|iPod/i.test(navigator.userAgent)) {\n\t  WS.prototype.onData = function(data){\n\t\tvar self = this;\n\t\tsetTimeout(function(){\n\t\t  Transport.prototype.onData.call(self, data);\n\t\t}, 0);\n\t  };\n\t}\n\n\t/**\n\t * Writes data to socket.\n\t *\n\t * @param {Array} array of packets.\n\t * @api private\n\t */\n\n\tWS.prototype.write = function(packets){\n\t  var self = this;\n\t  this.writable = false;\n\n\t  // encodePacket efficient as it uses WS framing\n\t  // no need for encodePayload\n\t  var total = packets.length;\n\t  for (var i = 0, l = total; i < l; i++) {\n\t\t(function(packet) {\n\t\t  parser.encodePacket(packet, self.supportsBinary, function(data) {\n\t\t\tif (!BrowserWebSocket) {\n\t\t\t  // always create a new object (GH-437)\n\t\t\t  var opts = {};\n\t\t\t  if (packet.options) {\n\t\t\t\topts.compress = packet.options.compress;\n\t\t\t  }\n\n\t\t\t  if (self.perMessageDeflate) {\n\t\t\t\tvar len = 'string' == typeof data ? global.Buffer.byteLength(data) : data.length;\n\t\t\t\tif (len < self.perMessageDeflate.threshold) {\n\t\t\t\t  opts.compress = false;\n\t\t\t\t}\n\t\t\t  }\n\t\t\t}\n\n\t\t\t//Sometimes the websocket has already been closed but the browser didn't\n\t\t\t//have a chance of informing us about it yet, in that case send will\n\t\t\t//throw an error\n\t\t\ttry {\n\t\t\t  if (BrowserWebSocket) {\n\t\t\t\t// TypeError is thrown when passing the second argument on Safari\n\t\t\t\tself.ws.send(data);\n\t\t\t  } else {\n\t\t\t\tself.ws.send(data, opts);\n\t\t\t  }\n\t\t\t} catch (e){\n\t\t\t  debug('websocket closed before onclose event');\n\t\t\t}\n\n\t\t\t--total || done();\n\t\t  });\n\t\t})(packets[i]);\n\t  }\n\n\t  function done(){\n\t\tself.emit('flush');\n\n\t\t// fake drain\n\t\t// defer to next tick to allow Socket to clear writeBuffer\n\t\tsetTimeout(function(){\n\t\t  self.writable = true;\n\t\t  self.emit('drain');\n\t\t}, 0);\n\t  }\n\t};\n\n\t/**\n\t * Called upon close\n\t *\n\t * @api private\n\t */\n\n\tWS.prototype.onClose = function(){\n\t  Transport.prototype.onClose.call(this);\n\t};\n\n\t/**\n\t * Closes socket.\n\t *\n\t * @api private\n\t */\n\n\tWS.prototype.doClose = function(){\n\t  if (typeof this.ws !== 'undefined') {\n\t\tthis.ws.close();\n\t  }\n\t};\n\n\t/**\n\t * Generates uri for connection.\n\t *\n\t * @api private\n\t */\n\n\tWS.prototype.uri = function(){\n\t  var query = this.query || {};\n\t  var schema = this.secure ? 'wss' : 'ws';\n\t  var port = '';\n\n\t  // avoid port if default for schema\n\t  if (this.port && (('wss' == schema && this.port != 443)\n\t\t|| ('ws' == schema && this.port != 80))) {\n\t\tport = ':' + this.port;\n\t  }\n\n\t  // append timestamp to URI\n\t  if (this.timestampRequests) {\n\t\tquery[this.timestampParam] = yeast();\n\t  }\n\n\t  // communicate binary support capabilities\n\t  if (!this.supportsBinary) {\n\t\tquery.b64 = 1;\n\t  }\n\n\t  query = parseqs.encode(query);\n\n\t  // prepend ? to query\n\t  if (query.length) {\n\t\tquery = '?' + query;\n\t  }\n\n\t  var ipv6 = this.hostname.indexOf(':') !== -1;\n\t  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n\t};\n\n\t/**\n\t * Feature detection for WebSocket.\n\t *\n\t * @return {Boolean} whether this transport is available.\n\t * @api public\n\t */\n\n\tWS.prototype.check = function(){\n\t  return !!WebSocket && !('__initialize' in WebSocket && this.name === WS.prototype.name);\n\t};\n\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n\t},{\"../transport\":4,\"component-inherit\":16,\"debug\":17,\"engine.io-parser\":19,\"parseqs\":27,\"ws\":undefined,\"yeast\":30}],10:[function(_dereq_,module,exports){\n\t// browser shim for xmlhttprequest module\n\tvar hasCORS = _dereq_('has-cors');\n\n\tmodule.exports = function(opts) {\n\t  var xdomain = opts.xdomain;\n\n\t  // scheme must be same when usign XDomainRequest\n\t  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n\t  var xscheme = opts.xscheme;\n\n\t  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n\t  // https://github.com/Automattic/engine.io-client/pull/217\n\t  var enablesXDR = opts.enablesXDR;\n\n\t  // XMLHttpRequest can be disabled on IE\n\t  try {\n\t\tif ('undefined' != typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n\t\t  return new XMLHttpRequest();\n\t\t}\n\t  } catch (e) { }\n\n\t  // Use XDomainRequest for IE8 if enablesXDR is true\n\t  // because loading bar keeps flashing when using jsonp-polling\n\t  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n\t  try {\n\t\tif ('undefined' != typeof XDomainRequest && !xscheme && enablesXDR) {\n\t\t  return new XDomainRequest();\n\t\t}\n\t  } catch (e) { }\n\n\t  if (!xdomain) {\n\t\ttry {\n\t\t  return new ActiveXObject('Microsoft.XMLHTTP');\n\t\t} catch(e) { }\n\t  }\n\t}\n\n\t},{\"has-cors\":22}],11:[function(_dereq_,module,exports){\n\tmodule.exports = after\n\n\tfunction after(count, callback, err_cb) {\n\t\tvar bail = false\n\t\terr_cb = err_cb || noop\n\t\tproxy.count = count\n\n\t\treturn (count === 0) ? callback() : proxy\n\n\t\tfunction proxy(err, result) {\n\t\t\tif (proxy.count <= 0) {\n\t\t\t\tthrow new Error('after called too many times')\n\t\t\t}\n\t\t\t--proxy.count\n\n\t\t\t// after first error, rest are passed to err_cb\n\t\t\tif (err) {\n\t\t\t\tbail = true\n\t\t\t\tcallback(err)\n\t\t\t\t// future error callbacks will go to error handler\n\t\t\t\tcallback = err_cb\n\t\t\t} else if (proxy.count === 0 && !bail) {\n\t\t\t\tcallback(null, result)\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction noop() {}\n\n\t},{}],12:[function(_dereq_,module,exports){\n\t/**\n\t * An abstraction for slicing an arraybuffer even when\n\t * ArrayBuffer.prototype.slice is not supported\n\t *\n\t * @api public\n\t */\n\n\tmodule.exports = function(arraybuffer, start, end) {\n\t  var bytes = arraybuffer.byteLength;\n\t  start = start || 0;\n\t  end = end || bytes;\n\n\t  if (arraybuffer.slice) { return arraybuffer.slice(start, end); }\n\n\t  if (start < 0) { start += bytes; }\n\t  if (end < 0) { end += bytes; }\n\t  if (end > bytes) { end = bytes; }\n\n\t  if (start >= bytes || start >= end || bytes === 0) {\n\t\treturn new ArrayBuffer(0);\n\t  }\n\n\t  var abv = new Uint8Array(arraybuffer);\n\t  var result = new Uint8Array(end - start);\n\t  for (var i = start, ii = 0; i < end; i++, ii++) {\n\t\tresult[ii] = abv[i];\n\t  }\n\t  return result.buffer;\n\t};\n\n\t},{}],13:[function(_dereq_,module,exports){\n\t/*\n\t * base64-arraybuffer\n\t * https://github.com/niklasvh/base64-arraybuffer\n\t *\n\t * Copyright (c) 2012 Niklas von Hertzen\n\t * Licensed under the MIT license.\n\t */\n\t(function(chars){\n\t  \"use strict\";\n\n\t  exports.encode = function(arraybuffer) {\n\t\tvar bytes = new Uint8Array(arraybuffer),\n\t\ti, len = bytes.length, base64 = \"\";\n\n\t\tfor (i = 0; i < len; i+=3) {\n\t\t  base64 += chars[bytes[i] >> 2];\n\t\t  base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n\t\t  base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n\t\t  base64 += chars[bytes[i + 2] & 63];\n\t\t}\n\n\t\tif ((len % 3) === 2) {\n\t\t  base64 = base64.substring(0, base64.length - 1) + \"=\";\n\t\t} else if (len % 3 === 1) {\n\t\t  base64 = base64.substring(0, base64.length - 2) + \"==\";\n\t\t}\n\n\t\treturn base64;\n\t  };\n\n\t  exports.decode =  function(base64) {\n\t\tvar bufferLength = base64.length * 0.75,\n\t\tlen = base64.length, i, p = 0,\n\t\tencoded1, encoded2, encoded3, encoded4;\n\n\t\tif (base64[base64.length - 1] === \"=\") {\n\t\t  bufferLength--;\n\t\t  if (base64[base64.length - 2] === \"=\") {\n\t\t\tbufferLength--;\n\t\t  }\n\t\t}\n\n\t\tvar arraybuffer = new ArrayBuffer(bufferLength),\n\t\tbytes = new Uint8Array(arraybuffer);\n\n\t\tfor (i = 0; i < len; i+=4) {\n\t\t  encoded1 = chars.indexOf(base64[i]);\n\t\t  encoded2 = chars.indexOf(base64[i+1]);\n\t\t  encoded3 = chars.indexOf(base64[i+2]);\n\t\t  encoded4 = chars.indexOf(base64[i+3]);\n\n\t\t  bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n\t\t  bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n\t\t  bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n\t\t}\n\n\t\treturn arraybuffer;\n\t  };\n\t})(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\");\n\n\t},{}],14:[function(_dereq_,module,exports){\n\t(function (global){\n\t/**\n\t * Create a blob builder even when vendor prefixes exist\n\t */\n\n\tvar BlobBuilder = global.BlobBuilder\n\t  || global.WebKitBlobBuilder\n\t  || global.MSBlobBuilder\n\t  || global.MozBlobBuilder;\n\n\t/**\n\t * Check if Blob constructor is supported\n\t */\n\n\tvar blobSupported = (function() {\n\t  try {\n\t\tvar a = new Blob(['hi']);\n\t\treturn a.size === 2;\n\t  } catch(e) {\n\t\treturn false;\n\t  }\n\t})();\n\n\t/**\n\t * Check if Blob constructor supports ArrayBufferViews\n\t * Fails in Safari 6, so we need to map to ArrayBuffers there.\n\t */\n\n\tvar blobSupportsArrayBufferView = blobSupported && (function() {\n\t  try {\n\t\tvar b = new Blob([new Uint8Array([1,2])]);\n\t\treturn b.size === 2;\n\t  } catch(e) {\n\t\treturn false;\n\t  }\n\t})();\n\n\t/**\n\t * Check if BlobBuilder is supported\n\t */\n\n\tvar blobBuilderSupported = BlobBuilder\n\t  && BlobBuilder.prototype.append\n\t  && BlobBuilder.prototype.getBlob;\n\n\t/**\n\t * Helper function that maps ArrayBufferViews to ArrayBuffers\n\t * Used by BlobBuilder constructor and old browsers that didn't\n\t * support it in the Blob constructor.\n\t */\n\n\tfunction mapArrayBufferViews(ary) {\n\t  for (var i = 0; i < ary.length; i++) {\n\t\tvar chunk = ary[i];\n\t\tif (chunk.buffer instanceof ArrayBuffer) {\n\t\t  var buf = chunk.buffer;\n\n\t\t  // if this is a subarray, make a copy so we only\n\t\t  // include the subarray region from the underlying buffer\n\t\t  if (chunk.byteLength !== buf.byteLength) {\n\t\t\tvar copy = new Uint8Array(chunk.byteLength);\n\t\t\tcopy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\n\t\t\tbuf = copy.buffer;\n\t\t  }\n\n\t\t  ary[i] = buf;\n\t\t}\n\t  }\n\t}\n\n\tfunction BlobBuilderConstructor(ary, options) {\n\t  options = options || {};\n\n\t  var bb = new BlobBuilder();\n\t  mapArrayBufferViews(ary);\n\n\t  for (var i = 0; i < ary.length; i++) {\n\t\tbb.append(ary[i]);\n\t  }\n\n\t  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\n\t};\n\n\tfunction BlobConstructor(ary, options) {\n\t  mapArrayBufferViews(ary);\n\t  return new Blob(ary, options || {});\n\t};\n\n\tmodule.exports = (function() {\n\t  if (blobSupported) {\n\t\treturn blobSupportsArrayBufferView ? global.Blob : BlobConstructor;\n\t  } else if (blobBuilderSupported) {\n\t\treturn BlobBuilderConstructor;\n\t  } else {\n\t\treturn undefined;\n\t  }\n\t})();\n\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n\t},{}],15:[function(_dereq_,module,exports){\n\n\t/**\n\t * Expose `Emitter`.\n\t */\n\n\tmodule.exports = Emitter;\n\n\t/**\n\t * Initialize a new `Emitter`.\n\t *\n\t * @api public\n\t */\n\n\tfunction Emitter(obj) {\n\t  if (obj) return mixin(obj);\n\t};\n\n\t/**\n\t * Mixin the emitter properties.\n\t *\n\t * @param {Object} obj\n\t * @return {Object}\n\t * @api private\n\t */\n\n\tfunction mixin(obj) {\n\t  for (var key in Emitter.prototype) {\n\t\tobj[key] = Emitter.prototype[key];\n\t  }\n\t  return obj;\n\t}\n\n\t/**\n\t * Listen on the given `event` with `fn`.\n\t *\n\t * @param {String} event\n\t * @param {Function} fn\n\t * @return {Emitter}\n\t * @api public\n\t */\n\n\tEmitter.prototype.on =\n\tEmitter.prototype.addEventListener = function(event, fn){\n\t  this._callbacks = this._callbacks || {};\n\t  (this._callbacks[event] = this._callbacks[event] || [])\n\t\t.push(fn);\n\t  return this;\n\t};\n\n\t/**\n\t * Adds an `event` listener that will be invoked a single\n\t * time then automatically removed.\n\t *\n\t * @param {String} event\n\t * @param {Function} fn\n\t * @return {Emitter}\n\t * @api public\n\t */\n\n\tEmitter.prototype.once = function(event, fn){\n\t  var self = this;\n\t  this._callbacks = this._callbacks || {};\n\n\t  function on() {\n\t\tself.off(event, on);\n\t\tfn.apply(this, arguments);\n\t  }\n\n\t  on.fn = fn;\n\t  this.on(event, on);\n\t  return this;\n\t};\n\n\t/**\n\t * Remove the given callback for `event` or all\n\t * registered callbacks.\n\t *\n\t * @param {String} event\n\t * @param {Function} fn\n\t * @return {Emitter}\n\t * @api public\n\t */\n\n\tEmitter.prototype.off =\n\tEmitter.prototype.removeListener =\n\tEmitter.prototype.removeAllListeners =\n\tEmitter.prototype.removeEventListener = function(event, fn){\n\t  this._callbacks = this._callbacks || {};\n\n\t  // all\n\t  if (0 == arguments.length) {\n\t\tthis._callbacks = {};\n\t\treturn this;\n\t  }\n\n\t  // specific event\n\t  var callbacks = this._callbacks[event];\n\t  if (!callbacks) return this;\n\n\t  // remove all handlers\n\t  if (1 == arguments.length) {\n\t\tdelete this._callbacks[event];\n\t\treturn this;\n\t  }\n\n\t  // remove specific handler\n\t  var cb;\n\t  for (var i = 0; i < callbacks.length; i++) {\n\t\tcb = callbacks[i];\n\t\tif (cb === fn || cb.fn === fn) {\n\t\t  callbacks.splice(i, 1);\n\t\t  break;\n\t\t}\n\t  }\n\t  return this;\n\t};\n\n\t/**\n\t * Emit `event` with the given args.\n\t *\n\t * @param {String} event\n\t * @param {Mixed} ...\n\t * @return {Emitter}\n\t */\n\n\tEmitter.prototype.emit = function(event){\n\t  this._callbacks = this._callbacks || {};\n\t  var args = [].slice.call(arguments, 1)\n\t\t, callbacks = this._callbacks[event];\n\n\t  if (callbacks) {\n\t\tcallbacks = callbacks.slice(0);\n\t\tfor (var i = 0, len = callbacks.length; i < len; ++i) {\n\t\t  callbacks[i].apply(this, args);\n\t\t}\n\t  }\n\n\t  return this;\n\t};\n\n\t/**\n\t * Return array of callbacks for `event`.\n\t *\n\t * @param {String} event\n\t * @return {Array}\n\t * @api public\n\t */\n\n\tEmitter.prototype.listeners = function(event){\n\t  this._callbacks = this._callbacks || {};\n\t  return this._callbacks[event] || [];\n\t};\n\n\t/**\n\t * Check if this emitter has `event` handlers.\n\t *\n\t * @param {String} event\n\t * @return {Boolean}\n\t * @api public\n\t */\n\n\tEmitter.prototype.hasListeners = function(event){\n\t  return !! this.listeners(event).length;\n\t};\n\n\t},{}],16:[function(_dereq_,module,exports){\n\n\tmodule.exports = function(a, b){\n\t  var fn = function(){};\n\t  fn.prototype = b.prototype;\n\t  a.prototype = new fn;\n\t  a.prototype.constructor = a;\n\t};\n\t},{}],17:[function(_dereq_,module,exports){\n\n\t/**\n\t * This is the web browser implementation of `debug()`.\n\t *\n\t * Expose `debug()` as the module.\n\t */\n\n\texports = module.exports = _dereq_('./debug');\n\texports.log = log;\n\texports.formatArgs = formatArgs;\n\texports.save = save;\n\texports.load = load;\n\texports.useColors = useColors;\n\texports.storage = 'undefined' != typeof chrome\n\t\t\t\t   && 'undefined' != typeof chrome.storage\n\t\t\t\t\t  ? chrome.storage.local\n\t\t\t\t\t  : localstorage();\n\n\t/**\n\t * Colors.\n\t */\n\n\texports.colors = [\n\t  'lightseagreen',\n\t  'forestgreen',\n\t  'goldenrod',\n\t  'dodgerblue',\n\t  'darkorchid',\n\t  'crimson'\n\t];\n\n\t/**\n\t * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n\t * and the Firebug extension (any Firefox version) are known\n\t * to support \"%c\" CSS customizations.\n\t *\n\t * TODO: add a `localStorage` variable to explicitly enable/disable colors\n\t */\n\n\tfunction useColors() {\n\t  // is webkit? http://stackoverflow.com/a/16459606/376773\n\t  return ('WebkitAppearance' in document.documentElement.style) ||\n\t\t// is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(window.console && (console.firebug || (console.exception && console.table))) ||\n\t\t// is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31);\n\t}\n\n\t/**\n\t * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n\t */\n\n\texports.formatters.j = function(v) {\n\t  return JSON.stringify(v);\n\t};\n\n\n\t/**\n\t * Colorize log arguments if enabled.\n\t *\n\t * @api public\n\t */\n\n\tfunction formatArgs() {\n\t  var args = arguments;\n\t  var useColors = this.useColors;\n\n\t  args[0] = (useColors ? '%c' : '')\n\t\t+ this.namespace\n\t\t+ (useColors ? ' %c' : ' ')\n\t\t+ args[0]\n\t\t+ (useColors ? '%c ' : ' ')\n\t\t+ '+' + exports.humanize(this.diff);\n\n\t  if (!useColors) return args;\n\n\t  var c = 'color: ' + this.color;\n\t  args = [args[0], c, 'color: inherit'].concat(Array.prototype.slice.call(args, 1));\n\n\t  // the final \"%c\" is somewhat tricky, because there could be other\n\t  // arguments passed either before or after the %c, so we need to\n\t  // figure out the correct index to insert the CSS into\n\t  var index = 0;\n\t  var lastC = 0;\n\t  args[0].replace(/%[a-z%]/g, function(match) {\n\t\tif ('%%' === match) return;\n\t\tindex++;\n\t\tif ('%c' === match) {\n\t\t  // we only are interested in the *last* %c\n\t\t  // (the user may have provided their own)\n\t\t  lastC = index;\n\t\t}\n\t  });\n\n\t  args.splice(lastC, 0, c);\n\t  return args;\n\t}\n\n\t/**\n\t * Invokes `console.log()` when available.\n\t * No-op when `console.log` is not a \"function\".\n\t *\n\t * @api public\n\t */\n\n\tfunction log() {\n\t  // this hackery is required for IE8/9, where\n\t  // the `console.log` function doesn't have 'apply'\n\t  return 'object' === typeof console\n\t\t&& console.log\n\t\t&& Function.prototype.apply.call(console.log, console, arguments);\n\t}\n\n\t/**\n\t * Save `namespaces`.\n\t *\n\t * @param {String} namespaces\n\t * @api private\n\t */\n\n\tfunction save(namespaces) {\n\t  try {\n\t\tif (null == namespaces) {\n\t\t  exports.storage.removeItem('debug');\n\t\t} else {\n\t\t  exports.storage.debug = namespaces;\n\t\t}\n\t  } catch(e) {}\n\t}\n\n\t/**\n\t * Load `namespaces`.\n\t *\n\t * @return {String} returns the previously persisted debug modes\n\t * @api private\n\t */\n\n\tfunction load() {\n\t  var r;\n\t  try {\n\t\tr = exports.storage.debug;\n\t  } catch(e) {}\n\t  return r;\n\t}\n\n\t/**\n\t * Enable namespaces listed in `localStorage.debug` initially.\n\t */\n\n\texports.enable(load());\n\n\t/**\n\t * Localstorage attempts to return the localstorage.\n\t *\n\t * This is necessary because safari throws\n\t * when a user disables cookies/localstorage\n\t * and you attempt to access it.\n\t *\n\t * @return {LocalStorage}\n\t * @api private\n\t */\n\n\tfunction localstorage(){\n\t  try {\n\t\treturn window.localStorage;\n\t  } catch (e) {}\n\t}\n\n\t},{\"./debug\":18}],18:[function(_dereq_,module,exports){\n\n\t/**\n\t * This is the common logic for both the Node.js and web browser\n\t * implementations of `debug()`.\n\t *\n\t * Expose `debug()` as the module.\n\t */\n\n\texports = module.exports = debug;\n\texports.coerce = coerce;\n\texports.disable = disable;\n\texports.enable = enable;\n\texports.enabled = enabled;\n\texports.humanize = _dereq_('ms');\n\n\t/**\n\t * The currently active debug mode names, and names to skip.\n\t */\n\n\texports.names = [];\n\texports.skips = [];\n\n\t/**\n\t * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t *\n\t * Valid key names are a single, lowercased letter, i.e. \"n\".\n\t */\n\n\texports.formatters = {};\n\n\t/**\n\t * Previously assigned color.\n\t */\n\n\tvar prevColor = 0;\n\n\t/**\n\t * Previous log timestamp.\n\t */\n\n\tvar prevTime;\n\n\t/**\n\t * Select a color.\n\t *\n\t * @return {Number}\n\t * @api private\n\t */\n\n\tfunction selectColor() {\n\t  return exports.colors[prevColor++ % exports.colors.length];\n\t}\n\n\t/**\n\t * Create a debugger with the given `namespace`.\n\t *\n\t * @param {String} namespace\n\t * @return {Function}\n\t * @api public\n\t */\n\n\tfunction debug(namespace) {\n\n\t  // define the `disabled` version\n\t  function disabled() {\n\t  }\n\t  disabled.enabled = false;\n\n\t  // define the `enabled` version\n\t  function enabled() {\n\n\t\tvar self = enabled;\n\n\t\t// set `diff` timestamp\n\t\tvar curr = +new Date();\n\t\tvar ms = curr - (prevTime || curr);\n\t\tself.diff = ms;\n\t\tself.prev = prevTime;\n\t\tself.curr = curr;\n\t\tprevTime = curr;\n\n\t\t// add the `color` if not set\n\t\tif (null == self.useColors) self.useColors = exports.useColors();\n\t\tif (null == self.color && self.useColors) self.color = selectColor();\n\n\t\tvar args = Array.prototype.slice.call(arguments);\n\n\t\targs[0] = exports.coerce(args[0]);\n\n\t\tif ('string' !== typeof args[0]) {\n\t\t  // anything else let's inspect with %o\n\t\t  args = ['%o'].concat(args);\n\t\t}\n\n\t\t// apply any `formatters` transformations\n\t\tvar index = 0;\n\t\targs[0] = args[0].replace(/%([a-z%])/g, function(match, format) {\n\t\t  // if we encounter an escaped % then don't increase the array index\n\t\t  if (match === '%%') return match;\n\t\t  index++;\n\t\t  var formatter = exports.formatters[format];\n\t\t  if ('function' === typeof formatter) {\n\t\t\tvar val = args[index];\n\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t// now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\targs.splice(index, 1);\n\t\t\tindex--;\n\t\t  }\n\t\t  return match;\n\t\t});\n\n\t\tif ('function' === typeof exports.formatArgs) {\n\t\t  args = exports.formatArgs.apply(self, args);\n\t\t}\n\t\tvar logFn = enabled.log || exports.log || console.log.bind(console);\n\t\tlogFn.apply(self, args);\n\t  }\n\t  enabled.enabled = true;\n\n\t  var fn = exports.enabled(namespace) ? enabled : disabled;\n\n\t  fn.namespace = namespace;\n\n\t  return fn;\n\t}\n\n\t/**\n\t * Enables a debug mode by namespaces. This can include modes\n\t * separated by a colon and wildcards.\n\t *\n\t * @param {String} namespaces\n\t * @api public\n\t */\n\n\tfunction enable(namespaces) {\n\t  exports.save(namespaces);\n\n\t  var split = (namespaces || '').split(/[\\s,]+/);\n\t  var len = split.length;\n\n\t  for (var i = 0; i < len; i++) {\n\t\tif (!split[i]) continue; // ignore empty strings\n\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\t\tif (namespaces[0] === '-') {\n\t\t  exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n\t\t} else {\n\t\t  exports.names.push(new RegExp('^' + namespaces + '$'));\n\t\t}\n\t  }\n\t}\n\n\t/**\n\t * Disable debug output.\n\t *\n\t * @api public\n\t */\n\n\tfunction disable() {\n\t  exports.enable('');\n\t}\n\n\t/**\n\t * Returns true if the given mode name is enabled, false otherwise.\n\t *\n\t * @param {String} name\n\t * @return {Boolean}\n\t * @api public\n\t */\n\n\tfunction enabled(name) {\n\t  var i, len;\n\t  for (i = 0, len = exports.skips.length; i < len; i++) {\n\t\tif (exports.skips[i].test(name)) {\n\t\t  return false;\n\t\t}\n\t  }\n\t  for (i = 0, len = exports.names.length; i < len; i++) {\n\t\tif (exports.names[i].test(name)) {\n\t\t  return true;\n\t\t}\n\t  }\n\t  return false;\n\t}\n\n\t/**\n\t * Coerce `val`.\n\t *\n\t * @param {Mixed} val\n\t * @return {Mixed}\n\t * @api private\n\t */\n\n\tfunction coerce(val) {\n\t  if (val instanceof Error) return val.stack || val.message;\n\t  return val;\n\t}\n\n\t},{\"ms\":25}],19:[function(_dereq_,module,exports){\n\t(function (global){\n\t/**\n\t * Module dependencies.\n\t */\n\n\tvar keys = _dereq_('./keys');\n\tvar hasBinary = _dereq_('has-binary');\n\tvar sliceBuffer = _dereq_('arraybuffer.slice');\n\tvar base64encoder = _dereq_('base64-arraybuffer');\n\tvar after = _dereq_('after');\n\tvar utf8 = _dereq_('utf8');\n\n\t/**\n\t * Check if we are running an android browser. That requires us to use\n\t * ArrayBuffer with polling transports...\n\t *\n\t * http://ghinda.net/jpeg-blob-ajax-android/\n\t */\n\n\tvar isAndroid = navigator.userAgent.match(/Android/i);\n\n\t/**\n\t * Check if we are running in PhantomJS.\n\t * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n\t * https://github.com/ariya/phantomjs/issues/11395\n\t * @type boolean\n\t */\n\tvar isPhantomJS = /PhantomJS/i.test(navigator.userAgent);\n\n\t/**\n\t * When true, avoids using Blobs to encode payloads.\n\t * @type boolean\n\t */\n\tvar dontSendBlobs = isAndroid || isPhantomJS;\n\n\t/**\n\t * Current protocol version.\n\t */\n\n\texports.protocol = 3;\n\n\t/**\n\t * Packet types.\n\t */\n\n\tvar packets = exports.packets = {\n\t\topen:     0    // non-ws\n\t  , close:    1    // non-ws\n\t  , ping:     2\n\t  , pong:     3\n\t  , message:  4\n\t  , upgrade:  5\n\t  , noop:     6\n\t};\n\n\tvar packetslist = keys(packets);\n\n\t/**\n\t * Premade error packet.\n\t */\n\n\tvar err = { type: 'error', data: 'parser error' };\n\n\t/**\n\t * Create a blob api even for blob builder when vendor prefixes exist\n\t */\n\n\tvar Blob = _dereq_('blob');\n\n\t/**\n\t * Encodes a packet.\n\t *\n\t *     <packet type id> [ <data> ]\n\t *\n\t * Example:\n\t *\n\t *     5hello world\n\t *     3\n\t *     4\n\t *\n\t * Binary is encoded in an identical principle\n\t *\n\t * @api private\n\t */\n\n\texports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n\t  if ('function' == typeof supportsBinary) {\n\t\tcallback = supportsBinary;\n\t\tsupportsBinary = false;\n\t  }\n\n\t  if ('function' == typeof utf8encode) {\n\t\tcallback = utf8encode;\n\t\tutf8encode = null;\n\t  }\n\n\t  var data = (packet.data === undefined)\n\t\t? undefined\n\t\t: packet.data.buffer || packet.data;\n\n\t  if (global.ArrayBuffer && data instanceof ArrayBuffer) {\n\t\treturn encodeArrayBuffer(packet, supportsBinary, callback);\n\t  } else if (Blob && data instanceof global.Blob) {\n\t\treturn encodeBlob(packet, supportsBinary, callback);\n\t  }\n\n\t  // might be an object with { base64: true, data: dataAsBase64String }\n\t  if (data && data.base64) {\n\t\treturn encodeBase64Object(packet, callback);\n\t  }\n\n\t  // Sending data as a utf-8 string\n\t  var encoded = packets[packet.type];\n\n\t  // data fragment is optional\n\t  if (undefined !== packet.data) {\n\t\tencoded += utf8encode ? utf8.encode(String(packet.data)) : String(packet.data);\n\t  }\n\n\t  return callback('' + encoded);\n\n\t};\n\n\tfunction encodeBase64Object(packet, callback) {\n\t  // packet data is an object { base64: true, data: dataAsBase64String }\n\t  var message = 'b' + exports.packets[packet.type] + packet.data.data;\n\t  return callback(message);\n\t}\n\n\t/**\n\t * Encode packet helpers for binary types\n\t */\n\n\tfunction encodeArrayBuffer(packet, supportsBinary, callback) {\n\t  if (!supportsBinary) {\n\t\treturn exports.encodeBase64Packet(packet, callback);\n\t  }\n\n\t  var data = packet.data;\n\t  var contentArray = new Uint8Array(data);\n\t  var resultBuffer = new Uint8Array(1 + data.byteLength);\n\n\t  resultBuffer[0] = packets[packet.type];\n\t  for (var i = 0; i < contentArray.length; i++) {\n\t\tresultBuffer[i+1] = contentArray[i];\n\t  }\n\n\t  return callback(resultBuffer.buffer);\n\t}\n\n\tfunction encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n\t  if (!supportsBinary) {\n\t\treturn exports.encodeBase64Packet(packet, callback);\n\t  }\n\n\t  var fr = new FileReader();\n\t  fr.onload = function() {\n\t\tpacket.data = fr.result;\n\t\texports.encodePacket(packet, supportsBinary, true, callback);\n\t  };\n\t  return fr.readAsArrayBuffer(packet.data);\n\t}\n\n\tfunction encodeBlob(packet, supportsBinary, callback) {\n\t  if (!supportsBinary) {\n\t\treturn exports.encodeBase64Packet(packet, callback);\n\t  }\n\n\t  if (dontSendBlobs) {\n\t\treturn encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n\t  }\n\n\t  var length = new Uint8Array(1);\n\t  length[0] = packets[packet.type];\n\t  var blob = new Blob([length.buffer, packet.data]);\n\n\t  return callback(blob);\n\t}\n\n\t/**\n\t * Encodes a packet with binary data in a base64 string\n\t *\n\t * @param {Object} packet, has `type` and `data`\n\t * @return {String} base64 encoded message\n\t */\n\n\texports.encodeBase64Packet = function(packet, callback) {\n\t  var message = 'b' + exports.packets[packet.type];\n\t  if (Blob && packet.data instanceof global.Blob) {\n\t\tvar fr = new FileReader();\n\t\tfr.onload = function() {\n\t\t  var b64 = fr.result.split(',')[1];\n\t\t  callback(message + b64);\n\t\t};\n\t\treturn fr.readAsDataURL(packet.data);\n\t  }\n\n\t  var b64data;\n\t  try {\n\t\tb64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n\t  } catch (e) {\n\t\t// iPhone Safari doesn't let you apply with typed arrays\n\t\tvar typed = new Uint8Array(packet.data);\n\t\tvar basic = new Array(typed.length);\n\t\tfor (var i = 0; i < typed.length; i++) {\n\t\t  basic[i] = typed[i];\n\t\t}\n\t\tb64data = String.fromCharCode.apply(null, basic);\n\t  }\n\t  message += global.btoa(b64data);\n\t  return callback(message);\n\t};\n\n\t/**\n\t * Decodes a packet. Changes format to Blob if requested.\n\t *\n\t * @return {Object} with `type` and `data` (if any)\n\t * @api private\n\t */\n\n\texports.decodePacket = function (data, binaryType, utf8decode) {\n\t  // String data\n\t  if (typeof data == 'string' || data === undefined) {\n\t\tif (data.charAt(0) == 'b') {\n\t\t  return exports.decodeBase64Packet(data.substr(1), binaryType);\n\t\t}\n\n\t\tif (utf8decode) {\n\t\t  try {\n\t\t\tdata = utf8.decode(data);\n\t\t  } catch (e) {\n\t\t\treturn err;\n\t\t  }\n\t\t}\n\t\tvar type = data.charAt(0);\n\n\t\tif (Number(type) != type || !packetslist[type]) {\n\t\t  return err;\n\t\t}\n\n\t\tif (data.length > 1) {\n\t\t  return { type: packetslist[type], data: data.substring(1) };\n\t\t} else {\n\t\t  return { type: packetslist[type] };\n\t\t}\n\t  }\n\n\t  var asArray = new Uint8Array(data);\n\t  var type = asArray[0];\n\t  var rest = sliceBuffer(data, 1);\n\t  if (Blob && binaryType === 'blob') {\n\t\trest = new Blob([rest]);\n\t  }\n\t  return { type: packetslist[type], data: rest };\n\t};\n\n\t/**\n\t * Decodes a packet encoded in a base64 string\n\t *\n\t * @param {String} base64 encoded message\n\t * @return {Object} with `type` and `data` (if any)\n\t */\n\n\texports.decodeBase64Packet = function(msg, binaryType) {\n\t  var type = packetslist[msg.charAt(0)];\n\t  if (!global.ArrayBuffer) {\n\t\treturn { type: type, data: { base64: true, data: msg.substr(1) } };\n\t  }\n\n\t  var data = base64encoder.decode(msg.substr(1));\n\n\t  if (binaryType === 'blob' && Blob) {\n\t\tdata = new Blob([data]);\n\t  }\n\n\t  return { type: type, data: data };\n\t};\n\n\t/**\n\t * Encodes multiple messages (payload).\n\t *\n\t *     <length>:data\n\t *\n\t * Example:\n\t *\n\t *     11:hello world2:hi\n\t *\n\t * If any contents are binary, they will be encoded as base64 strings. Base64\n\t * encoded strings are marked with a b before the length specifier\n\t *\n\t * @param {Array} packets\n\t * @api private\n\t */\n\n\texports.encodePayload = function (packets, supportsBinary, callback) {\n\t  if (typeof supportsBinary == 'function') {\n\t\tcallback = supportsBinary;\n\t\tsupportsBinary = null;\n\t  }\n\n\t  var isBinary = hasBinary(packets);\n\n\t  if (supportsBinary && isBinary) {\n\t\tif (Blob && !dontSendBlobs) {\n\t\t  return exports.encodePayloadAsBlob(packets, callback);\n\t\t}\n\n\t\treturn exports.encodePayloadAsArrayBuffer(packets, callback);\n\t  }\n\n\t  if (!packets.length) {\n\t\treturn callback('0:');\n\t  }\n\n\t  function setLengthHeader(message) {\n\t\treturn message.length + ':' + message;\n\t  }\n\n\t  function encodeOne(packet, doneCallback) {\n\t\texports.encodePacket(packet, !isBinary ? false : supportsBinary, true, function(message) {\n\t\t  doneCallback(null, setLengthHeader(message));\n\t\t});\n\t  }\n\n\t  map(packets, encodeOne, function(err, results) {\n\t\treturn callback(results.join(''));\n\t  });\n\t};\n\n\t/**\n\t * Async array map using after\n\t */\n\n\tfunction map(ary, each, done) {\n\t  var result = new Array(ary.length);\n\t  var next = after(ary.length, done);\n\n\t  var eachWithIndex = function(i, el, cb) {\n\t\teach(el, function(error, msg) {\n\t\t  result[i] = msg;\n\t\t  cb(error, result);\n\t\t});\n\t  };\n\n\t  for (var i = 0; i < ary.length; i++) {\n\t\teachWithIndex(i, ary[i], next);\n\t  }\n\t}\n\n\t/*\n\t * Decodes data when a payload is maybe expected. Possible binary contents are\n\t * decoded from their base64 representation\n\t *\n\t * @param {String} data, callback method\n\t * @api public\n\t */\n\n\texports.decodePayload = function (data, binaryType, callback) {\n\t  if (typeof data != 'string') {\n\t\treturn exports.decodePayloadAsBinary(data, binaryType, callback);\n\t  }\n\n\t  if (typeof binaryType === 'function') {\n\t\tcallback = binaryType;\n\t\tbinaryType = null;\n\t  }\n\n\t  var packet;\n\t  if (data == '') {\n\t\t// parser error - ignoring payload\n\t\treturn callback(err, 0, 1);\n\t  }\n\n\t  var length = ''\n\t\t, n, msg;\n\n\t  for (var i = 0, l = data.length; i < l; i++) {\n\t\tvar chr = data.charAt(i);\n\n\t\tif (':' != chr) {\n\t\t  length += chr;\n\t\t} else {\n\t\t  if ('' == length || (length != (n = Number(length)))) {\n\t\t\t// parser error - ignoring payload\n\t\t\treturn callback(err, 0, 1);\n\t\t  }\n\n\t\t  msg = data.substr(i + 1, n);\n\n\t\t  if (length != msg.length) {\n\t\t\t// parser error - ignoring payload\n\t\t\treturn callback(err, 0, 1);\n\t\t  }\n\n\t\t  if (msg.length) {\n\t\t\tpacket = exports.decodePacket(msg, binaryType, true);\n\n\t\t\tif (err.type == packet.type && err.data == packet.data) {\n\t\t\t  // parser error in individual packet - ignoring payload\n\t\t\t  return callback(err, 0, 1);\n\t\t\t}\n\n\t\t\tvar ret = callback(packet, i + n, l);\n\t\t\tif (false === ret) return;\n\t\t  }\n\n\t\t  // advance cursor\n\t\t  i += n;\n\t\t  length = '';\n\t\t}\n\t  }\n\n\t  if (length != '') {\n\t\t// parser error - ignoring payload\n\t\treturn callback(err, 0, 1);\n\t  }\n\n\t};\n\n\t/**\n\t * Encodes multiple messages (payload) as binary.\n\t *\n\t * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n\t * 255><data>\n\t *\n\t * Example:\n\t * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n\t *\n\t * @param {Array} packets\n\t * @return {ArrayBuffer} encoded payload\n\t * @api private\n\t */\n\n\texports.encodePayloadAsArrayBuffer = function(packets, callback) {\n\t  if (!packets.length) {\n\t\treturn callback(new ArrayBuffer(0));\n\t  }\n\n\t  function encodeOne(packet, doneCallback) {\n\t\texports.encodePacket(packet, true, true, function(data) {\n\t\t  return doneCallback(null, data);\n\t\t});\n\t  }\n\n\t  map(packets, encodeOne, function(err, encodedPackets) {\n\t\tvar totalLength = encodedPackets.reduce(function(acc, p) {\n\t\t  var len;\n\t\t  if (typeof p === 'string'){\n\t\t\tlen = p.length;\n\t\t  } else {\n\t\t\tlen = p.byteLength;\n\t\t  }\n\t\t  return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n\t\t}, 0);\n\n\t\tvar resultArray = new Uint8Array(totalLength);\n\n\t\tvar bufferIndex = 0;\n\t\tencodedPackets.forEach(function(p) {\n\t\t  var isString = typeof p === 'string';\n\t\t  var ab = p;\n\t\t  if (isString) {\n\t\t\tvar view = new Uint8Array(p.length);\n\t\t\tfor (var i = 0; i < p.length; i++) {\n\t\t\t  view[i] = p.charCodeAt(i);\n\t\t\t}\n\t\t\tab = view.buffer;\n\t\t  }\n\n\t\t  if (isString) { // not true binary\n\t\t\tresultArray[bufferIndex++] = 0;\n\t\t  } else { // true binary\n\t\t\tresultArray[bufferIndex++] = 1;\n\t\t  }\n\n\t\t  var lenStr = ab.byteLength.toString();\n\t\t  for (var i = 0; i < lenStr.length; i++) {\n\t\t\tresultArray[bufferIndex++] = parseInt(lenStr[i]);\n\t\t  }\n\t\t  resultArray[bufferIndex++] = 255;\n\n\t\t  var view = new Uint8Array(ab);\n\t\t  for (var i = 0; i < view.length; i++) {\n\t\t\tresultArray[bufferIndex++] = view[i];\n\t\t  }\n\t\t});\n\n\t\treturn callback(resultArray.buffer);\n\t  });\n\t};\n\n\t/**\n\t * Encode as Blob\n\t */\n\n\texports.encodePayloadAsBlob = function(packets, callback) {\n\t  function encodeOne(packet, doneCallback) {\n\t\texports.encodePacket(packet, true, true, function(encoded) {\n\t\t  var binaryIdentifier = new Uint8Array(1);\n\t\t  binaryIdentifier[0] = 1;\n\t\t  if (typeof encoded === 'string') {\n\t\t\tvar view = new Uint8Array(encoded.length);\n\t\t\tfor (var i = 0; i < encoded.length; i++) {\n\t\t\t  view[i] = encoded.charCodeAt(i);\n\t\t\t}\n\t\t\tencoded = view.buffer;\n\t\t\tbinaryIdentifier[0] = 0;\n\t\t  }\n\n\t\t  var len = (encoded instanceof ArrayBuffer)\n\t\t\t? encoded.byteLength\n\t\t\t: encoded.size;\n\n\t\t  var lenStr = len.toString();\n\t\t  var lengthAry = new Uint8Array(lenStr.length + 1);\n\t\t  for (var i = 0; i < lenStr.length; i++) {\n\t\t\tlengthAry[i] = parseInt(lenStr[i]);\n\t\t  }\n\t\t  lengthAry[lenStr.length] = 255;\n\n\t\t  if (Blob) {\n\t\t\tvar blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n\t\t\tdoneCallback(null, blob);\n\t\t  }\n\t\t});\n\t  }\n\n\t  map(packets, encodeOne, function(err, results) {\n\t\treturn callback(new Blob(results));\n\t  });\n\t};\n\n\t/*\n\t * Decodes data when a payload is maybe expected. Strings are decoded by\n\t * interpreting each byte as a key code for entries marked to start with 0. See\n\t * description of encodePayloadAsBinary\n\t *\n\t * @param {ArrayBuffer} data, callback method\n\t * @api public\n\t */\n\n\texports.decodePayloadAsBinary = function (data, binaryType, callback) {\n\t  if (typeof binaryType === 'function') {\n\t\tcallback = binaryType;\n\t\tbinaryType = null;\n\t  }\n\n\t  var bufferTail = data;\n\t  var buffers = [];\n\n\t  var numberTooLong = false;\n\t  while (bufferTail.byteLength > 0) {\n\t\tvar tailArray = new Uint8Array(bufferTail);\n\t\tvar isString = tailArray[0] === 0;\n\t\tvar msgLength = '';\n\n\t\tfor (var i = 1; ; i++) {\n\t\t  if (tailArray[i] == 255) break;\n\n\t\t  if (msgLength.length > 310) {\n\t\t\tnumberTooLong = true;\n\t\t\tbreak;\n\t\t  }\n\n\t\t  msgLength += tailArray[i];\n\t\t}\n\n\t\tif(numberTooLong) return callback(err, 0, 1);\n\n\t\tbufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n\t\tmsgLength = parseInt(msgLength);\n\n\t\tvar msg = sliceBuffer(bufferTail, 0, msgLength);\n\t\tif (isString) {\n\t\t  try {\n\t\t\tmsg = String.fromCharCode.apply(null, new Uint8Array(msg));\n\t\t  } catch (e) {\n\t\t\t// iPhone Safari doesn't let you apply to typed arrays\n\t\t\tvar typed = new Uint8Array(msg);\n\t\t\tmsg = '';\n\t\t\tfor (var i = 0; i < typed.length; i++) {\n\t\t\t  msg += String.fromCharCode(typed[i]);\n\t\t\t}\n\t\t  }\n\t\t}\n\n\t\tbuffers.push(msg);\n\t\tbufferTail = sliceBuffer(bufferTail, msgLength);\n\t  }\n\n\t  var total = buffers.length;\n\t  buffers.forEach(function(buffer, i) {\n\t\tcallback(exports.decodePacket(buffer, binaryType, true), i, total);\n\t  });\n\t};\n\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n\t},{\"./keys\":20,\"after\":11,\"arraybuffer.slice\":12,\"base64-arraybuffer\":13,\"blob\":14,\"has-binary\":21,\"utf8\":29}],20:[function(_dereq_,module,exports){\n\n\t/**\n\t * Gets the keys for an object.\n\t *\n\t * @return {Array} keys\n\t * @api private\n\t */\n\n\tmodule.exports = Object.keys || function keys (obj){\n\t  var arr = [];\n\t  var has = Object.prototype.hasOwnProperty;\n\n\t  for (var i in obj) {\n\t\tif (has.call(obj, i)) {\n\t\t  arr.push(i);\n\t\t}\n\t  }\n\t  return arr;\n\t};\n\n\t},{}],21:[function(_dereq_,module,exports){\n\t(function (global){\n\n\t/*\n\t * Module requirements.\n\t */\n\n\tvar isArray = _dereq_('isarray');\n\n\t/**\n\t * Module exports.\n\t */\n\n\tmodule.exports = hasBinary;\n\n\t/**\n\t * Checks for binary data.\n\t *\n\t * Right now only Buffer and ArrayBuffer are supported..\n\t *\n\t * @param {Object} anything\n\t * @api public\n\t */\n\n\tfunction hasBinary(data) {\n\n\t  function _hasBinary(obj) {\n\t\tif (!obj) return false;\n\n\t\tif ( (global.Buffer && global.Buffer.isBuffer(obj)) ||\n\t\t\t (global.ArrayBuffer && obj instanceof ArrayBuffer) ||\n\t\t\t (global.Blob && obj instanceof Blob) ||\n\t\t\t (global.File && obj instanceof File)\n\t\t\t) {\n\t\t  return true;\n\t\t}\n\n\t\tif (isArray(obj)) {\n\t\t  for (var i = 0; i < obj.length; i++) {\n\t\t\t  if (_hasBinary(obj[i])) {\n\t\t\t\t  return true;\n\t\t\t  }\n\t\t  }\n\t\t} else if (obj && 'object' == typeof obj) {\n\t\t  if (obj.toJSON) {\n\t\t\tobj = obj.toJSON();\n\t\t  }\n\n\t\t  for (var key in obj) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(obj, key) && _hasBinary(obj[key])) {\n\t\t\t  return true;\n\t\t\t}\n\t\t  }\n\t\t}\n\n\t\treturn false;\n\t  }\n\n\t  return _hasBinary(data);\n\t}\n\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n\t},{\"isarray\":24}],22:[function(_dereq_,module,exports){\n\n\t/**\n\t * Module exports.\n\t *\n\t * Logic borrowed from Modernizr:\n\t *\n\t *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n\t */\n\n\ttry {\n\t  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n\t\t'withCredentials' in new XMLHttpRequest();\n\t} catch (err) {\n\t  // if XMLHttp support is disabled in IE then it will throw\n\t  // when trying to create\n\t  module.exports = false;\n\t}\n\n\t},{}],23:[function(_dereq_,module,exports){\n\n\tvar indexOf = [].indexOf;\n\n\tmodule.exports = function(arr, obj){\n\t  if (indexOf) return arr.indexOf(obj);\n\t  for (var i = 0; i < arr.length; ++i) {\n\t\tif (arr[i] === obj) return i;\n\t  }\n\t  return -1;\n\t};\n\t},{}],24:[function(_dereq_,module,exports){\n\tmodule.exports = Array.isArray || function (arr) {\n\t  return Object.prototype.toString.call(arr) == '[object Array]';\n\t};\n\n\t},{}],25:[function(_dereq_,module,exports){\n\t/**\n\t * Helpers.\n\t */\n\n\tvar s = 1000;\n\tvar m = s * 60;\n\tvar h = m * 60;\n\tvar d = h * 24;\n\tvar y = d * 365.25;\n\n\t/**\n\t * Parse or format the given `val`.\n\t *\n\t * Options:\n\t *\n\t *  - `long` verbose formatting [false]\n\t *\n\t * @param {String|Number} val\n\t * @param {Object} options\n\t * @return {String|Number}\n\t * @api public\n\t */\n\n\tmodule.exports = function(val, options){\n\t  options = options || {};\n\t  if ('string' == typeof val) return parse(val);\n\t  return options.long\n\t\t? long(val)\n\t\t: short(val);\n\t};\n\n\t/**\n\t * Parse the given `str` and return milliseconds.\n\t *\n\t * @param {String} str\n\t * @return {Number}\n\t * @api private\n\t */\n\n\tfunction parse(str) {\n\t  str = '' + str;\n\t  if (str.length > 10000) return;\n\t  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str);\n\t  if (!match) return;\n\t  var n = parseFloat(match[1]);\n\t  var type = (match[2] || 'ms').toLowerCase();\n\t  switch (type) {\n\t\tcase 'years':\n\t\tcase 'year':\n\t\tcase 'yrs':\n\t\tcase 'yr':\n\t\tcase 'y':\n\t\t  return n * y;\n\t\tcase 'days':\n\t\tcase 'day':\n\t\tcase 'd':\n\t\t  return n * d;\n\t\tcase 'hours':\n\t\tcase 'hour':\n\t\tcase 'hrs':\n\t\tcase 'hr':\n\t\tcase 'h':\n\t\t  return n * h;\n\t\tcase 'minutes':\n\t\tcase 'minute':\n\t\tcase 'mins':\n\t\tcase 'min':\n\t\tcase 'm':\n\t\t  return n * m;\n\t\tcase 'seconds':\n\t\tcase 'second':\n\t\tcase 'secs':\n\t\tcase 'sec':\n\t\tcase 's':\n\t\t  return n * s;\n\t\tcase 'milliseconds':\n\t\tcase 'millisecond':\n\t\tcase 'msecs':\n\t\tcase 'msec':\n\t\tcase 'ms':\n\t\t  return n;\n\t  }\n\t}\n\n\t/**\n\t * Short format for `ms`.\n\t *\n\t * @param {Number} ms\n\t * @return {String}\n\t * @api private\n\t */\n\n\tfunction short(ms) {\n\t  if (ms >= d) return Math.round(ms / d) + 'd';\n\t  if (ms >= h) return Math.round(ms / h) + 'h';\n\t  if (ms >= m) return Math.round(ms / m) + 'm';\n\t  if (ms >= s) return Math.round(ms / s) + 's';\n\t  return ms + 'ms';\n\t}\n\n\t/**\n\t * Long format for `ms`.\n\t *\n\t * @param {Number} ms\n\t * @return {String}\n\t * @api private\n\t */\n\n\tfunction long(ms) {\n\t  return plural(ms, d, 'day')\n\t\t|| plural(ms, h, 'hour')\n\t\t|| plural(ms, m, 'minute')\n\t\t|| plural(ms, s, 'second')\n\t\t|| ms + ' ms';\n\t}\n\n\t/**\n\t * Pluralization helper.\n\t */\n\n\tfunction plural(ms, n, name) {\n\t  if (ms < n) return;\n\t  if (ms < n * 1.5) return Math.floor(ms / n) + ' ' + name;\n\t  return Math.ceil(ms / n) + ' ' + name + 's';\n\t}\n\n\t},{}],26:[function(_dereq_,module,exports){\n\t(function (global){\n\t/**\n\t * JSON parse.\n\t *\n\t * @see Based on jQuery#parseJSON (MIT) and JSON2\n\t * @api private\n\t */\n\n\tvar rvalidchars = /^[\\],:{}\\s]*$/;\n\tvar rvalidescape = /\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g;\n\tvar rvalidtokens = /\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g;\n\tvar rvalidbraces = /(?:^|:|,)(?:\\s*\\[)+/g;\n\tvar rtrimLeft = /^\\s+/;\n\tvar rtrimRight = /\\s+$/;\n\n\tmodule.exports = function parsejson(data) {\n\t  if ('string' != typeof data || !data) {\n\t\treturn null;\n\t  }\n\n\t  data = data.replace(rtrimLeft, '').replace(rtrimRight, '');\n\n\t  // Attempt to parse using the native JSON parser first\n\t  if (global.JSON && JSON.parse) {\n\t\treturn JSON.parse(data);\n\t  }\n\n\t  if (rvalidchars.test(data.replace(rvalidescape, '@')\n\t\t  .replace(rvalidtokens, ']')\n\t\t  .replace(rvalidbraces, ''))) {\n\t\treturn (new Function('return ' + data))();\n\t  }\n\t};\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n\t},{}],27:[function(_dereq_,module,exports){\n\t/**\n\t * Compiles a querystring\n\t * Returns string representation of the object\n\t *\n\t * @param {Object}\n\t * @api private\n\t */\n\n\texports.encode = function (obj) {\n\t  var str = '';\n\n\t  for (var i in obj) {\n\t\tif (obj.hasOwnProperty(i)) {\n\t\t  if (str.length) str += '&';\n\t\t  str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n\t\t}\n\t  }\n\n\t  return str;\n\t};\n\n\t/**\n\t * Parses a simple querystring into an object\n\t *\n\t * @param {String} qs\n\t * @api private\n\t */\n\n\texports.decode = function(qs){\n\t  var qry = {};\n\t  var pairs = qs.split('&');\n\t  for (var i = 0, l = pairs.length; i < l; i++) {\n\t\tvar pair = pairs[i].split('=');\n\t\tqry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n\t  }\n\t  return qry;\n\t};\n\n\t},{}],28:[function(_dereq_,module,exports){\n\t/**\n\t * Parses an URI\n\t *\n\t * @author Steven Levithan <stevenlevithan.com> (MIT license)\n\t * @api private\n\t */\n\n\tvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\n\tvar parts = [\n\t\t'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n\t];\n\n\tmodule.exports = function parseuri(str) {\n\t\tvar src = str,\n\t\t\tb = str.indexOf('['),\n\t\t\te = str.indexOf(']');\n\n\t\tif (b != -1 && e != -1) {\n\t\t\tstr = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n\t\t}\n\n\t\tvar m = re.exec(str || ''),\n\t\t\turi = {},\n\t\t\ti = 14;\n\n\t\twhile (i--) {\n\t\t\turi[parts[i]] = m[i] || '';\n\t\t}\n\n\t\tif (b != -1 && e != -1) {\n\t\t\turi.source = src;\n\t\t\turi.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n\t\t\turi.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n\t\t\turi.ipv6uri = true;\n\t\t}\n\n\t\treturn uri;\n\t};\n\n\t},{}],29:[function(_dereq_,module,exports){\n\t(function (global){\n\t/*! https://mths.be/utf8js v2.0.0 by @mathias */\n\t;(function(root) {\n\n\t\t// Detect free variables `exports`\n\t\tvar freeExports = typeof exports == 'object' && exports;\n\n\t\t// Detect free variable `module`\n\t\tvar freeModule = typeof module == 'object' && module &&\n\t\t\tmodule.exports == freeExports && module;\n\n\t\t// Detect free variable `global`, from Node.js or Browserified code,\n\t\t// and use it as `root`\n\t\tvar freeGlobal = typeof global == 'object' && global;\n\t\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\t\troot = freeGlobal;\n\t\t}\n\n\t\t/*--------------------------------------------------------------------------*/\n\n\t\tvar stringFromCharCode = String.fromCharCode;\n\n\t\t// Taken from https://mths.be/punycode\n\t\tfunction ucs2decode(string) {\n\t\t\tvar output = [];\n\t\t\tvar counter = 0;\n\t\t\tvar length = string.length;\n\t\t\tvar value;\n\t\t\tvar extra;\n\t\t\twhile (counter < length) {\n\t\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\t\toutput.push(value);\n\t\t\t\t\t\tcounter--;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\toutput.push(value);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn output;\n\t\t}\n\n\t\t// Taken from https://mths.be/punycode\n\t\tfunction ucs2encode(array) {\n\t\t\tvar length = array.length;\n\t\t\tvar index = -1;\n\t\t\tvar value;\n\t\t\tvar output = '';\n\t\t\twhile (++index < length) {\n\t\t\t\tvalue = array[index];\n\t\t\t\tif (value > 0xFFFF) {\n\t\t\t\t\tvalue -= 0x10000;\n\t\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t\t}\n\t\t\t\toutput += stringFromCharCode(value);\n\t\t\t}\n\t\t\treturn output;\n\t\t}\n\n\t\tfunction checkScalarValue(codePoint) {\n\t\t\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\t\t\tthrow Error(\n\t\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t\t' is not a scalar value'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\t/*--------------------------------------------------------------------------*/\n\n\t\tfunction createByte(codePoint, shift) {\n\t\t\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n\t\t}\n\n\t\tfunction encodeCodePoint(codePoint) {\n\t\t\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\t\t\treturn stringFromCharCode(codePoint);\n\t\t\t}\n\t\t\tvar symbol = '';\n\t\t\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\t\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t\t\t}\n\t\t\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\t\t\tcheckScalarValue(codePoint);\n\t\t\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\t\t\tsymbol += createByte(codePoint, 6);\n\t\t\t}\n\t\t\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\t\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\t\t\tsymbol += createByte(codePoint, 12);\n\t\t\t\tsymbol += createByte(codePoint, 6);\n\t\t\t}\n\t\t\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\t\t\treturn symbol;\n\t\t}\n\n\t\tfunction utf8encode(string) {\n\t\t\tvar codePoints = ucs2decode(string);\n\t\t\tvar length = codePoints.length;\n\t\t\tvar index = -1;\n\t\t\tvar codePoint;\n\t\t\tvar byteString = '';\n\t\t\twhile (++index < length) {\n\t\t\t\tcodePoint = codePoints[index];\n\t\t\t\tbyteString += encodeCodePoint(codePoint);\n\t\t\t}\n\t\t\treturn byteString;\n\t\t}\n\n\t\t/*--------------------------------------------------------------------------*/\n\n\t\tfunction readContinuationByte() {\n\t\t\tif (byteIndex >= byteCount) {\n\t\t\t\tthrow Error('Invalid byte index');\n\t\t\t}\n\n\t\t\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\t\t\tbyteIndex++;\n\n\t\t\tif ((continuationByte & 0xC0) == 0x80) {\n\t\t\t\treturn continuationByte & 0x3F;\n\t\t\t}\n\n\t\t\t// If we end up here, it’s not a continuation byte\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\n\t\tfunction decodeSymbol() {\n\t\t\tvar byte1;\n\t\t\tvar byte2;\n\t\t\tvar byte3;\n\t\t\tvar byte4;\n\t\t\tvar codePoint;\n\n\t\t\tif (byteIndex > byteCount) {\n\t\t\t\tthrow Error('Invalid byte index');\n\t\t\t}\n\n\t\t\tif (byteIndex == byteCount) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Read first byte\n\t\t\tbyte1 = byteArray[byteIndex] & 0xFF;\n\t\t\tbyteIndex++;\n\n\t\t\t// 1-byte sequence (no continuation bytes)\n\t\t\tif ((byte1 & 0x80) == 0) {\n\t\t\t\treturn byte1;\n\t\t\t}\n\n\t\t\t// 2-byte sequence\n\t\t\tif ((byte1 & 0xE0) == 0xC0) {\n\t\t\t\tvar byte2 = readContinuationByte();\n\t\t\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\t\t\tif (codePoint >= 0x80) {\n\t\t\t\t\treturn codePoint;\n\t\t\t\t} else {\n\t\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// 3-byte sequence (may include unpaired surrogates)\n\t\t\tif ((byte1 & 0xF0) == 0xE0) {\n\t\t\t\tbyte2 = readContinuationByte();\n\t\t\t\tbyte3 = readContinuationByte();\n\t\t\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\t\t\tif (codePoint >= 0x0800) {\n\t\t\t\t\tcheckScalarValue(codePoint);\n\t\t\t\t\treturn codePoint;\n\t\t\t\t} else {\n\t\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// 4-byte sequence\n\t\t\tif ((byte1 & 0xF8) == 0xF0) {\n\t\t\t\tbyte2 = readContinuationByte();\n\t\t\t\tbyte3 = readContinuationByte();\n\t\t\t\tbyte4 = readContinuationByte();\n\t\t\t\tcodePoint = ((byte1 & 0x0F) << 0x12) | (byte2 << 0x0C) |\n\t\t\t\t\t(byte3 << 0x06) | byte4;\n\t\t\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\t\t\treturn codePoint;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthrow Error('Invalid UTF-8 detected');\n\t\t}\n\n\t\tvar byteArray;\n\t\tvar byteCount;\n\t\tvar byteIndex;\n\t\tfunction utf8decode(byteString) {\n\t\t\tbyteArray = ucs2decode(byteString);\n\t\t\tbyteCount = byteArray.length;\n\t\t\tbyteIndex = 0;\n\t\t\tvar codePoints = [];\n\t\t\tvar tmp;\n\t\t\twhile ((tmp = decodeSymbol()) !== false) {\n\t\t\t\tcodePoints.push(tmp);\n\t\t\t}\n\t\t\treturn ucs2encode(codePoints);\n\t\t}\n\n\t\t/*--------------------------------------------------------------------------*/\n\n\t\tvar utf8 = {\n\t\t\t'version': '2.0.0',\n\t\t\t'encode': utf8encode,\n\t\t\t'decode': utf8decode\n\t\t};\n\n\t\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t\t// like the following:\n\t\tif (\n\t\t\ttypeof define == 'function' &&\n\t\t\ttypeof define.amd == 'object' &&\n\t\t\tdefine.amd\n\t\t) {\n\t\t\tdefine(function() {\n\t\t\t\treturn utf8;\n\t\t\t});\n\t\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\t\tfreeModule.exports = utf8;\n\t\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\t\tvar object = {};\n\t\t\t\tvar hasOwnProperty = object.hasOwnProperty;\n\t\t\t\tfor (var key in utf8) {\n\t\t\t\t\thasOwnProperty.call(utf8, key) && (freeExports[key] = utf8[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t} else { // in Rhino or a web browser\n\t\t\troot.utf8 = utf8;\n\t\t}\n\n\t}(this));\n\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n\t},{}],30:[function(_dereq_,module,exports){\n\t'use strict';\n\n\tvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n\t  , length = 64\n\t  , map = {}\n\t  , seed = 0\n\t  , i = 0\n\t  , prev;\n\n\t/**\n\t * Return a string representing the specified number.\n\t *\n\t * @param {Number} num The number to convert.\n\t * @returns {String} The string representation of the number.\n\t * @api public\n\t */\n\tfunction encode(num) {\n\t  var encoded = '';\n\n\t  do {\n\t\tencoded = alphabet[num % length] + encoded;\n\t\tnum = Math.floor(num / length);\n\t  } while (num > 0);\n\n\t  return encoded;\n\t}\n\n\t/**\n\t * Return the integer value specified by the given string.\n\t *\n\t * @param {String} str The string to convert.\n\t * @returns {Number} The integer value represented by the string.\n\t * @api public\n\t */\n\tfunction decode(str) {\n\t  var decoded = 0;\n\n\t  for (i = 0; i < str.length; i++) {\n\t\tdecoded = decoded * length + map[str.charAt(i)];\n\t  }\n\n\t  return decoded;\n\t}\n\n\t/**\n\t * Yeast: A tiny growing id generator.\n\t *\n\t * @returns {String} A unique id.\n\t * @api public\n\t */\n\tfunction yeast() {\n\t  var now = encode(+new Date());\n\n\t  if (now !== prev) return seed = 0, prev = now;\n\t  return now +'.'+ encode(seed++);\n\t}\n\n\t//\n\t// Map each character to its index.\n\t//\n\tfor (; i < length; i++) map[alphabet[i]] = i;\n\n\t//\n\t// Expose the `yeast`, `encode` and `decode` functions.\n\t//\n\tyeast.encode = encode;\n\tyeast.decode = decode;\n\tmodule.exports = yeast;\n\n\t},{}],31:[function(_dereq_,module,exports){\n\n\t/**\n\t * Module dependencies.\n\t */\n\n\tvar url = _dereq_('./url');\n\tvar parser = _dereq_('socket.io-parser');\n\tvar Manager = _dereq_('./manager');\n\tvar debug = _dereq_('debug')('socket.io-client');\n\n\t/**\n\t * Module exports.\n\t */\n\n\tmodule.exports = exports = lookup;\n\n\t/**\n\t * Managers cache.\n\t */\n\n\tvar cache = exports.managers = {};\n\n\t/**\n\t * Looks up an existing `Manager` for multiplexing.\n\t * If the user summons:\n\t *\n\t *   `io('http://localhost/a');`\n\t *   `io('http://localhost/b');`\n\t *\n\t * We reuse the existing instance based on same scheme/port/host,\n\t * and we initialize sockets for each namespace.\n\t *\n\t * @api public\n\t */\n\n\tfunction lookup(uri, opts) {\n\t  if (typeof uri == 'object') {\n\t\topts = uri;\n\t\turi = undefined;\n\t  }\n\n\t  opts = opts || {};\n\n\t  var parsed = url(uri);\n\t  var source = parsed.source;\n\t  var id = parsed.id;\n\t  var path = parsed.path;\n\t  var sameNamespace = cache[id] && path in cache[id].nsps;\n\t  var newConnection = opts.forceNew || opts['force new connection'] ||\n\t\t\t\t\t\t  false === opts.multiplex || sameNamespace;\n\n\t  var io;\n\n\t  if (newConnection) {\n\t\tdebug('ignoring socket cache for %s', source);\n\t\tio = Manager(source, opts);\n\t  } else {\n\t\tif (!cache[id]) {\n\t\t  debug('new io instance for %s', source);\n\t\t  cache[id] = Manager(source, opts);\n\t\t}\n\t\tio = cache[id];\n\t  }\n\n\t  return io.socket(parsed.path);\n\t}\n\n\t/**\n\t * Protocol version.\n\t *\n\t * @api public\n\t */\n\n\texports.protocol = parser.protocol;\n\n\t/**\n\t * `connect`.\n\t *\n\t * @param {String} uri\n\t * @api public\n\t */\n\n\texports.connect = lookup;\n\n\t/**\n\t * Expose constructors for standalone build.\n\t *\n\t * @api public\n\t */\n\n\texports.Manager = _dereq_('./manager');\n\texports.Socket = _dereq_('./socket');\n\n\t},{\"./manager\":32,\"./socket\":34,\"./url\":35,\"debug\":39,\"socket.io-parser\":47}],32:[function(_dereq_,module,exports){\n\n\t/**\n\t * Module dependencies.\n\t */\n\n\tvar eio = _dereq_('engine.io-client');\n\tvar Socket = _dereq_('./socket');\n\tvar Emitter = _dereq_('component-emitter');\n\tvar parser = _dereq_('socket.io-parser');\n\tvar on = _dereq_('./on');\n\tvar bind = _dereq_('component-bind');\n\tvar debug = _dereq_('debug')('socket.io-client:manager');\n\tvar indexOf = _dereq_('indexof');\n\tvar Backoff = _dereq_('backo2');\n\n\t/**\n\t * IE6+ hasOwnProperty\n\t */\n\n\tvar has = Object.prototype.hasOwnProperty;\n\n\t/**\n\t * Module exports\n\t */\n\n\tmodule.exports = Manager;\n\n\t/**\n\t * `Manager` constructor.\n\t *\n\t * @param {String} engine instance or engine uri/opts\n\t * @param {Object} options\n\t * @api public\n\t */\n//这是链接后台的方法Io.socket\n\tfunction Manager(uri, opts){\n\t  if (!(this instanceof Manager)) return new Manager(uri, opts);\n\t  if (uri && ('object' == typeof uri)) {\n\t\topts = uri;\n\t\turi = undefined;\n\t  }\n\t  opts = opts || {};\n\n\t  opts.path = opts.path || '/socket.io';\n\t  this.nsps = {};\n\t  this.subs = [];\n\t  this.opts = opts;\n\t  this.reconnection(opts.reconnection !== false);\n\t  this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n\t  this.reconnectionDelay(opts.reconnectionDelay || 1000);\n\t  this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n\t  this.randomizationFactor(opts.randomizationFactor || 0.5);\n\t  this.backoff = new Backoff({\n\t\tmin: this.reconnectionDelay(),\n\t\tmax: this.reconnectionDelayMax(),\n\t\tjitter: this.randomizationFactor()\n\t  });\n\t  this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n\t  this.readyState = 'closed';\n\t  this.uri = uri;\n\t  this.connecting = [];\n\t  this.lastPing = null;\n\t  this.encoding = false;\n\t  this.packetBuffer = [];\n\t  this.encoder = new parser.Encoder();\n\t  this.decoder = new parser.Decoder();\n\t  this.autoConnect = opts.autoConnect !== false;\n\t  if (this.autoConnect) this.open();\n\t}\n\n\t/**\n\t * Propagate given event to sockets and emit on `this`\n\t *\n\t * @api private\n\t */\n\n\tManager.prototype.emitAll = function() {\n\t  this.emit.apply(this, arguments);\n\t  for (var nsp in this.nsps) {\n\t\tif (has.call(this.nsps, nsp)) {\n\t\t  this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n\t\t}\n\t  }\n\t};\n\n\t/**\n\t * Update `socket.id` of all sockets\n\t *\n\t * @api private\n\t */\n\n\tManager.prototype.updateSocketIds = function(){\n\t  for (var nsp in this.nsps) {\n\t\tif (has.call(this.nsps, nsp)) {\n\t\t  this.nsps[nsp].id = this.engine.id;\n\t\t}\n\t  }\n\t};\n\n\t/**\n\t * Mix in `Emitter`.\n\t */\n\n\tEmitter(Manager.prototype);\n\n\t/**\n\t * Sets the `reconnection` config.\n\t *\n\t * @param {Boolean} true/false if it should automatically reconnect\n\t * @return {Manager} self or value\n\t * @api public\n\t */\n\n\tManager.prototype.reconnection = function(v){\n\t  if (!arguments.length) return this._reconnection;\n\t  this._reconnection = !!v;\n\t  return this;\n\t};\n\n\t/**\n\t * Sets the reconnection attempts config.\n\t *\n\t * @param {Number} max reconnection attempts before giving up\n\t * @return {Manager} self or value\n\t * @api public\n\t */\n\n\tManager.prototype.reconnectionAttempts = function(v){\n\t  if (!arguments.length) return this._reconnectionAttempts;\n\t  this._reconnectionAttempts = v;\n\t  return this;\n\t};\n\n\t/**\n\t * Sets the delay between reconnections.\n\t *\n\t * @param {Number} delay\n\t * @return {Manager} self or value\n\t * @api public\n\t */\n\n\tManager.prototype.reconnectionDelay = function(v){\n\t  if (!arguments.length) return this._reconnectionDelay;\n\t  this._reconnectionDelay = v;\n\t  this.backoff && this.backoff.setMin(v);\n\t  return this;\n\t};\n\n\tManager.prototype.randomizationFactor = function(v){\n\t  if (!arguments.length) return this._randomizationFactor;\n\t  this._randomizationFactor = v;\n\t  this.backoff && this.backoff.setJitter(v);\n\t  return this;\n\t};\n\n\t/**\n\t * Sets the maximum delay between reconnections.\n\t *\n\t * @param {Number} delay\n\t * @return {Manager} self or value\n\t * @api public\n\t */\n\n\tManager.prototype.reconnectionDelayMax = function(v){\n\t  if (!arguments.length) return this._reconnectionDelayMax;\n\t  this._reconnectionDelayMax = v;\n\t  this.backoff && this.backoff.setMax(v);\n\t  return this;\n\t};\n\n\t/**\n\t * Sets the connection timeout. `false` to disable\n\t *\n\t * @return {Manager} self or value\n\t * @api public\n\t */\n\n\tManager.prototype.timeout = function(v){\n\t  if (!arguments.length) return this._timeout;\n\t  this._timeout = v;\n\t  return this;\n\t};\n\n\t/**\n\t * Starts trying to reconnect if reconnection is enabled and we have not\n\t * started reconnecting yet\n\t *\n\t * @api private\n\t */\n\n\tManager.prototype.maybeReconnectOnOpen = function() {\n\t  // Only try to reconnect if it's the first time we're connecting\n\t  if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n\t\t// keeps reconnection from firing twice for the same reconnection loop\n\t\tthis.reconnect();\n\t  }\n\t};\n\n\n\t/**\n\t * Sets the current transport `socket`.\n\t *\n\t * @param {Function} optional, callback\n\t * @return {Manager} self\n\t * @api public\n\t */\n\n\tManager.prototype.open =\n\tManager.prototype.connect = function(fn){\n\t  debug('readyState %s', this.readyState);\n\t  if (~this.readyState.indexOf('open')) return this;\n\n\t  debug('opening %s', this.uri);\n\t  this.engine = eio(this.uri, this.opts);\n\t  var socket = this.engine;\n\t  var self = this;\n\t  this.readyState = 'opening';\n\t  this.skipReconnect = false;\n\n\t  // emit `open`\n\t  var openSub = on(socket, 'open', function() {\n\t\tself.onopen();\n\t\tfn && fn();\n\t  });\n\n\t  // emit `connect_error`\n\t  var errorSub = on(socket, 'error', function(data){\n\t\tdebug('connect_error');\n\t\tself.cleanup();\n\t\tself.readyState = 'closed';\n\t\tself.emitAll('connect_error', data);\n\t\tif (fn) {\n\t\t  var err = new Error('Connection error');\n\t\t  err.data = data;\n\t\t  fn(err);\n\t\t} else {\n\t\t  // Only do this if there is no fn to handle the error\n\t\t  self.maybeReconnectOnOpen();\n\t\t}\n\t  });\n\n\t  // emit `connect_timeout`\n\t  if (false !== this._timeout) {\n\t\tvar timeout = this._timeout;\n\t\tdebug('connect attempt will timeout after %d', timeout);\n\n\t\t// set timer\n\t\tvar timer = setTimeout(function(){\n\t\t  debug('connect attempt timed out after %d', timeout);\n\t\t  openSub.destroy();\n\t\t  socket.close();\n\t\t  socket.emit('error', 'timeout');\n\t\t  self.emitAll('connect_timeout', timeout);\n\t\t}, timeout);\n\n\t\tthis.subs.push({\n\t\t  destroy: function(){\n\t\t\tclearTimeout(timer);\n\t\t  }\n\t\t});\n\t  }\n\n\t  this.subs.push(openSub);\n\t  this.subs.push(errorSub);\n\n\t  return this;\n\t};\n\n\t/**\n\t * Called upon transport open.\n\t *\n\t * @api private\n\t */\n\n\tManager.prototype.onopen = function(){\n\t  debug('open');\n\n\t  // clear old subs\n\t  this.cleanup();\n\n\t  // mark as open\n\t  this.readyState = 'open';\n\t  this.emit('open');\n\n\t  // add new subs\n\t  var socket = this.engine;\n\t  this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n\t  this.subs.push(on(socket, 'ping', bind(this, 'onping')));\n\t  this.subs.push(on(socket, 'pong', bind(this, 'onpong')));\n\t  this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n\t  this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n\t  this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n\t};\n\n\t/**\n\t * Called upon a ping.\n\t *\n\t * @api private\n\t */\n\n\tManager.prototype.onping = function(){\n\t  this.lastPing = new Date;\n\t  this.emitAll('ping');\n\t};\n\n\t/**\n\t * Called upon a packet.\n\t *\n\t * @api private\n\t */\n\n\tManager.prototype.onpong = function(){\n\t  this.emitAll('pong', new Date - this.lastPing);\n\t};\n\n\t/**\n\t * Called with data.\n\t *\n\t * @api private\n\t */\n\n\tManager.prototype.ondata = function(data){\n\t  this.decoder.add(data);\n\t};\n\n\t/**\n\t * Called when parser fully decodes a packet.\n\t *\n\t * @api private\n\t */\n\n\tManager.prototype.ondecoded = function(packet) {\n\t  this.emit('packet', packet);\n\t};\n\n\t/**\n\t * Called upon socket error.\n\t *\n\t * @api private\n\t */\n\n\tManager.prototype.onerror = function(err){\n\t  debug('error', err);\n\t  this.emitAll('error', err);\n\t};\n\n\t/**\n\t * Creates a new socket for the given `nsp`.\n\t *\n\t * @return {Socket}\n\t * @api public\n\t */\n\n\tManager.prototype.socket = function(nsp){\n\t  var socket = this.nsps[nsp];\n\t  if (!socket) {\n\t\tsocket = new Socket(this, nsp);\n\t\tthis.nsps[nsp] = socket;\n\t\tvar self = this;\n\t\tsocket.on('connecting', onConnecting);\n\t\tsocket.on('connect', function(){\n\t\t  socket.id = self.engine.id;\n\t\t});\n\n\t\tif (this.autoConnect) {\n\t\t  // manually call here since connecting evnet is fired before listening\n\t\t  onConnecting();\n\t\t}\n\t  }\n\n\t  function onConnecting() {\n\t\tif (!~indexOf(self.connecting, socket)) {\n\t\t  self.connecting.push(socket);\n\t\t}\n\t  }\n\n\t  return socket;\n\t};\n\n\t/**\n\t * Called upon a socket close.\n\t *\n\t * @param {Socket} socket\n\t */\n\n\tManager.prototype.destroy = function(socket){\n\t  var index = indexOf(this.connecting, socket);\n\t  if (~index) this.connecting.splice(index, 1);\n\t  if (this.connecting.length) return;\n\n\t  this.close();\n\t};\n\n\t/**\n\t * Writes a packet.\n\t *\n\t * @param {Object} packet\n\t * @api private\n\t */\n\n\tManager.prototype.packet = function(packet){\n\t  debug('writing packet %j', packet);\n\t  var self = this;\n\n\t  if (!self.encoding) {\n\t\t// encode, then write to engine with result\n\t\tself.encoding = true;\n\t\tthis.encoder.encode(packet, function(encodedPackets) {\n\t\t  for (var i = 0; i < encodedPackets.length; i++) {\n\t\t\tself.engine.write(encodedPackets[i], packet.options);\n\t\t  }\n\t\t  self.encoding = false;\n\t\t  self.processPacketQueue();\n\t\t});\n\t  } else { // add packet to the queue\n\t\tself.packetBuffer.push(packet);\n\t  }\n\t};\n\n\t/**\n\t * If packet buffer is non-empty, begins encoding the\n\t * next packet in line.\n\t *\n\t * @api private\n\t */\n\n\tManager.prototype.processPacketQueue = function() {\n\t  if (this.packetBuffer.length > 0 && !this.encoding) {\n\t\tvar pack = this.packetBuffer.shift();\n\t\tthis.packet(pack);\n\t  }\n\t};\n\n\t/**\n\t * Clean up transport subscriptions and packet buffer.\n\t *\n\t * @api private\n\t */\n\n\tManager.prototype.cleanup = function(){\n\t  debug('cleanup');\n\n\t  var sub;\n\t  while (sub = this.subs.shift()) sub.destroy();\n\n\t  this.packetBuffer = [];\n\t  this.encoding = false;\n\t  this.lastPing = null;\n\n\t  this.decoder.destroy();\n\t};\n\n\t/**\n\t * Close the current socket.\n\t *\n\t * @api private\n\t */\n\n\tManager.prototype.close =\n\tManager.prototype.disconnect = function(){\n\t  debug('disconnect');\n\t  this.skipReconnect = true;\n\t  this.reconnecting = false;\n\t  if ('opening' == this.readyState) {\n\t\t// `onclose` will not fire because\n\t\t// an open event never happened\n\t\tthis.cleanup();\n\t  }\n\t  this.backoff.reset();\n\t  this.readyState = 'closed';\n\t  if (this.engine) this.engine.close();\n\t};\n\n\t/**\n\t * Called upon engine close.\n\t *\n\t * @api private\n\t */\n\n\tManager.prototype.onclose = function(reason){\n\t  debug('onclose');\n\n\t  this.cleanup();\n\t  this.backoff.reset();\n\t  this.readyState = 'closed';\n\t  this.emit('close', reason);\n\n\t  if (this._reconnection && !this.skipReconnect) {\n\t\tthis.reconnect();\n\t  }\n\t};\n\n\t/**\n\t * Attempt a reconnection.\n\t *\n\t * @api private\n\t */\n\n\tManager.prototype.reconnect = function(){\n\t  if (this.reconnecting || this.skipReconnect) return this;\n\n\t  var self = this;\n\n\t  if (this.backoff.attempts >= this._reconnectionAttempts) {\n\t\tdebug('reconnect failed');\n\t\tthis.backoff.reset();\n\t\tthis.emitAll('reconnect_failed');\n\t\tthis.reconnecting = false;\n\t  } else {\n\t\tvar delay = this.backoff.duration();\n\t\tdebug('will wait %dms before reconnect attempt', delay);\n\n\t\tthis.reconnecting = true;\n\t\tvar timer = setTimeout(function(){\n\t\t  if (self.skipReconnect) return;\n\n\t\t  debug('attempting reconnect');\n\t\t  self.emitAll('reconnect_attempt', self.backoff.attempts);\n\t\t  self.emitAll('reconnecting', self.backoff.attempts);\n\n\t\t  // check again for the case socket closed in above events\n\t\t  if (self.skipReconnect) return;\n\n\t\t  self.open(function(err){\n\t\t\tif (err) {\n\t\t\t  debug('reconnect attempt error');\n\t\t\t  self.reconnecting = false;\n\t\t\t  self.reconnect();\n\t\t\t  self.emitAll('reconnect_error', err.data);\n\t\t\t} else {\n\t\t\t  debug('reconnect success');\n\t\t\t  self.onreconnect();\n\t\t\t}\n\t\t  });\n\t\t}, delay);\n\n\t\tthis.subs.push({\n\t\t  destroy: function(){\n\t\t\tclearTimeout(timer);\n\t\t  }\n\t\t});\n\t  }\n\t};\n\n\t/**\n\t * Called upon successful reconnect.\n\t *\n\t * @api private\n\t */\n\n\tManager.prototype.onreconnect = function(){\n\t  var attempt = this.backoff.attempts;\n\t  this.reconnecting = false;\n\t  this.backoff.reset();\n\t  this.updateSocketIds();\n\t  this.emitAll('reconnect', attempt);\n\t};\n\n\t},{\"./on\":33,\"./socket\":34,\"backo2\":36,\"component-bind\":37,\"component-emitter\":38,\"debug\":39,\"engine.io-client\":1,\"indexof\":42,\"socket.io-parser\":47}],33:[function(_dereq_,module,exports){\n\n\t/**\n\t * Module exports.\n\t */\n\n\tmodule.exports = on;\n\n\t/**\n\t * Helper for subscriptions.\n\t *\n\t * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n\t * @param {String} event name\n\t * @param {Function} callback\n\t * @api public\n\t */\n\n\tfunction on(obj, ev, fn) {\n\t  obj.on(ev, fn);\n\t  return {\n\t\tdestroy: function(){\n\t\t  obj.removeListener(ev, fn);\n\t\t}\n\t  };\n\t}\n\n\t},{}],34:[function(_dereq_,module,exports){\n\n\t/**\n\t * Module dependencies.\n\t */\n\n\tvar parser = _dereq_('socket.io-parser');\n\tvar Emitter = _dereq_('component-emitter');\n\tvar toArray = _dereq_('to-array');\n\tvar on = _dereq_('./on');\n\tvar bind = _dereq_('component-bind');\n\tvar debug = _dereq_('debug')('socket.io-client:socket');\n\tvar hasBin = _dereq_('has-binary');\n\n\t/**\n\t * Module exports.\n\t */\n\n\tmodule.exports = exports = Socket;\n\n\t/**\n\t * Internal events (blacklisted).\n\t * These events can't be emitted by the user.\n\t *\n\t * @api private\n\t */\n\n\tvar events = {\n\t  connect: 1,\n\t  connect_error: 1,\n\t  connect_timeout: 1,\n\t  connecting: 1,\n\t  disconnect: 1,\n\t  error: 1,\n\t  reconnect: 1,\n\t  reconnect_attempt: 1,\n\t  reconnect_failed: 1,\n\t  reconnect_error: 1,\n\t  reconnecting: 1,\n\t  ping: 1,\n\t  pong: 1\n\t};\n\n\t/**\n\t * Shortcut to `Emitter#emit`.\n\t */\n\n\tvar emit = Emitter.prototype.emit;\n\n\t/**\n\t * `Socket` constructor.\n\t *\n\t * @api public\n\t */\n\n\tfunction Socket(io, nsp){\n\t  this.io = io;\n\t  this.nsp = nsp;\n\t  this.json = this; // compat\n\t  this.ids = 0;\n\t  this.acks = {};\n\t  this.receiveBuffer = [];\n\t  this.sendBuffer = [];\n\t  this.connected = false;\n\t  this.disconnected = true;\n\t  if (this.io.autoConnect) this.open();\n\t}\n\n\t/**\n\t * Mix in `Emitter`.\n\t */\n\n\tEmitter(Socket.prototype);\n\n\t/**\n\t * Subscribe to open, close and packet events\n\t *\n\t * @api private\n\t */\n\n\tSocket.prototype.subEvents = function() {\n\t  if (this.subs) return;\n\n\t  var io = this.io;\n\t  this.subs = [\n\t\ton(io, 'open', bind(this, 'onopen')),\n\t\ton(io, 'packet', bind(this, 'onpacket')),\n\t\ton(io, 'close', bind(this, 'onclose'))\n\t  ];\n\t};\n\n\t/**\n\t * \"Opens\" the socket.\n\t *\n\t * @api public\n\t */\n\n\tSocket.prototype.open =\n\tSocket.prototype.connect = function(){\n\t  if (this.connected) return this;\n\n\t  this.subEvents();\n\t  this.io.open(); // ensure open\n\t  if ('open' == this.io.readyState) this.onopen();\n\t  this.emit('connecting');\n\t  return this;\n\t};\n\n\t/**\n\t * Sends a `message` event.\n\t *\n\t * @return {Socket} self\n\t * @api public\n\t */\n\n\tSocket.prototype.send = function(){\n\t  var args = toArray(arguments);\n\t  args.unshift('message');\n\t  this.emit.apply(this, args);\n\t  return this;\n\t};\n\n\t/**\n\t * Override `emit`.\n\t * If the event is in `events`, it's emitted normally.\n\t *\n\t * @param {String} event name\n\t * @return {Socket} self\n\t * @api public\n\t */\n\n\tSocket.prototype.emit = function(ev){\n\t  if (events.hasOwnProperty(ev)) {\n\t\temit.apply(this, arguments);\n\t\treturn this;\n\t  }\n\n\t  var args = toArray(arguments);\n\t  var parserType = parser.EVENT; // default\n\t  if (hasBin(args)) { parserType = parser.BINARY_EVENT; } // binary\n\t  var packet = { type: parserType, data: args };\n\n\t  packet.options = {};\n\t  packet.options.compress = !this.flags || false !== this.flags.compress;\n\n\t  // event ack callback\n\t  if ('function' == typeof args[args.length - 1]) {\n\t\tdebug('emitting packet with ack id %d', this.ids);\n\t\tthis.acks[this.ids] = args.pop();\n\t\tpacket.id = this.ids++;\n\t  }\n\n\t  if (this.connected) {\n\t\tthis.packet(packet);\n\t  } else {\n\t\tthis.sendBuffer.push(packet);\n\t  }\n\n\t  delete this.flags;\n\n\t  return this;\n\t};\n\n\t/**\n\t * Sends a packet.\n\t *\n\t * @param {Object} packet\n\t * @api private\n\t */\n\n\tSocket.prototype.packet = function(packet){\n\t  packet.nsp = this.nsp;\n\t  this.io.packet(packet);\n\t};\n\n\t/**\n\t * Called upon engine `open`.\n\t *\n\t * @api private\n\t */\n\n\tSocket.prototype.onopen = function(){\n\t  debug('transport is open - connecting');\n\n\t  // write connect packet if necessary\n\t  if ('/' != this.nsp) {\n\t\tthis.packet({ type: parser.CONNECT });\n\t  }\n\t};\n\n\t/**\n\t * Called upon engine `close`.\n\t *\n\t * @param {String} reason\n\t * @api private\n\t */\n\n\tSocket.prototype.onclose = function(reason){\n\t  debug('close (%s)', reason);\n\t  this.connected = false;\n\t  this.disconnected = true;\n\t  delete this.id;\n\t  this.emit('disconnect', reason);\n\t};\n\n\t/**\n\t * Called with socket packet.\n\t *\n\t * @param {Object} packet\n\t * @api private\n\t */\n\n\tSocket.prototype.onpacket = function(packet){\n\t  if (packet.nsp != this.nsp) return;\n\n\t  switch (packet.type) {\n\t\tcase parser.CONNECT:\n\t\t  this.onconnect();\n\t\t  break;\n\n\t\tcase parser.EVENT:\n\t\t  this.onevent(packet);\n\t\t  break;\n\n\t\tcase parser.BINARY_EVENT:\n\t\t  this.onevent(packet);\n\t\t  break;\n\n\t\tcase parser.ACK:\n\t\t  this.onack(packet);\n\t\t  break;\n\n\t\tcase parser.BINARY_ACK:\n\t\t  this.onack(packet);\n\t\t  break;\n\n\t\tcase parser.DISCONNECT:\n\t\t  this.ondisconnect();\n\t\t  break;\n\n\t\tcase parser.ERROR:\n\t\t  this.emit('error', packet.data);\n\t\t  break;\n\t  }\n\t};\n\n\t/**\n\t * Called upon a server event.\n\t *\n\t * @param {Object} packet\n\t * @api private\n\t */\n\n\tSocket.prototype.onevent = function(packet){\n\t  var args = packet.data || [];\n\t  debug('emitting event %j', args);\n\n\t  if (null != packet.id) {\n\t\tdebug('attaching ack callback to event');\n\t\targs.push(this.ack(packet.id));\n\t  }\n\n\t  if (this.connected) {\n\t\temit.apply(this, args);\n\t  } else {\n\t\tthis.receiveBuffer.push(args);\n\t  }\n\t};\n\n\t/**\n\t * Produces an ack callback to emit with an event.\n\t *\n\t * @api private\n\t */\n\n\tSocket.prototype.ack = function(id){\n\t  var self = this;\n\t  var sent = false;\n\t  return function(){\n\t\t// prevent double callbacks\n\t\tif (sent) return;\n\t\tsent = true;\n\t\tvar args = toArray(arguments);\n\t\tdebug('sending ack %j', args);\n\n\t\tvar type = hasBin(args) ? parser.BINARY_ACK : parser.ACK;\n\t\tself.packet({\n\t\t  type: type,\n\t\t  id: id,\n\t\t  data: args\n\t\t});\n\t  };\n\t};\n\n\t/**\n\t * Called upon a server acknowlegement.\n\t *\n\t * @param {Object} packet\n\t * @api private\n\t */\n\n\tSocket.prototype.onack = function(packet){\n\t  var ack = this.acks[packet.id];\n\t  if ('function' == typeof ack) {\n\t\tdebug('calling ack %s with %j', packet.id, packet.data);\n\t\tack.apply(this, packet.data);\n\t\tdelete this.acks[packet.id];\n\t  } else {\n\t\tdebug('bad ack %s', packet.id);\n\t  }\n\t};\n\n\t/**\n\t * Called upon server connect.\n\t *\n\t * @api private\n\t */\n\n\tSocket.prototype.onconnect = function(){\n\t  this.connected = true;\n\t  this.disconnected = false;\n\t  this.emit('connect');\n\t  this.emitBuffered();\n\t};\n\n\t/**\n\t * Emit buffered events (received and emitted).\n\t *\n\t * @api private\n\t */\n\n\tSocket.prototype.emitBuffered = function(){\n\t  var i;\n\t  for (i = 0; i < this.receiveBuffer.length; i++) {\n\t\temit.apply(this, this.receiveBuffer[i]);\n\t  }\n\t  this.receiveBuffer = [];\n\n\t  for (i = 0; i < this.sendBuffer.length; i++) {\n\t\tthis.packet(this.sendBuffer[i]);\n\t  }\n\t  this.sendBuffer = [];\n\t};\n\n\t/**\n\t * Called upon server disconnect.\n\t *\n\t * @api private\n\t */\n\n\tSocket.prototype.ondisconnect = function(){\n\t  debug('server disconnect (%s)', this.nsp);\n\t  this.destroy();\n\t  this.onclose('io server disconnect');\n\t};\n\n\t/**\n\t * Called upon forced client/server side disconnections,\n\t * this method ensures the manager stops tracking us and\n\t * that reconnections don't get triggered for this.\n\t *\n\t * @api private.\n\t */\n\n\tSocket.prototype.destroy = function(){\n\t  if (this.subs) {\n\t\t// clean subscriptions to avoid reconnections\n\t\tfor (var i = 0; i < this.subs.length; i++) {\n\t\t  this.subs[i].destroy();\n\t\t}\n\t\tthis.subs = null;\n\t  }\n\n\t  this.io.destroy(this);\n\t};\n\n\t/**\n\t * Disconnects the socket manually.\n\t *\n\t * @return {Socket} self\n\t * @api public\n\t */\n\n\tSocket.prototype.close =\n\tSocket.prototype.disconnect = function(){\n\t  if (this.connected) {\n\t\tdebug('performing disconnect (%s)', this.nsp);\n\t\tthis.packet({ type: parser.DISCONNECT });\n\t  }\n\n\t  // remove socket from pool\n\t  this.destroy();\n\n\t  if (this.connected) {\n\t\t// fire events\n\t\tthis.onclose('io client disconnect');\n\t  }\n\t  return this;\n\t};\n\n\t/**\n\t * Sets the compress flag.\n\t *\n\t * @param {Boolean} if `true`, compresses the sending data\n\t * @return {Socket} self\n\t * @api public\n\t */\n\n\tSocket.prototype.compress = function(compress){\n\t  this.flags = this.flags || {};\n\t  this.flags.compress = compress;\n\t  return this;\n\t};\n\n\t},{\"./on\":33,\"component-bind\":37,\"component-emitter\":38,\"debug\":39,\"has-binary\":41,\"socket.io-parser\":47,\"to-array\":51}],35:[function(_dereq_,module,exports){\n\t(function (global){\n\n\t/**\n\t * Module dependencies.\n\t */\n\n\tvar parseuri = _dereq_('parseuri');\n\tvar debug = _dereq_('debug')('socket.io-client:url');\n\n\t/**\n\t * Module exports.\n\t */\n\n\tmodule.exports = url;\n\n\t/**\n\t * URL parser.\n\t *\n\t * @param {String} url\n\t * @param {Object} An object meant to mimic window.location.\n\t *                 Defaults to window.location.\n\t * @api public\n\t */\n\n\tfunction url(uri, loc){\n\t  var obj = uri;\n\n\t  // default to window.location\n\t  var loc = loc || global.location;\n\t  if (null == uri) uri = loc.protocol + '//' + loc.host;\n\n\t  // relative path support\n\t  if ('string' == typeof uri) {\n\t\tif ('/' == uri.charAt(0)) {\n\t\t  if ('/' == uri.charAt(1)) {\n\t\t\turi = loc.protocol + uri;\n\t\t  } else {\n\t\t\turi = loc.host + uri;\n\t\t  }\n\t\t}\n\n\t\tif (!/^(https?|wss?):\\/\\//.test(uri)) {\n\t\t  debug('protocol-less url %s', uri);\n\t\t  if ('undefined' != typeof loc) {\n\t\t\turi = loc.protocol + '//' + uri;\n\t\t  } else {\n\t\t\turi = 'https://' + uri;\n\t\t  }\n\t\t}\n\n\t\t// parse\n\t\tdebug('parse %s', uri);\n\t\tobj = parseuri(uri);\n\t  }\n\n\t  // make sure we treat `localhost:80` and `localhost` equally\n\t  if (!obj.port) {\n\t\tif (/^(http|ws)$/.test(obj.protocol)) {\n\t\t  obj.port = '80';\n\t\t}\n\t\telse if (/^(http|ws)s$/.test(obj.protocol)) {\n\t\t  obj.port = '443';\n\t\t}\n\t  }\n\n\t  obj.path = obj.path || '/';\n\n\t  var ipv6 = obj.host.indexOf(':') !== -1;\n\t  var host = ipv6 ? '[' + obj.host + ']' : obj.host;\n\n\t  // define unique id\n\t  obj.id = obj.protocol + '://' + host + ':' + obj.port;\n\t  // define href\n\t  obj.href = obj.protocol + '://' + host + (loc && loc.port == obj.port ? '' : (':' + obj.port));\n\n\t  return obj;\n\t}\n\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n\t},{\"debug\":39,\"parseuri\":45}],36:[function(_dereq_,module,exports){\n\n\t/**\n\t * Expose `Backoff`.\n\t */\n\n\tmodule.exports = Backoff;\n\n\t/**\n\t * Initialize backoff timer with `opts`.\n\t *\n\t * - `min` initial timeout in milliseconds [100]\n\t * - `max` max timeout [10000]\n\t * - `jitter` [0]\n\t * - `factor` [2]\n\t *\n\t * @param {Object} opts\n\t * @api public\n\t */\n\n\tfunction Backoff(opts) {\n\t  opts = opts || {};\n\t  this.ms = opts.min || 100;\n\t  this.max = opts.max || 10000;\n\t  this.factor = opts.factor || 2;\n\t  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n\t  this.attempts = 0;\n\t}\n\n\t/**\n\t * Return the backoff duration.\n\t *\n\t * @return {Number}\n\t * @api public\n\t */\n\n\tBackoff.prototype.duration = function(){\n\t  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n\t  if (this.jitter) {\n\t\tvar rand =  Math.random();\n\t\tvar deviation = Math.floor(rand * this.jitter * ms);\n\t\tms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n\t  }\n\t  return Math.min(ms, this.max) | 0;\n\t};\n\n\t/**\n\t * Reset the number of attempts.\n\t *\n\t * @api public\n\t */\n\n\tBackoff.prototype.reset = function(){\n\t  this.attempts = 0;\n\t};\n\n\t/**\n\t * Set the minimum duration\n\t *\n\t * @api public\n\t */\n\n\tBackoff.prototype.setMin = function(min){\n\t  this.ms = min;\n\t};\n\n\t/**\n\t * Set the maximum duration\n\t *\n\t * @api public\n\t */\n\n\tBackoff.prototype.setMax = function(max){\n\t  this.max = max;\n\t};\n\n\t/**\n\t * Set the jitter\n\t *\n\t * @api public\n\t */\n\n\tBackoff.prototype.setJitter = function(jitter){\n\t  this.jitter = jitter;\n\t};\n\n\n\t},{}],37:[function(_dereq_,module,exports){\n\t/**\n\t * Slice reference.\n\t */\n\n\tvar slice = [].slice;\n\n\t/**\n\t * Bind `obj` to `fn`.\n\t *\n\t * @param {Object} obj\n\t * @param {Function|String} fn or string\n\t * @return {Function}\n\t * @api public\n\t */\n\n\tmodule.exports = function(obj, fn){\n\t  if ('string' == typeof fn) fn = obj[fn];\n\t  if ('function' != typeof fn) throw new Error('bind() requires a function');\n\t  var args = slice.call(arguments, 2);\n\t  return function(){\n\t\treturn fn.apply(obj, args.concat(slice.call(arguments)));\n\t  }\n\t};\n\n\t},{}],38:[function(_dereq_,module,exports){\n\n\t/**\n\t * Expose `Emitter`.\n\t */\n\n\tmodule.exports = Emitter;\n\n\t/**\n\t * Initialize a new `Emitter`.\n\t *\n\t * @api public\n\t */\n\n\tfunction Emitter(obj) {\n\t  if (obj) return mixin(obj);\n\t};\n\n\t/**\n\t * Mixin the emitter properties.\n\t *\n\t * @param {Object} obj\n\t * @return {Object}\n\t * @api private\n\t */\n\n\tfunction mixin(obj) {\n\t  for (var key in Emitter.prototype) {\n\t\tobj[key] = Emitter.prototype[key];\n\t  }\n\t  return obj;\n\t}\n\n\t/**\n\t * Listen on the given `event` with `fn`.\n\t *\n\t * @param {String} event\n\t * @param {Function} fn\n\t * @return {Emitter}\n\t * @api public\n\t */\n\n\tEmitter.prototype.on =\n\tEmitter.prototype.addEventListener = function(event, fn){\n\t  this._callbacks = this._callbacks || {};\n\t  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n\t\t.push(fn);\n\t  return this;\n\t};\n\n\t/**\n\t * Adds an `event` listener that will be invoked a single\n\t * time then automatically removed.\n\t *\n\t * @param {String} event\n\t * @param {Function} fn\n\t * @return {Emitter}\n\t * @api public\n\t */\n\n\tEmitter.prototype.once = function(event, fn){\n\t  function on() {\n\t\tthis.off(event, on);\n\t\tfn.apply(this, arguments);\n\t  }\n\n\t  on.fn = fn;\n\t  this.on(event, on);\n\t  return this;\n\t};\n\n\t/**\n\t * Remove the given callback for `event` or all\n\t * registered callbacks.\n\t *\n\t * @param {String} event\n\t * @param {Function} fn\n\t * @return {Emitter}\n\t * @api public\n\t */\n\n\tEmitter.prototype.off =\n\tEmitter.prototype.removeListener =\n\tEmitter.prototype.removeAllListeners =\n\tEmitter.prototype.removeEventListener = function(event, fn){\n\t  this._callbacks = this._callbacks || {};\n\n\t  // all\n\t  if (0 == arguments.length) {\n\t\tthis._callbacks = {};\n\t\treturn this;\n\t  }\n\n\t  // specific event\n\t  var callbacks = this._callbacks['$' + event];\n\t  if (!callbacks) return this;\n\n\t  // remove all handlers\n\t  if (1 == arguments.length) {\n\t\tdelete this._callbacks['$' + event];\n\t\treturn this;\n\t  }\n\n\t  // remove specific handler\n\t  var cb;\n\t  for (var i = 0; i < callbacks.length; i++) {\n\t\tcb = callbacks[i];\n\t\tif (cb === fn || cb.fn === fn) {\n\t\t  callbacks.splice(i, 1);\n\t\t  break;\n\t\t}\n\t  }\n\t  return this;\n\t};\n\n\t/**\n\t * Emit `event` with the given args.\n\t *\n\t * @param {String} event\n\t * @param {Mixed} ...\n\t * @return {Emitter}\n\t */\n\n\tEmitter.prototype.emit = function(event){\n\t  this._callbacks = this._callbacks || {};\n\t  var args = [].slice.call(arguments, 1)\n\t\t, callbacks = this._callbacks['$' + event];\n\n\t  if (callbacks) {\n\t\tcallbacks = callbacks.slice(0);\n\t\tfor (var i = 0, len = callbacks.length; i < len; ++i) {\n\t\t  callbacks[i].apply(this, args);\n\t\t}\n\t  }\n\n\t  return this;\n\t};\n\n\t/**\n\t * Return array of callbacks for `event`.\n\t *\n\t * @param {String} event\n\t * @return {Array}\n\t * @api public\n\t */\n\n\tEmitter.prototype.listeners = function(event){\n\t  this._callbacks = this._callbacks || {};\n\t  return this._callbacks['$' + event] || [];\n\t};\n\n\t/**\n\t * Check if this emitter has `event` handlers.\n\t *\n\t * @param {String} event\n\t * @return {Boolean}\n\t * @api public\n\t */\n\n\tEmitter.prototype.hasListeners = function(event){\n\t  return !! this.listeners(event).length;\n\t};\n\n\t},{}],39:[function(_dereq_,module,exports){\n\targuments[4][17][0].apply(exports,arguments)\n\t},{\"./debug\":40,\"dup\":17}],40:[function(_dereq_,module,exports){\n\targuments[4][18][0].apply(exports,arguments)\n\t},{\"dup\":18,\"ms\":44}],41:[function(_dereq_,module,exports){\n\t(function (global){\n\n\t/*\n\t * Module requirements.\n\t */\n\n\tvar isArray = _dereq_('isarray');\n\n\t/**\n\t * Module exports.\n\t */\n\n\tmodule.exports = hasBinary;\n\n\t/**\n\t * Checks for binary data.\n\t *\n\t * Right now only Buffer and ArrayBuffer are supported..\n\t *\n\t * @param {Object} anything\n\t * @api public\n\t */\n\n\tfunction hasBinary(data) {\n\n\t  function _hasBinary(obj) {\n\t\tif (!obj) return false;\n\n\t\tif ( (global.Buffer && global.Buffer.isBuffer && global.Buffer.isBuffer(obj)) ||\n\t\t\t (global.ArrayBuffer && obj instanceof ArrayBuffer) ||\n\t\t\t (global.Blob && obj instanceof Blob) ||\n\t\t\t (global.File && obj instanceof File)\n\t\t\t) {\n\t\t  return true;\n\t\t}\n\n\t\tif (isArray(obj)) {\n\t\t  for (var i = 0; i < obj.length; i++) {\n\t\t\t  if (_hasBinary(obj[i])) {\n\t\t\t\t  return true;\n\t\t\t  }\n\t\t  }\n\t\t} else if (obj && 'object' == typeof obj) {\n\t\t  // see: https://github.com/Automattic/has-binary/pull/4\n\t\t  if (obj.toJSON && 'function' == typeof obj.toJSON) {\n\t\t\tobj = obj.toJSON();\n\t\t  }\n\n\t\t  for (var key in obj) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(obj, key) && _hasBinary(obj[key])) {\n\t\t\t  return true;\n\t\t\t}\n\t\t  }\n\t\t}\n\n\t\treturn false;\n\t  }\n\n\t  return _hasBinary(data);\n\t}\n\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n\t},{\"isarray\":43}],42:[function(_dereq_,module,exports){\n\targuments[4][23][0].apply(exports,arguments)\n\t},{\"dup\":23}],43:[function(_dereq_,module,exports){\n\targuments[4][24][0].apply(exports,arguments)\n\t},{\"dup\":24}],44:[function(_dereq_,module,exports){\n\targuments[4][25][0].apply(exports,arguments)\n\t},{\"dup\":25}],45:[function(_dereq_,module,exports){\n\targuments[4][28][0].apply(exports,arguments)\n\t},{\"dup\":28}],46:[function(_dereq_,module,exports){\n\t(function (global){\n\t/*global Blob,File*/\n\n\t/**\n\t * Module requirements\n\t */\n\n\tvar isArray = _dereq_('isarray');\n\tvar isBuf = _dereq_('./is-buffer');\n\n\t/**\n\t * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n\t * Anything with blobs or files should be fed through removeBlobs before coming\n\t * here.\n\t *\n\t * @param {Object} packet - socket.io event packet\n\t * @return {Object} with deconstructed packet and list of buffers\n\t * @api public\n\t */\n\n\texports.deconstructPacket = function(packet){\n\t  var buffers = [];\n\t  var packetData = packet.data;\n\n\t  function _deconstructPacket(data) {\n\t\tif (!data) return data;\n\n\t\tif (isBuf(data)) {\n\t\t  var placeholder = { _placeholder: true, num: buffers.length };\n\t\t  buffers.push(data);\n\t\t  return placeholder;\n\t\t} else if (isArray(data)) {\n\t\t  var newData = new Array(data.length);\n\t\t  for (var i = 0; i < data.length; i++) {\n\t\t\tnewData[i] = _deconstructPacket(data[i]);\n\t\t  }\n\t\t  return newData;\n\t\t} else if ('object' == typeof data && !(data instanceof Date)) {\n\t\t  var newData = {};\n\t\t  for (var key in data) {\n\t\t\tnewData[key] = _deconstructPacket(data[key]);\n\t\t  }\n\t\t  return newData;\n\t\t}\n\t\treturn data;\n\t  }\n\n\t  var pack = packet;\n\t  pack.data = _deconstructPacket(packetData);\n\t  pack.attachments = buffers.length; // number of binary 'attachments'\n\t  return {packet: pack, buffers: buffers};\n\t};\n\n\t/**\n\t * Reconstructs a binary packet from its placeholder packet and buffers\n\t *\n\t * @param {Object} packet - event packet with placeholders\n\t * @param {Array} buffers - binary buffers to put in placeholder positions\n\t * @return {Object} reconstructed packet\n\t * @api public\n\t */\n\n\texports.reconstructPacket = function(packet, buffers) {\n\t  var curPlaceHolder = 0;\n\n\t  function _reconstructPacket(data) {\n\t\tif (data && data._placeholder) {\n\t\t  var buf = buffers[data.num]; // appropriate buffer (should be natural order anyway)\n\t\t  return buf;\n\t\t} else if (isArray(data)) {\n\t\t  for (var i = 0; i < data.length; i++) {\n\t\t\tdata[i] = _reconstructPacket(data[i]);\n\t\t  }\n\t\t  return data;\n\t\t} else if (data && 'object' == typeof data) {\n\t\t  for (var key in data) {\n\t\t\tdata[key] = _reconstructPacket(data[key]);\n\t\t  }\n\t\t  return data;\n\t\t}\n\t\treturn data;\n\t  }\n\n\t  packet.data = _reconstructPacket(packet.data);\n\t  packet.attachments = undefined; // no longer useful\n\t  return packet;\n\t};\n\n\t/**\n\t * Asynchronously removes Blobs or Files from data via\n\t * FileReader's readAsArrayBuffer method. Used before encoding\n\t * data as msgpack. Calls callback with the blobless data.\n\t *\n\t * @param {Object} data\n\t * @param {Function} callback\n\t * @api private\n\t */\n\n\texports.removeBlobs = function(data, callback) {\n\t  function _removeBlobs(obj, curKey, containingObject) {\n\t\tif (!obj) return obj;\n\n\t\t// convert any blob\n\t\tif ((global.Blob && obj instanceof Blob) ||\n\t\t\t(global.File && obj instanceof File)) {\n\t\t  pendingBlobs++;\n\n\t\t  // async filereader\n\t\t  var fileReader = new FileReader();\n\t\t  fileReader.onload = function() { // this.result == arraybuffer\n\t\t\tif (containingObject) {\n\t\t\t  containingObject[curKey] = this.result;\n\t\t\t}\n\t\t\telse {\n\t\t\t  bloblessData = this.result;\n\t\t\t}\n\n\t\t\t// if nothing pending its callback time\n\t\t\tif(! --pendingBlobs) {\n\t\t\t  callback(bloblessData);\n\t\t\t}\n\t\t  };\n\n\t\t  fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n\t\t} else if (isArray(obj)) { // handle array\n\t\t  for (var i = 0; i < obj.length; i++) {\n\t\t\t_removeBlobs(obj[i], i, obj);\n\t\t  }\n\t\t} else if (obj && 'object' == typeof obj && !isBuf(obj)) { // and object\n\t\t  for (var key in obj) {\n\t\t\t_removeBlobs(obj[key], key, obj);\n\t\t  }\n\t\t}\n\t  }\n\n\t  var pendingBlobs = 0;\n\t  var bloblessData = data;\n\t  _removeBlobs(bloblessData);\n\t  if (!pendingBlobs) {\n\t\tcallback(bloblessData);\n\t  }\n\t};\n\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n\t},{\"./is-buffer\":48,\"isarray\":43}],47:[function(_dereq_,module,exports){\n\n\t/**\n\t * Module dependencies.\n\t */\n\n\tvar debug = _dereq_('debug')('socket.io-parser');\n\tvar json = _dereq_('json3');\n\tvar isArray = _dereq_('isarray');\n\tvar Emitter = _dereq_('component-emitter');\n\tvar binary = _dereq_('./binary');\n\tvar isBuf = _dereq_('./is-buffer');\n\n\t/**\n\t * Protocol version.\n\t *\n\t * @api public\n\t */\n\n\texports.protocol = 4;\n\n\t/**\n\t * Packet types.\n\t *\n\t * @api public\n\t */\n\n\texports.types = [\n\t  'CONNECT',\n\t  'DISCONNECT',\n\t  'EVENT',\n\t  'BINARY_EVENT',\n\t  'ACK',\n\t  'BINARY_ACK',\n\t  'ERROR'\n\t];\n\n\t/**\n\t * Packet type `connect`.\n\t *\n\t * @api public\n\t */\n\n\texports.CONNECT = 0;\n\n\t/**\n\t * Packet type `disconnect`.\n\t *\n\t * @api public\n\t */\n\n\texports.DISCONNECT = 1;\n\n\t/**\n\t * Packet type `event`.\n\t *\n\t * @api public\n\t */\n\n\texports.EVENT = 2;\n\n\t/**\n\t * Packet type `ack`.\n\t *\n\t * @api public\n\t */\n\n\texports.ACK = 3;\n\n\t/**\n\t * Packet type `error`.\n\t *\n\t * @api public\n\t */\n\n\texports.ERROR = 4;\n\n\t/**\n\t * Packet type 'binary event'\n\t *\n\t * @api public\n\t */\n\n\texports.BINARY_EVENT = 5;\n\n\t/**\n\t * Packet type `binary ack`. For acks with binary arguments.\n\t *\n\t * @api public\n\t */\n\n\texports.BINARY_ACK = 6;\n\n\t/**\n\t * Encoder constructor.\n\t *\n\t * @api public\n\t */\n\n\texports.Encoder = Encoder;\n\n\t/**\n\t * Decoder constructor.\n\t *\n\t * @api public\n\t */\n\n\texports.Decoder = Decoder;\n\n\t/**\n\t * A socket.io Encoder instance\n\t *\n\t * @api public\n\t */\n\n\tfunction Encoder() {}\n\n\t/**\n\t * Encode a packet as a single string if non-binary, or as a\n\t * buffer sequence, depending on packet type.\n\t *\n\t * @param {Object} obj - packet object\n\t * @param {Function} callback - function to handle encodings (likely engine.write)\n\t * @return Calls callback with Array of encodings\n\t * @api public\n\t */\n\n\tEncoder.prototype.encode = function(obj, callback){\n\t  debug('encoding packet %j', obj);\n\n\t  if (exports.BINARY_EVENT == obj.type || exports.BINARY_ACK == obj.type) {\n\t\tencodeAsBinary(obj, callback);\n\t  }\n\t  else {\n\t\tvar encoding = encodeAsString(obj);\n\t\tcallback([encoding]);\n\t  }\n\t};\n\n\t/**\n\t * Encode packet as string.\n\t *\n\t * @param {Object} packet\n\t * @return {String} encoded\n\t * @api private\n\t */\n\n\tfunction encodeAsString(obj) {\n\t  var str = '';\n\t  var nsp = false;\n\n\t  // first is type\n\t  str += obj.type;\n\n\t  // attachments if we have them\n\t  if (exports.BINARY_EVENT == obj.type || exports.BINARY_ACK == obj.type) {\n\t\tstr += obj.attachments;\n\t\tstr += '-';\n\t  }\n\n\t  // if we have a namespace other than `/`\n\t  // we append it followed by a comma `,`\n\t  if (obj.nsp && '/' != obj.nsp) {\n\t\tnsp = true;\n\t\tstr += obj.nsp;\n\t  }\n\n\t  // immediately followed by the id\n\t  if (null != obj.id) {\n\t\tif (nsp) {\n\t\t  str += ',';\n\t\t  nsp = false;\n\t\t}\n\t\tstr += obj.id;\n\t  }\n\n\t  // json data\n\t  if (null != obj.data) {\n\t\tif (nsp) str += ',';\n\t\tstr += json.stringify(obj.data);\n\t  }\n\n\t  debug('encoded %j as %s', obj, str);\n\t  return str;\n\t}\n\n\t/**\n\t * Encode packet as 'buffer sequence' by removing blobs, and\n\t * deconstructing packet into object with placeholders and\n\t * a list of buffers.\n\t *\n\t * @param {Object} packet\n\t * @return {Buffer} encoded\n\t * @api private\n\t */\n\n\tfunction encodeAsBinary(obj, callback) {\n\n\t  function writeEncoding(bloblessData) {\n\t\tvar deconstruction = binary.deconstructPacket(bloblessData);\n\t\tvar pack = encodeAsString(deconstruction.packet);\n\t\tvar buffers = deconstruction.buffers;\n\n\t\tbuffers.unshift(pack); // add packet info to beginning of data list\n\t\tcallback(buffers); // write all the buffers\n\t  }\n\n\t  binary.removeBlobs(obj, writeEncoding);\n\t}\n\n\t/**\n\t * A socket.io Decoder instance\n\t *\n\t * @return {Object} decoder\n\t * @api public\n\t */\n\n\tfunction Decoder() {\n\t  this.reconstructor = null;\n\t}\n\n\t/**\n\t * Mix in `Emitter` with Decoder.\n\t */\n\n\tEmitter(Decoder.prototype);\n\n\t/**\n\t * Decodes an ecoded packet string into packet JSON.\n\t *\n\t * @param {String} obj - encoded packet\n\t * @return {Object} packet\n\t * @api public\n\t */\n\n\tDecoder.prototype.add = function(obj) {\n\t  var packet;\n\t  if ('string' == typeof obj) {\n\t\tpacket = decodeString(obj);\n\t\tif (exports.BINARY_EVENT == packet.type || exports.BINARY_ACK == packet.type) { // binary packet's json\n\t\t  this.reconstructor = new BinaryReconstructor(packet);\n\n\t\t  // no attachments, labeled binary but no binary data to follow\n\t\t  if (this.reconstructor.reconPack.attachments === 0) {\n\t\t\tthis.emit('decoded', packet);\n\t\t  }\n\t\t} else { // non-binary full packet\n\t\t  this.emit('decoded', packet);\n\t\t}\n\t  }\n\t  else if (isBuf(obj) || obj.base64) { // raw binary data\n\t\tif (!this.reconstructor) {\n\t\t  throw new Error('got binary data when not reconstructing a packet');\n\t\t} else {\n\t\t  packet = this.reconstructor.takeBinaryData(obj);\n\t\t  if (packet) { // received final buffer\n\t\t\tthis.reconstructor = null;\n\t\t\tthis.emit('decoded', packet);\n\t\t  }\n\t\t}\n\t  }\n\t  else {\n\t\tthrow new Error('Unknown type: ' + obj);\n\t  }\n\t};\n\n\t/**\n\t * Decode a packet String (JSON data)\n\t *\n\t * @param {String} str\n\t * @return {Object} packet\n\t * @api private\n\t */\n\n\tfunction decodeString(str) {\n\t  var p = {};\n\t  var i = 0;\n\n\t  // look up type\n\t  p.type = Number(str.charAt(0));\n\t  if (null == exports.types[p.type]) return error();\n\n\t  // look up attachments if type binary\n\t  if (exports.BINARY_EVENT == p.type || exports.BINARY_ACK == p.type) {\n\t\tvar buf = '';\n\t\twhile (str.charAt(++i) != '-') {\n\t\t  buf += str.charAt(i);\n\t\t  if (i == str.length) break;\n\t\t}\n\t\tif (buf != Number(buf) || str.charAt(i) != '-') {\n\t\t  throw new Error('Illegal attachments');\n\t\t}\n\t\tp.attachments = Number(buf);\n\t  }\n\n\t  // look up namespace (if any)\n\t  if ('/' == str.charAt(i + 1)) {\n\t\tp.nsp = '';\n\t\twhile (++i) {\n\t\t  var c = str.charAt(i);\n\t\t  if (',' == c) break;\n\t\t  p.nsp += c;\n\t\t  if (i == str.length) break;\n\t\t}\n\t  } else {\n\t\tp.nsp = '/';\n\t  }\n\n\t  // look up id\n\t  var next = str.charAt(i + 1);\n\t  if ('' !== next && Number(next) == next) {\n\t\tp.id = '';\n\t\twhile (++i) {\n\t\t  var c = str.charAt(i);\n\t\t  if (null == c || Number(c) != c) {\n\t\t\t--i;\n\t\t\tbreak;\n\t\t  }\n\t\t  p.id += str.charAt(i);\n\t\t  if (i == str.length) break;\n\t\t}\n\t\tp.id = Number(p.id);\n\t  }\n\n\t  // look up json data\n\t  if (str.charAt(++i)) {\n\t\ttry {\n\t\t  p.data = json.parse(str.substr(i));\n\t\t} catch(e){\n\t\t  return error();\n\t\t}\n\t  }\n\n\t  debug('decoded %s as %j', str, p);\n\t  return p;\n\t}\n\n\t/**\n\t * Deallocates a parser's resources\n\t *\n\t * @api public\n\t */\n\n\tDecoder.prototype.destroy = function() {\n\t  if (this.reconstructor) {\n\t\tthis.reconstructor.finishedReconstruction();\n\t  }\n\t};\n\n\t/**\n\t * A manager of a binary event's 'buffer sequence'. Should\n\t * be constructed whenever a packet of type BINARY_EVENT is\n\t * decoded.\n\t *\n\t * @param {Object} packet\n\t * @return {BinaryReconstructor} initialized reconstructor\n\t * @api private\n\t */\n\n\tfunction BinaryReconstructor(packet) {\n\t  this.reconPack = packet;\n\t  this.buffers = [];\n\t}\n\n\t/**\n\t * Method to be called when binary data received from connection\n\t * after a BINARY_EVENT packet.\n\t *\n\t * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n\t * @return {null | Object} returns null if more binary data is expected or\n\t *   a reconstructed packet object if all buffers have been received.\n\t * @api private\n\t */\n\n\tBinaryReconstructor.prototype.takeBinaryData = function(binData) {\n\t  this.buffers.push(binData);\n\t  if (this.buffers.length == this.reconPack.attachments) { // done with buffer list\n\t\tvar packet = binary.reconstructPacket(this.reconPack, this.buffers);\n\t\tthis.finishedReconstruction();\n\t\treturn packet;\n\t  }\n\t  return null;\n\t};\n\n\t/**\n\t * Cleans up binary packet reconstruction variables.\n\t *\n\t * @api private\n\t */\n\n\tBinaryReconstructor.prototype.finishedReconstruction = function() {\n\t  this.reconPack = null;\n\t  this.buffers = [];\n\t};\n\n\tfunction error(data){\n\t  return {\n\t\ttype: exports.ERROR,\n\t\tdata: 'parser error'\n\t  };\n\t}\n\n\t},{\"./binary\":46,\"./is-buffer\":48,\"component-emitter\":49,\"debug\":39,\"isarray\":43,\"json3\":50}],48:[function(_dereq_,module,exports){\n\t(function (global){\n\n\tmodule.exports = isBuf;\n\n\t/**\n\t * Returns true if obj is a buffer or an arraybuffer.\n\t *\n\t * @api private\n\t */\n\n\tfunction isBuf(obj) {\n\t  return (global.Buffer && global.Buffer.isBuffer(obj)) ||\n\t\t\t (global.ArrayBuffer && obj instanceof ArrayBuffer);\n\t}\n\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n\t},{}],49:[function(_dereq_,module,exports){\n\targuments[4][15][0].apply(exports,arguments)\n\t},{\"dup\":15}],50:[function(_dereq_,module,exports){\n\t(function (global){\n\t/*! JSON v3.3.2 | http://bestiejs.github.io/json3 | Copyright 2012-2014, Kit Cambridge | http://kit.mit-license.org */\n\t;(function () {\n\t  // Detect the `define` function exposed by asynchronous module loaders. The\n\t  // strict `define` check is necessary for compatibility with `r.js`.\n\t  var isLoader = typeof define === \"function\" && define.amd;\n\n\t  // A set of types used to distinguish objects from primitives.\n\t  var objectTypes = {\n\t\t\"function\": true,\n\t\t\"object\": true\n\t  };\n\n\t  // Detect the `exports` object exposed by CommonJS implementations.\n\t  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;\n\n\t  // Use the `global` object exposed by Node (including Browserify via\n\t  // `insert-module-globals`), Narwhal, and Ringo as the default context,\n\t  // and the `window` object in browsers. Rhino exports a `global` function\n\t  // instead.\n\t  var root = objectTypes[typeof window] && window || this,\n\t\t  freeGlobal = freeExports && objectTypes[typeof module] && module && !module.nodeType && typeof global == \"object\" && global;\n\n\t  if (freeGlobal && (freeGlobal[\"global\"] === freeGlobal || freeGlobal[\"window\"] === freeGlobal || freeGlobal[\"self\"] === freeGlobal)) {\n\t\troot = freeGlobal;\n\t  }\n\n\t  // Public: Initializes JSON 3 using the given `context` object, attaching the\n\t  // `stringify` and `parse` functions to the specified `exports` object.\n\t  function runInContext(context, exports) {\n\t\tcontext || (context = root[\"Object\"]());\n\t\texports || (exports = root[\"Object\"]());\n\n\t\t// Native constructor aliases.\n\t\tvar Number = context[\"Number\"] || root[\"Number\"],\n\t\t\tString = context[\"String\"] || root[\"String\"],\n\t\t\tObject = context[\"Object\"] || root[\"Object\"],\n\t\t\tDate = context[\"Date\"] || root[\"Date\"],\n\t\t\tSyntaxError = context[\"SyntaxError\"] || root[\"SyntaxError\"],\n\t\t\tTypeError = context[\"TypeError\"] || root[\"TypeError\"],\n\t\t\tMath = context[\"Math\"] || root[\"Math\"],\n\t\t\tnativeJSON = context[\"JSON\"] || root[\"JSON\"];\n\n\t\t// Delegate to the native `stringify` and `parse` implementations.\n\t\tif (typeof nativeJSON == \"object\" && nativeJSON) {\n\t\t  exports.stringify = nativeJSON.stringify;\n\t\t  exports.parse = nativeJSON.parse;\n\t\t}\n\n\t\t// Convenience aliases.\n\t\tvar objectProto = Object.prototype,\n\t\t\tgetClass = objectProto.toString,\n\t\t\tisProperty, forEach, undef;\n\n\t\t// Test the `Date#getUTC*` methods. Based on work by @Yaffle.\n\t\tvar isExtended = new Date(-3509827334573292);\n\t\ttry {\n\t\t  // The `getUTCFullYear`, `Month`, and `Date` methods return nonsensical\n\t\t  // results for certain dates in Opera >= 10.53.\n\t\t  isExtended = isExtended.getUTCFullYear() == -109252 && isExtended.getUTCMonth() === 0 && isExtended.getUTCDate() === 1 &&\n\t\t\t// Safari < 2.0.2 stores the internal millisecond time value correctly,\n\t\t\t// but clips the values returned by the date methods to the range of\n\t\t\t// signed 32-bit integers ([-2 ** 31, 2 ** 31 - 1]).\n\t\t\tisExtended.getUTCHours() == 10 && isExtended.getUTCMinutes() == 37 && isExtended.getUTCSeconds() == 6 && isExtended.getUTCMilliseconds() == 708;\n\t\t} catch (exception) {}\n\n\t\t// Internal: Determines whether the native `JSON.stringify` and `parse`\n\t\t// implementations are spec-compliant. Based on work by Ken Snyder.\n\t\tfunction has(name) {\n\t\t  if (has[name] !== undef) {\n\t\t\t// Return cached feature test result.\n\t\t\treturn has[name];\n\t\t  }\n\t\t  var isSupported;\n\t\t  if (name == \"bug-string-char-index\") {\n\t\t\t// IE <= 7 doesn't support accessing string characters using square\n\t\t\t// bracket notation. IE 8 only supports this for primitives.\n\t\t\tisSupported = \"a\"[0] != \"a\";\n\t\t  } else if (name == \"json\") {\n\t\t\t// Indicates whether both `JSON.stringify` and `JSON.parse` are\n\t\t\t// supported.\n\t\t\tisSupported = has(\"json-stringify\") && has(\"json-parse\");\n\t\t  } else {\n\t\t\tvar value, serialized = '{\"a\":[1,true,false,null,\"\\\\u0000\\\\b\\\\n\\\\f\\\\r\\\\t\"]}';\n\t\t\t// Test `JSON.stringify`.\n\t\t\tif (name == \"json-stringify\") {\n\t\t\t  var stringify = exports.stringify, stringifySupported = typeof stringify == \"function\" && isExtended;\n\t\t\t  if (stringifySupported) {\n\t\t\t\t// A test function object with a custom `toJSON` method.\n\t\t\t\t(value = function () {\n\t\t\t\t  return 1;\n\t\t\t\t}).toJSON = value;\n\t\t\t\ttry {\n\t\t\t\t  stringifySupported =\n\t\t\t\t\t// Firefox 3.1b1 and b2 serialize string, number, and boolean\n\t\t\t\t\t// primitives as object literals.\n\t\t\t\t\tstringify(0) === \"0\" &&\n\t\t\t\t\t// FF 3.1b1, b2, and JSON 2 serialize wrapped primitives as object\n\t\t\t\t\t// literals.\n\t\t\t\t\tstringify(new Number()) === \"0\" &&\n\t\t\t\t\tstringify(new String()) == '\"\"' &&\n\t\t\t\t\t// FF 3.1b1, 2 throw an error if the value is `null`, `undefined`, or\n\t\t\t\t\t// does not define a canonical JSON representation (this applies to\n\t\t\t\t\t// objects with `toJSON` properties as well, *unless* they are nested\n\t\t\t\t\t// within an object or array).\n\t\t\t\t\tstringify(getClass) === undef &&\n\t\t\t\t\t// IE 8 serializes `undefined` as `\"undefined\"`. Safari <= 5.1.7 and\n\t\t\t\t\t// FF 3.1b3 pass this test.\n\t\t\t\t\tstringify(undef) === undef &&\n\t\t\t\t\t// Safari <= 5.1.7 and FF 3.1b3 throw `Error`s and `TypeError`s,\n\t\t\t\t\t// respectively, if the value is omitted entirely.\n\t\t\t\t\tstringify() === undef &&\n\t\t\t\t\t// FF 3.1b1, 2 throw an error if the given value is not a number,\n\t\t\t\t\t// string, array, object, Boolean, or `null` literal. This applies to\n\t\t\t\t\t// objects with custom `toJSON` methods as well, unless they are nested\n\t\t\t\t\t// inside object or array literals. YUI 3.0.0b1 ignores custom `toJSON`\n\t\t\t\t\t// methods entirely.\n\t\t\t\t\tstringify(value) === \"1\" &&\n\t\t\t\t\tstringify([value]) == \"[1]\" &&\n\t\t\t\t\t// Prototype <= 1.6.1 serializes `[undefined]` as `\"[]\"` instead of\n\t\t\t\t\t// `\"[null]\"`.\n\t\t\t\t\tstringify([undef]) == \"[null]\" &&\n\t\t\t\t\t// YUI 3.0.0b1 fails to serialize `null` literals.\n\t\t\t\t\tstringify(null) == \"null\" &&\n\t\t\t\t\t// FF 3.1b1, 2 halts serialization if an array contains a function:\n\t\t\t\t\t// `[1, true, getClass, 1]` serializes as \"[1,true,],\". FF 3.1b3\n\t\t\t\t\t// elides non-JSON values from objects and arrays, unless they\n\t\t\t\t\t// define custom `toJSON` methods.\n\t\t\t\t\tstringify([undef, getClass, null]) == \"[null,null,null]\" &&\n\t\t\t\t\t// Simple serialization test. FF 3.1b1 uses Unicode escape sequences\n\t\t\t\t\t// where character escape codes are expected (e.g., `\\b` => `\\u0008`).\n\t\t\t\t\tstringify({ \"a\": [value, true, false, null, \"\\x00\\b\\n\\f\\r\\t\"] }) == serialized &&\n\t\t\t\t\t// FF 3.1b1 and b2 ignore the `filter` and `width` arguments.\n\t\t\t\t\tstringify(null, value) === \"1\" &&\n\t\t\t\t\tstringify([1, 2], null, 1) == \"[\\n 1,\\n 2\\n]\" &&\n\t\t\t\t\t// JSON 2, Prototype <= 1.7, and older WebKit builds incorrectly\n\t\t\t\t\t// serialize extended years.\n\t\t\t\t\tstringify(new Date(-8.64e15)) == '\"-271821-04-20T00:00:00.000Z\"' &&\n\t\t\t\t\t// The milliseconds are optional in ES 5, but required in 5.1.\n\t\t\t\t\tstringify(new Date(8.64e15)) == '\"+275760-09-13T00:00:00.000Z\"' &&\n\t\t\t\t\t// Firefox <= 11.0 incorrectly serializes years prior to 0 as negative\n\t\t\t\t\t// four-digit years instead of six-digit years. Credits: @Yaffle.\n\t\t\t\t\tstringify(new Date(-621987552e5)) == '\"-000001-01-01T00:00:00.000Z\"' &&\n\t\t\t\t\t// Safari <= 5.1.5 and Opera >= 10.53 incorrectly serialize millisecond\n\t\t\t\t\t// values less than 1000. Credits: @Yaffle.\n\t\t\t\t\tstringify(new Date(-1)) == '\"1969-12-31T23:59:59.999Z\"';\n\t\t\t\t} catch (exception) {\n\t\t\t\t  stringifySupported = false;\n\t\t\t\t}\n\t\t\t  }\n\t\t\t  isSupported = stringifySupported;\n\t\t\t}\n\t\t\t// Test `JSON.parse`.\n\t\t\tif (name == \"json-parse\") {\n\t\t\t  var parse = exports.parse;\n\t\t\t  if (typeof parse == \"function\") {\n\t\t\t\ttry {\n\t\t\t\t  // FF 3.1b1, b2 will throw an exception if a bare literal is provided.\n\t\t\t\t  // Conforming implementations should also coerce the initial argument to\n\t\t\t\t  // a string prior to parsing.\n\t\t\t\t  if (parse(\"0\") === 0 && !parse(false)) {\n\t\t\t\t\t// Simple parsing test.\n\t\t\t\t\tvalue = parse(serialized);\n\t\t\t\t\tvar parseSupported = value[\"a\"].length == 5 && value[\"a\"][0] === 1;\n\t\t\t\t\tif (parseSupported) {\n\t\t\t\t\t  try {\n\t\t\t\t\t\t// Safari <= 5.1.2 and FF 3.1b1 allow unescaped tabs in strings.\n\t\t\t\t\t\tparseSupported = !parse('\"\\t\"');\n\t\t\t\t\t  } catch (exception) {}\n\t\t\t\t\t  if (parseSupported) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t  // FF 4.0 and 4.0.1 allow leading `+` signs and leading\n\t\t\t\t\t\t  // decimal points. FF 4.0, 4.0.1, and IE 9-10 also allow\n\t\t\t\t\t\t  // certain octal literals.\n\t\t\t\t\t\t  parseSupported = parse(\"01\") !== 1;\n\t\t\t\t\t\t} catch (exception) {}\n\t\t\t\t\t  }\n\t\t\t\t\t  if (parseSupported) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t  // FF 4.0, 4.0.1, and Rhino 1.7R3-R4 allow trailing decimal\n\t\t\t\t\t\t  // points. These environments, along with FF 3.1b1 and 2,\n\t\t\t\t\t\t  // also allow trailing commas in JSON objects and arrays.\n\t\t\t\t\t\t  parseSupported = parse(\"1.\") !== 1;\n\t\t\t\t\t\t} catch (exception) {}\n\t\t\t\t\t  }\n\t\t\t\t\t}\n\t\t\t\t  }\n\t\t\t\t} catch (exception) {\n\t\t\t\t  parseSupported = false;\n\t\t\t\t}\n\t\t\t  }\n\t\t\t  isSupported = parseSupported;\n\t\t\t}\n\t\t  }\n\t\t  return has[name] = !!isSupported;\n\t\t}\n\n\t\tif (!has(\"json\")) {\n\t\t  // Common `[[Class]]` name aliases.\n\t\t  var functionClass = \"[object Function]\",\n\t\t\t  dateClass = \"[object Date]\",\n\t\t\t  numberClass = \"[object Number]\",\n\t\t\t  stringClass = \"[object String]\",\n\t\t\t  arrayClass = \"[object Array]\",\n\t\t\t  booleanClass = \"[object Boolean]\";\n\n\t\t  // Detect incomplete support for accessing string characters by index.\n\t\t  var charIndexBuggy = has(\"bug-string-char-index\");\n\n\t\t  // Define additional utility methods if the `Date` methods are buggy.\n\t\t  if (!isExtended) {\n\t\t\tvar floor = Math.floor;\n\t\t\t// A mapping between the months of the year and the number of days between\n\t\t\t// January 1st and the first of the respective month.\n\t\t\tvar Months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\n\t\t\t// Internal: Calculates the number of days between the Unix epoch and the\n\t\t\t// first day of the given month.\n\t\t\tvar getDay = function (year, month) {\n\t\t\t  return Months[month] + 365 * (year - 1970) + floor((year - 1969 + (month = +(month > 1))) / 4) - floor((year - 1901 + month) / 100) + floor((year - 1601 + month) / 400);\n\t\t\t};\n\t\t  }\n\n\t\t  // Internal: Determines if a property is a direct property of the given\n\t\t  // object. Delegates to the native `Object#hasOwnProperty` method.\n\t\t  if (!(isProperty = objectProto.hasOwnProperty)) {\n\t\t\tisProperty = function (property) {\n\t\t\t  var members = {}, constructor;\n\t\t\t  if ((members.__proto__ = null, members.__proto__ = {\n\t\t\t\t// The *proto* property cannot be set multiple times in recent\n\t\t\t\t// versions of Firefox and SeaMonkey.\n\t\t\t\t\"toString\": 1\n\t\t\t  }, members).toString != getClass) {\n\t\t\t\t// Safari <= 2.0.3 doesn't implement `Object#hasOwnProperty`, but\n\t\t\t\t// supports the mutable *proto* property.\n\t\t\t\tisProperty = function (property) {\n\t\t\t\t  // Capture and break the object's prototype chain (see section 8.6.2\n\t\t\t\t  // of the ES 5.1 spec). The parenthesized expression prevents an\n\t\t\t\t  // unsafe transformation by the Closure Compiler.\n\t\t\t\t  var original = this.__proto__, result = property in (this.__proto__ = null, this);\n\t\t\t\t  // Restore the original prototype chain.\n\t\t\t\t  this.__proto__ = original;\n\t\t\t\t  return result;\n\t\t\t\t};\n\t\t\t  } else {\n\t\t\t\t// Capture a reference to the top-level `Object` constructor.\n\t\t\t\tconstructor = members.constructor;\n\t\t\t\t// Use the `constructor` property to simulate `Object#hasOwnProperty` in\n\t\t\t\t// other environments.\n\t\t\t\tisProperty = function (property) {\n\t\t\t\t  var parent = (this.constructor || constructor).prototype;\n\t\t\t\t  return property in this && !(property in parent && this[property] === parent[property]);\n\t\t\t\t};\n\t\t\t  }\n\t\t\t  members = null;\n\t\t\t  return isProperty.call(this, property);\n\t\t\t};\n\t\t  }\n\n\t\t  // Internal: Normalizes the `for...in` iteration algorithm across\n\t\t  // environments. Each enumerated key is yielded to a `callback` function.\n\t\t  forEach = function (object, callback) {\n\t\t\tvar size = 0, Properties, members, property;\n\n\t\t\t// Tests for bugs in the current environment's `for...in` algorithm. The\n\t\t\t// `valueOf` property inherits the non-enumerable flag from\n\t\t\t// `Object.prototype` in older versions of IE, Netscape, and Mozilla.\n\t\t\t(Properties = function () {\n\t\t\t  this.valueOf = 0;\n\t\t\t}).prototype.valueOf = 0;\n\n\t\t\t// Iterate over a new instance of the `Properties` class.\n\t\t\tmembers = new Properties();\n\t\t\tfor (property in members) {\n\t\t\t  // Ignore all properties inherited from `Object.prototype`.\n\t\t\t  if (isProperty.call(members, property)) {\n\t\t\t\tsize++;\n\t\t\t  }\n\t\t\t}\n\t\t\tProperties = members = null;\n\n\t\t\t// Normalize the iteration algorithm.\n\t\t\tif (!size) {\n\t\t\t  // A list of non-enumerable properties inherited from `Object.prototype`.\n\t\t\t  members = [\"valueOf\", \"toString\", \"toLocaleString\", \"propertyIsEnumerable\", \"isPrototypeOf\", \"hasOwnProperty\", \"constructor\"];\n\t\t\t  // IE <= 8, Mozilla 1.0, and Netscape 6.2 ignore shadowed non-enumerable\n\t\t\t  // properties.\n\t\t\t  forEach = function (object, callback) {\n\t\t\t\tvar isFunction = getClass.call(object) == functionClass, property, length;\n\t\t\t\tvar hasProperty = !isFunction && typeof object.constructor != \"function\" && objectTypes[typeof object.hasOwnProperty] && object.hasOwnProperty || isProperty;\n\t\t\t\tfor (property in object) {\n\t\t\t\t  // Gecko <= 1.0 enumerates the `prototype` property of functions under\n\t\t\t\t  // certain conditions; IE does not.\n\t\t\t\t  if (!(isFunction && property == \"prototype\") && hasProperty.call(object, property)) {\n\t\t\t\t\tcallback(property);\n\t\t\t\t  }\n\t\t\t\t}\n\t\t\t\t// Manually invoke the callback for each non-enumerable property.\n\t\t\t\tfor (length = members.length; property = members[--length]; hasProperty.call(object, property) && callback(property));\n\t\t\t  };\n\t\t\t} else if (size == 2) {\n\t\t\t  // Safari <= 2.0.4 enumerates shadowed properties twice.\n\t\t\t  forEach = function (object, callback) {\n\t\t\t\t// Create a set of iterated properties.\n\t\t\t\tvar members = {}, isFunction = getClass.call(object) == functionClass, property;\n\t\t\t\tfor (property in object) {\n\t\t\t\t  // Store each property name to prevent double enumeration. The\n\t\t\t\t  // `prototype` property of functions is not enumerated due to cross-\n\t\t\t\t  // environment inconsistencies.\n\t\t\t\t  if (!(isFunction && property == \"prototype\") && !isProperty.call(members, property) && (members[property] = 1) && isProperty.call(object, property)) {\n\t\t\t\t\tcallback(property);\n\t\t\t\t  }\n\t\t\t\t}\n\t\t\t  };\n\t\t\t} else {\n\t\t\t  // No bugs detected; use the standard `for...in` algorithm.\n\t\t\t  forEach = function (object, callback) {\n\t\t\t\tvar isFunction = getClass.call(object) == functionClass, property, isConstructor;\n\t\t\t\tfor (property in object) {\n\t\t\t\t  if (!(isFunction && property == \"prototype\") && isProperty.call(object, property) && !(isConstructor = property === \"constructor\")) {\n\t\t\t\t\tcallback(property);\n\t\t\t\t  }\n\t\t\t\t}\n\t\t\t\t// Manually invoke the callback for the `constructor` property due to\n\t\t\t\t// cross-environment inconsistencies.\n\t\t\t\tif (isConstructor || isProperty.call(object, (property = \"constructor\"))) {\n\t\t\t\t  callback(property);\n\t\t\t\t}\n\t\t\t  };\n\t\t\t}\n\t\t\treturn forEach(object, callback);\n\t\t  };\n\n\t\t  // Public: Serializes a JavaScript `value` as a JSON string. The optional\n\t\t  // `filter` argument may specify either a function that alters how object and\n\t\t  // array members are serialized, or an array of strings and numbers that\n\t\t  // indicates which properties should be serialized. The optional `width`\n\t\t  // argument may be either a string or number that specifies the indentation\n\t\t  // level of the output.\n\t\t  if (!has(\"json-stringify\")) {\n\t\t\t// Internal: A map of control characters and their escaped equivalents.\n\t\t\tvar Escapes = {\n\t\t\t  92: \"\\\\\\\\\",\n\t\t\t  34: '\\\\\"',\n\t\t\t  8: \"\\\\b\",\n\t\t\t  12: \"\\\\f\",\n\t\t\t  10: \"\\\\n\",\n\t\t\t  13: \"\\\\r\",\n\t\t\t  9: \"\\\\t\"\n\t\t\t};\n\n\t\t\t// Internal: Converts `value` into a zero-padded string such that its\n\t\t\t// length is at least equal to `width`. The `width` must be <= 6.\n\t\t\tvar leadingZeroes = \"000000\";\n\t\t\tvar toPaddedString = function (width, value) {\n\t\t\t  // The `|| 0` expression is necessary to work around a bug in\n\t\t\t  // Opera <= 7.54u2 where `0 == -0`, but `String(-0) !== \"0\"`.\n\t\t\t  return (leadingZeroes + (value || 0)).slice(-width);\n\t\t\t};\n\n\t\t\t// Internal: Double-quotes a string `value`, replacing all ASCII control\n\t\t\t// characters (characters with code unit values between 0 and 31) with\n\t\t\t// their escaped equivalents. This is an implementation of the\n\t\t\t// `Quote(value)` operation defined in ES 5.1 section 15.12.3.\n\t\t\tvar unicodePrefix = \"\\\\u00\";\n\t\t\tvar quote = function (value) {\n\t\t\t  var result = '\"', index = 0, length = value.length, useCharIndex = !charIndexBuggy || length > 10;\n\t\t\t  var symbols = useCharIndex && (charIndexBuggy ? value.split(\"\") : value);\n\t\t\t  for (; index < length; index++) {\n\t\t\t\tvar charCode = value.charCodeAt(index);\n\t\t\t\t// If the character is a control character, append its Unicode or\n\t\t\t\t// shorthand escape sequence; otherwise, append the character as-is.\n\t\t\t\tswitch (charCode) {\n\t\t\t\t  case 8: case 9: case 10: case 12: case 13: case 34: case 92:\n\t\t\t\t\tresult += Escapes[charCode];\n\t\t\t\t\tbreak;\n\t\t\t\t  default:\n\t\t\t\t\tif (charCode < 32) {\n\t\t\t\t\t  result += unicodePrefix + toPaddedString(2, charCode.toString(16));\n\t\t\t\t\t  break;\n\t\t\t\t\t}\n\t\t\t\t\tresult += useCharIndex ? symbols[index] : value.charAt(index);\n\t\t\t\t}\n\t\t\t  }\n\t\t\t  return result + '\"';\n\t\t\t};\n\n\t\t\t// Internal: Recursively serializes an object. Implements the\n\t\t\t// `Str(key, holder)`, `JO(value)`, and `JA(value)` operations.\n\t\t\tvar serialize = function (property, object, callback, properties, whitespace, indentation, stack) {\n\t\t\t  var value, className, year, month, date, time, hours, minutes, seconds, milliseconds, results, element, index, length, prefix, result;\n\t\t\t  try {\n\t\t\t\t// Necessary for host object support.\n\t\t\t\tvalue = object[property];\n\t\t\t  } catch (exception) {}\n\t\t\t  if (typeof value == \"object\" && value) {\n\t\t\t\tclassName = getClass.call(value);\n\t\t\t\tif (className == dateClass && !isProperty.call(value, \"toJSON\")) {\n\t\t\t\t  if (value > -1 / 0 && value < 1 / 0) {\n\t\t\t\t\t// Dates are serialized according to the `Date#toJSON` method\n\t\t\t\t\t// specified in ES 5.1 section 15.9.5.44. See section 15.9.1.15\n\t\t\t\t\t// for the ISO 8601 date time string format.\n\t\t\t\t\tif (getDay) {\n\t\t\t\t\t  // Manually compute the year, month, date, hours, minutes,\n\t\t\t\t\t  // seconds, and milliseconds if the `getUTC*` methods are\n\t\t\t\t\t  // buggy. Adapted from @Yaffle's `date-shim` project.\n\t\t\t\t\t  date = floor(value / 864e5);\n\t\t\t\t\t  for (year = floor(date / 365.2425) + 1970 - 1; getDay(year + 1, 0) <= date; year++);\n\t\t\t\t\t  for (month = floor((date - getDay(year, 0)) / 30.42); getDay(year, month + 1) <= date; month++);\n\t\t\t\t\t  date = 1 + date - getDay(year, month);\n\t\t\t\t\t  // The `time` value specifies the time within the day (see ES\n\t\t\t\t\t  // 5.1 section 15.9.1.2). The formula `(A % B + B) % B` is used\n\t\t\t\t\t  // to compute `A modulo B`, as the `%` operator does not\n\t\t\t\t\t  // correspond to the `modulo` operation for negative numbers.\n\t\t\t\t\t  time = (value % 864e5 + 864e5) % 864e5;\n\t\t\t\t\t  // The hours, minutes, seconds, and milliseconds are obtained by\n\t\t\t\t\t  // decomposing the time within the day. See section 15.9.1.10.\n\t\t\t\t\t  hours = floor(time / 36e5) % 24;\n\t\t\t\t\t  minutes = floor(time / 6e4) % 60;\n\t\t\t\t\t  seconds = floor(time / 1e3) % 60;\n\t\t\t\t\t  milliseconds = time % 1e3;\n\t\t\t\t\t} else {\n\t\t\t\t\t  year = value.getUTCFullYear();\n\t\t\t\t\t  month = value.getUTCMonth();\n\t\t\t\t\t  date = value.getUTCDate();\n\t\t\t\t\t  hours = value.getUTCHours();\n\t\t\t\t\t  minutes = value.getUTCMinutes();\n\t\t\t\t\t  seconds = value.getUTCSeconds();\n\t\t\t\t\t  milliseconds = value.getUTCMilliseconds();\n\t\t\t\t\t}\n\t\t\t\t\t// Serialize extended years correctly.\n\t\t\t\t\tvalue = (year <= 0 || year >= 1e4 ? (year < 0 ? \"-\" : \"+\") + toPaddedString(6, year < 0 ? -year : year) : toPaddedString(4, year)) +\n\t\t\t\t\t  \"-\" + toPaddedString(2, month + 1) + \"-\" + toPaddedString(2, date) +\n\t\t\t\t\t  // Months, dates, hours, minutes, and seconds should have two\n\t\t\t\t\t  // digits; milliseconds should have three.\n\t\t\t\t\t  \"T\" + toPaddedString(2, hours) + \":\" + toPaddedString(2, minutes) + \":\" + toPaddedString(2, seconds) +\n\t\t\t\t\t  // Milliseconds are optional in ES 5.0, but required in 5.1.\n\t\t\t\t\t  \".\" + toPaddedString(3, milliseconds) + \"Z\";\n\t\t\t\t  } else {\n\t\t\t\t\tvalue = null;\n\t\t\t\t  }\n\t\t\t\t} else if (typeof value.toJSON == \"function\" && ((className != numberClass && className != stringClass && className != arrayClass) || isProperty.call(value, \"toJSON\"))) {\n\t\t\t\t  // Prototype <= 1.6.1 adds non-standard `toJSON` methods to the\n\t\t\t\t  // `Number`, `String`, `Date`, and `Array` prototypes. JSON 3\n\t\t\t\t  // ignores all `toJSON` methods on these objects unless they are\n\t\t\t\t  // defined directly on an instance.\n\t\t\t\t  value = value.toJSON(property);\n\t\t\t\t}\n\t\t\t  }\n\t\t\t  if (callback) {\n\t\t\t\t// If a replacement function was provided, call it to obtain the value\n\t\t\t\t// for serialization.\n\t\t\t\tvalue = callback.call(object, property, value);\n\t\t\t  }\n\t\t\t  if (value === null) {\n\t\t\t\treturn \"null\";\n\t\t\t  }\n\t\t\t  className = getClass.call(value);\n\t\t\t  if (className == booleanClass) {\n\t\t\t\t// Booleans are represented literally.\n\t\t\t\treturn \"\" + value;\n\t\t\t  } else if (className == numberClass) {\n\t\t\t\t// JSON numbers must be finite. `Infinity` and `NaN` are serialized as\n\t\t\t\t// `\"null\"`.\n\t\t\t\treturn value > -1 / 0 && value < 1 / 0 ? \"\" + value : \"null\";\n\t\t\t  } else if (className == stringClass) {\n\t\t\t\t// Strings are double-quoted and escaped.\n\t\t\t\treturn quote(\"\" + value);\n\t\t\t  }\n\t\t\t  // Recursively serialize objects and arrays.\n\t\t\t  if (typeof value == \"object\") {\n\t\t\t\t// Check for cyclic structures. This is a linear search; performance\n\t\t\t\t// is inversely proportional to the number of unique nested objects.\n\t\t\t\tfor (length = stack.length; length--;) {\n\t\t\t\t  if (stack[length] === value) {\n\t\t\t\t\t// Cyclic structures cannot be serialized by `JSON.stringify`.\n\t\t\t\t\tthrow TypeError();\n\t\t\t\t  }\n\t\t\t\t}\n\t\t\t\t// Add the object to the stack of traversed objects.\n\t\t\t\tstack.push(value);\n\t\t\t\tresults = [];\n\t\t\t\t// Save the current indentation level and indent one additional level.\n\t\t\t\tprefix = indentation;\n\t\t\t\tindentation += whitespace;\n\t\t\t\tif (className == arrayClass) {\n\t\t\t\t  // Recursively serialize array elements.\n\t\t\t\t  for (index = 0, length = value.length; index < length; index++) {\n\t\t\t\t\telement = serialize(index, value, callback, properties, whitespace, indentation, stack);\n\t\t\t\t\tresults.push(element === undef ? \"null\" : element);\n\t\t\t\t  }\n\t\t\t\t  result = results.length ? (whitespace ? \"[\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"]\" : (\"[\" + results.join(\",\") + \"]\")) : \"[]\";\n\t\t\t\t} else {\n\t\t\t\t  // Recursively serialize object members. Members are selected from\n\t\t\t\t  // either a user-specified list of property names, or the object\n\t\t\t\t  // itself.\n\t\t\t\t  forEach(properties || value, function (property) {\n\t\t\t\t\tvar element = serialize(property, value, callback, properties, whitespace, indentation, stack);\n\t\t\t\t\tif (element !== undef) {\n\t\t\t\t\t  // According to ES 5.1 section 15.12.3: \"If `gap` {whitespace}\n\t\t\t\t\t  // is not the empty string, let `member` {quote(property) + \":\"}\n\t\t\t\t\t  // be the concatenation of `member` and the `space` character.\"\n\t\t\t\t\t  // The \"`space` character\" refers to the literal space\n\t\t\t\t\t  // character, not the `space` {width} argument provided to\n\t\t\t\t\t  // `JSON.stringify`.\n\t\t\t\t\t  results.push(quote(property) + \":\" + (whitespace ? \" \" : \"\") + element);\n\t\t\t\t\t}\n\t\t\t\t  });\n\t\t\t\t  result = results.length ? (whitespace ? \"{\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"}\" : (\"{\" + results.join(\",\") + \"}\")) : \"{}\";\n\t\t\t\t}\n\t\t\t\t// Remove the object from the traversed object stack.\n\t\t\t\tstack.pop();\n\t\t\t\treturn result;\n\t\t\t  }\n\t\t\t};\n\n\t\t\t// Public: `JSON.stringify`. See ES 5.1 section 15.12.3.\n\t\t\texports.stringify = function (source, filter, width) {\n\t\t\t  var whitespace, callback, properties, className;\n\t\t\t  if (objectTypes[typeof filter] && filter) {\n\t\t\t\tif ((className = getClass.call(filter)) == functionClass) {\n\t\t\t\t  callback = filter;\n\t\t\t\t} else if (className == arrayClass) {\n\t\t\t\t  // Convert the property names array into a makeshift set.\n\t\t\t\t  properties = {};\n\t\t\t\t  for (var index = 0, length = filter.length, value; index < length; value = filter[index++], ((className = getClass.call(value)), className == stringClass || className == numberClass) && (properties[value] = 1));\n\t\t\t\t}\n\t\t\t  }\n\t\t\t  if (width) {\n\t\t\t\tif ((className = getClass.call(width)) == numberClass) {\n\t\t\t\t  // Convert the `width` to an integer and create a string containing\n\t\t\t\t  // `width` number of space characters.\n\t\t\t\t  if ((width -= width % 1) > 0) {\n\t\t\t\t\tfor (whitespace = \"\", width > 10 && (width = 10); whitespace.length < width; whitespace += \" \");\n\t\t\t\t  }\n\t\t\t\t} else if (className == stringClass) {\n\t\t\t\t  whitespace = width.length <= 10 ? width : width.slice(0, 10);\n\t\t\t\t}\n\t\t\t  }\n\t\t\t  // Opera <= 7.54u2 discards the values associated with empty string keys\n\t\t\t  // (`\"\"`) only if they are used directly within an object member list\n\t\t\t  // (e.g., `!(\"\" in { \"\": 1})`).\n\t\t\t  return serialize(\"\", (value = {}, value[\"\"] = source, value), callback, properties, whitespace, \"\", []);\n\t\t\t};\n\t\t  }\n\n\t\t  // Public: Parses a JSON source string.\n\t\t  if (!has(\"json-parse\")) {\n\t\t\tvar fromCharCode = String.fromCharCode;\n\n\t\t\t// Internal: A map of escaped control characters and their unescaped\n\t\t\t// equivalents.\n\t\t\tvar Unescapes = {\n\t\t\t  92: \"\\\\\",\n\t\t\t  34: '\"',\n\t\t\t  47: \"/\",\n\t\t\t  98: \"\\b\",\n\t\t\t  116: \"\\t\",\n\t\t\t  110: \"\\n\",\n\t\t\t  102: \"\\f\",\n\t\t\t  114: \"\\r\"\n\t\t\t};\n\n\t\t\t// Internal: Stores the parser state.\n\t\t\tvar Index, Source;\n\n\t\t\t// Internal: Resets the parser state and throws a `SyntaxError`.\n\t\t\tvar abort = function () {\n\t\t\t  Index = Source = null;\n\t\t\t  throw SyntaxError();\n\t\t\t};\n\n\t\t\t// Internal: Returns the next token, or `\"$\"` if the parser has reached\n\t\t\t// the end of the source string. A token may be a string, number, `null`\n\t\t\t// literal, or Boolean literal.\n\t\t\tvar lex = function () {\n\t\t\t  var source = Source, length = source.length, value, begin, position, isSigned, charCode;\n\t\t\t  while (Index < length) {\n\t\t\t\tcharCode = source.charCodeAt(Index);\n\t\t\t\tswitch (charCode) {\n\t\t\t\t  case 9: case 10: case 13: case 32:\n\t\t\t\t\t// Skip whitespace tokens, including tabs, carriage returns, line\n\t\t\t\t\t// feeds, and space characters.\n\t\t\t\t\tIndex++;\n\t\t\t\t\tbreak;\n\t\t\t\t  case 123: case 125: case 91: case 93: case 58: case 44:\n\t\t\t\t\t// Parse a punctuator token (`{`, `}`, `[`, `]`, `:`, or `,`) at\n\t\t\t\t\t// the current position.\n\t\t\t\t\tvalue = charIndexBuggy ? source.charAt(Index) : source[Index];\n\t\t\t\t\tIndex++;\n\t\t\t\t\treturn value;\n\t\t\t\t  case 34:\n\t\t\t\t\t// `\"` delimits a JSON string; advance to the next character and\n\t\t\t\t\t// begin parsing the string. String tokens are prefixed with the\n\t\t\t\t\t// sentinel `@` character to distinguish them from punctuators and\n\t\t\t\t\t// end-of-string tokens.\n\t\t\t\t\tfor (value = \"@\", Index++; Index < length;) {\n\t\t\t\t\t  charCode = source.charCodeAt(Index);\n\t\t\t\t\t  if (charCode < 32) {\n\t\t\t\t\t\t// Unescaped ASCII control characters (those with a code unit\n\t\t\t\t\t\t// less than the space character) are not permitted.\n\t\t\t\t\t\tabort();\n\t\t\t\t\t  } else if (charCode == 92) {\n\t\t\t\t\t\t// A reverse solidus (`\\`) marks the beginning of an escaped\n\t\t\t\t\t\t// control character (including `\"`, `\\`, and `/`) or Unicode\n\t\t\t\t\t\t// escape sequence.\n\t\t\t\t\t\tcharCode = source.charCodeAt(++Index);\n\t\t\t\t\t\tswitch (charCode) {\n\t\t\t\t\t\t  case 92: case 34: case 47: case 98: case 116: case 110: case 102: case 114:\n\t\t\t\t\t\t\t// Revive escaped control characters.\n\t\t\t\t\t\t\tvalue += Unescapes[charCode];\n\t\t\t\t\t\t\tIndex++;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t  case 117:\n\t\t\t\t\t\t\t// `\\u` marks the beginning of a Unicode escape sequence.\n\t\t\t\t\t\t\t// Advance to the first character and validate the\n\t\t\t\t\t\t\t// four-digit code point.\n\t\t\t\t\t\t\tbegin = ++Index;\n\t\t\t\t\t\t\tfor (position = Index + 4; Index < position; Index++) {\n\t\t\t\t\t\t\t  charCode = source.charCodeAt(Index);\n\t\t\t\t\t\t\t  // A valid sequence comprises four hexdigits (case-\n\t\t\t\t\t\t\t  // insensitive) that form a single hexadecimal value.\n\t\t\t\t\t\t\t  if (!(charCode >= 48 && charCode <= 57 || charCode >= 97 && charCode <= 102 || charCode >= 65 && charCode <= 70)) {\n\t\t\t\t\t\t\t\t// Invalid Unicode escape sequence.\n\t\t\t\t\t\t\t\tabort();\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// Revive the escaped character.\n\t\t\t\t\t\t\tvalue += fromCharCode(\"0x\" + source.slice(begin, Index));\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t  default:\n\t\t\t\t\t\t\t// Invalid escape sequence.\n\t\t\t\t\t\t\tabort();\n\t\t\t\t\t\t}\n\t\t\t\t\t  } else {\n\t\t\t\t\t\tif (charCode == 34) {\n\t\t\t\t\t\t  // An unescaped double-quote character marks the end of the\n\t\t\t\t\t\t  // string.\n\t\t\t\t\t\t  break;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcharCode = source.charCodeAt(Index);\n\t\t\t\t\t\tbegin = Index;\n\t\t\t\t\t\t// Optimize for the common case where a string is valid.\n\t\t\t\t\t\twhile (charCode >= 32 && charCode != 92 && charCode != 34) {\n\t\t\t\t\t\t  charCode = source.charCodeAt(++Index);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Append the string as-is.\n\t\t\t\t\t\tvalue += source.slice(begin, Index);\n\t\t\t\t\t  }\n\t\t\t\t\t}\n\t\t\t\t\tif (source.charCodeAt(Index) == 34) {\n\t\t\t\t\t  // Advance to the next character and return the revived string.\n\t\t\t\t\t  Index++;\n\t\t\t\t\t  return value;\n\t\t\t\t\t}\n\t\t\t\t\t// Unterminated string.\n\t\t\t\t\tabort();\n\t\t\t\t  default:\n\t\t\t\t\t// Parse numbers and literals.\n\t\t\t\t\tbegin = Index;\n\t\t\t\t\t// Advance past the negative sign, if one is specified.\n\t\t\t\t\tif (charCode == 45) {\n\t\t\t\t\t  isSigned = true;\n\t\t\t\t\t  charCode = source.charCodeAt(++Index);\n\t\t\t\t\t}\n\t\t\t\t\t// Parse an integer or floating-point value.\n\t\t\t\t\tif (charCode >= 48 && charCode <= 57) {\n\t\t\t\t\t  // Leading zeroes are interpreted as octal literals.\n\t\t\t\t\t  if (charCode == 48 && ((charCode = source.charCodeAt(Index + 1)), charCode >= 48 && charCode <= 57)) {\n\t\t\t\t\t\t// Illegal octal literal.\n\t\t\t\t\t\tabort();\n\t\t\t\t\t  }\n\t\t\t\t\t  isSigned = false;\n\t\t\t\t\t  // Parse the integer component.\n\t\t\t\t\t  for (; Index < length && ((charCode = source.charCodeAt(Index)), charCode >= 48 && charCode <= 57); Index++);\n\t\t\t\t\t  // Floats cannot contain a leading decimal point; however, this\n\t\t\t\t\t  // case is already accounted for by the parser.\n\t\t\t\t\t  if (source.charCodeAt(Index) == 46) {\n\t\t\t\t\t\tposition = ++Index;\n\t\t\t\t\t\t// Parse the decimal component.\n\t\t\t\t\t\tfor (; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\n\t\t\t\t\t\tif (position == Index) {\n\t\t\t\t\t\t  // Illegal trailing decimal.\n\t\t\t\t\t\t  abort();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tIndex = position;\n\t\t\t\t\t  }\n\t\t\t\t\t  // Parse exponents. The `e` denoting the exponent is\n\t\t\t\t\t  // case-insensitive.\n\t\t\t\t\t  charCode = source.charCodeAt(Index);\n\t\t\t\t\t  if (charCode == 101 || charCode == 69) {\n\t\t\t\t\t\tcharCode = source.charCodeAt(++Index);\n\t\t\t\t\t\t// Skip past the sign following the exponent, if one is\n\t\t\t\t\t\t// specified.\n\t\t\t\t\t\tif (charCode == 43 || charCode == 45) {\n\t\t\t\t\t\t  Index++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Parse the exponential component.\n\t\t\t\t\t\tfor (position = Index; position < length && ((charCode = source.charCodeAt(position)), charCode >= 48 && charCode <= 57); position++);\n\t\t\t\t\t\tif (position == Index) {\n\t\t\t\t\t\t  // Illegal empty exponent.\n\t\t\t\t\t\t  abort();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tIndex = position;\n\t\t\t\t\t  }\n\t\t\t\t\t  // Coerce the parsed value to a JavaScript number.\n\t\t\t\t\t  return +source.slice(begin, Index);\n\t\t\t\t\t}\n\t\t\t\t\t// A negative sign may only precede numbers.\n\t\t\t\t\tif (isSigned) {\n\t\t\t\t\t  abort();\n\t\t\t\t\t}\n\t\t\t\t\t// `true`, `false`, and `null` literals.\n\t\t\t\t\tif (source.slice(Index, Index + 4) == \"true\") {\n\t\t\t\t\t  Index += 4;\n\t\t\t\t\t  return true;\n\t\t\t\t\t} else if (source.slice(Index, Index + 5) == \"false\") {\n\t\t\t\t\t  Index += 5;\n\t\t\t\t\t  return false;\n\t\t\t\t\t} else if (source.slice(Index, Index + 4) == \"null\") {\n\t\t\t\t\t  Index += 4;\n\t\t\t\t\t  return null;\n\t\t\t\t\t}\n\t\t\t\t\t// Unrecognized token.\n\t\t\t\t\tabort();\n\t\t\t\t}\n\t\t\t  }\n\t\t\t  // Return the sentinel `$` character if the parser has reached the end\n\t\t\t  // of the source string.\n\t\t\t  return \"$\";\n\t\t\t};\n\n\t\t\t// Internal: Parses a JSON `value` token.\n\t\t\tvar get = function (value) {\n\t\t\t  var results, hasMembers;\n\t\t\t  if (value == \"$\") {\n\t\t\t\t// Unexpected end of input.\n\t\t\t\tabort();\n\t\t\t  }\n\t\t\t  if (typeof value == \"string\") {\n\t\t\t\tif ((charIndexBuggy ? value.charAt(0) : value[0]) == \"@\") {\n\t\t\t\t  // Remove the sentinel `@` character.\n\t\t\t\t  return value.slice(1);\n\t\t\t\t}\n\t\t\t\t// Parse object and array literals.\n\t\t\t\tif (value == \"[\") {\n\t\t\t\t  // Parses a JSON array, returning a new JavaScript array.\n\t\t\t\t  results = [];\n\t\t\t\t  for (;; hasMembers || (hasMembers = true)) {\n\t\t\t\t\tvalue = lex();\n\t\t\t\t\t// A closing square bracket marks the end of the array literal.\n\t\t\t\t\tif (value == \"]\") {\n\t\t\t\t\t  break;\n\t\t\t\t\t}\n\t\t\t\t\t// If the array literal contains elements, the current token\n\t\t\t\t\t// should be a comma separating the previous element from the\n\t\t\t\t\t// next.\n\t\t\t\t\tif (hasMembers) {\n\t\t\t\t\t  if (value == \",\") {\n\t\t\t\t\t\tvalue = lex();\n\t\t\t\t\t\tif (value == \"]\") {\n\t\t\t\t\t\t  // Unexpected trailing `,` in array literal.\n\t\t\t\t\t\t  abort();\n\t\t\t\t\t\t}\n\t\t\t\t\t  } else {\n\t\t\t\t\t\t// A `,` must separate each array element.\n\t\t\t\t\t\tabort();\n\t\t\t\t\t  }\n\t\t\t\t\t}\n\t\t\t\t\t// Elisions and leading commas are not permitted.\n\t\t\t\t\tif (value == \",\") {\n\t\t\t\t\t  abort();\n\t\t\t\t\t}\n\t\t\t\t\tresults.push(get(value));\n\t\t\t\t  }\n\t\t\t\t  return results;\n\t\t\t\t} else if (value == \"{\") {\n\t\t\t\t  // Parses a JSON object, returning a new JavaScript object.\n\t\t\t\t  results = {};\n\t\t\t\t  for (;; hasMembers || (hasMembers = true)) {\n\t\t\t\t\tvalue = lex();\n\t\t\t\t\t// A closing curly brace marks the end of the object literal.\n\t\t\t\t\tif (value == \"}\") {\n\t\t\t\t\t  break;\n\t\t\t\t\t}\n\t\t\t\t\t// If the object literal contains members, the current token\n\t\t\t\t\t// should be a comma separator.\n\t\t\t\t\tif (hasMembers) {\n\t\t\t\t\t  if (value == \",\") {\n\t\t\t\t\t\tvalue = lex();\n\t\t\t\t\t\tif (value == \"}\") {\n\t\t\t\t\t\t  // Unexpected trailing `,` in object literal.\n\t\t\t\t\t\t  abort();\n\t\t\t\t\t\t}\n\t\t\t\t\t  } else {\n\t\t\t\t\t\t// A `,` must separate each object member.\n\t\t\t\t\t\tabort();\n\t\t\t\t\t  }\n\t\t\t\t\t}\n\t\t\t\t\t// Leading commas are not permitted, object property names must be\n\t\t\t\t\t// double-quoted strings, and a `:` must separate each property\n\t\t\t\t\t// name and value.\n\t\t\t\t\tif (value == \",\" || typeof value != \"string\" || (charIndexBuggy ? value.charAt(0) : value[0]) != \"@\" || lex() != \":\") {\n\t\t\t\t\t  abort();\n\t\t\t\t\t}\n\t\t\t\t\tresults[value.slice(1)] = get(lex());\n\t\t\t\t  }\n\t\t\t\t  return results;\n\t\t\t\t}\n\t\t\t\t// Unexpected token encountered.\n\t\t\t\tabort();\n\t\t\t  }\n\t\t\t  return value;\n\t\t\t};\n\n\t\t\t// Internal: Updates a traversed object member.\n\t\t\tvar update = function (source, property, callback) {\n\t\t\t  var element = walk(source, property, callback);\n\t\t\t  if (element === undef) {\n\t\t\t\tdelete source[property];\n\t\t\t  } else {\n\t\t\t\tsource[property] = element;\n\t\t\t  }\n\t\t\t};\n\n\t\t\t// Internal: Recursively traverses a parsed JSON object, invoking the\n\t\t\t// `callback` function for each value. This is an implementation of the\n\t\t\t// `Walk(holder, name)` operation defined in ES 5.1 section 15.12.2.\n\t\t\tvar walk = function (source, property, callback) {\n\t\t\t  var value = source[property], length;\n\t\t\t  if (typeof value == \"object\" && value) {\n\t\t\t\t// `forEach` can't be used to traverse an array in Opera <= 8.54\n\t\t\t\t// because its `Object#hasOwnProperty` implementation returns `false`\n\t\t\t\t// for array indices (e.g., `![1, 2, 3].hasOwnProperty(\"0\")`).\n\t\t\t\tif (getClass.call(value) == arrayClass) {\n\t\t\t\t  for (length = value.length; length--;) {\n\t\t\t\t\tupdate(value, length, callback);\n\t\t\t\t  }\n\t\t\t\t} else {\n\t\t\t\t  forEach(value, function (property) {\n\t\t\t\t\tupdate(value, property, callback);\n\t\t\t\t  });\n\t\t\t\t}\n\t\t\t  }\n\t\t\t  return callback.call(source, property, value);\n\t\t\t};\n\n\t\t\t// Public: `JSON.parse`. See ES 5.1 section 15.12.2.\n\t\t\texports.parse = function (source, callback) {\n\t\t\t  var result, value;\n\t\t\t  Index = 0;\n\t\t\t  Source = \"\" + source;\n\t\t\t  result = get(lex());\n\t\t\t  // If a JSON string contains multiple tokens, it is invalid.\n\t\t\t  if (lex() != \"$\") {\n\t\t\t\tabort();\n\t\t\t  }\n\t\t\t  // Reset the parser state.\n\t\t\t  Index = Source = null;\n\t\t\t  return callback && getClass.call(callback) == functionClass ? walk((value = {}, value[\"\"] = result, value), \"\", callback) : result;\n\t\t\t};\n\t\t  }\n\t\t}\n\n\t\texports[\"runInContext\"] = runInContext;\n\t\treturn exports;\n\t  }\n\n\t  if (freeExports && !isLoader) {\n\t\t// Export for CommonJS environments.\n\t\trunInContext(root, freeExports);\n\t  } else {\n\t\t// Export for web browsers and JavaScript engines.\n\t\tvar nativeJSON = root.JSON,\n\t\t\tpreviousJSON = root[\"JSON3\"],\n\t\t\tisRestored = false;\n\n\t\tvar JSON3 = runInContext(root, (root[\"JSON3\"] = {\n\t\t  // Public: Restores the original value of the global `JSON` object and\n\t\t  // returns a reference to the `JSON3` object.\n\t\t  \"noConflict\": function () {\n\t\t\tif (!isRestored) {\n\t\t\t  isRestored = true;\n\t\t\t  root.JSON = nativeJSON;\n\t\t\t  root[\"JSON3\"] = previousJSON;\n\t\t\t  nativeJSON = previousJSON = null;\n\t\t\t}\n\t\t\treturn JSON3;\n\t\t  }\n\t\t}));\n\n\t\troot.JSON = {\n\t\t  \"parse\": JSON3.parse,\n\t\t  \"stringify\": JSON3.stringify\n\t\t};\n\t  }\n\n\t  // Export for asynchronous module loaders.\n\t  if (isLoader) {\n\t\tdefine(function () {\n\t\t  return JSON3;\n\t\t});\n\t  }\n\t}).call(this);\n\n\t}).call(this,typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {})\n\t},{}],51:[function(_dereq_,module,exports){\n\tmodule.exports = toArray\n\n\tfunction toArray(list, index) {\n\t\tvar array = []\n\n\t\tindex = index || 0\n\n\t\tfor (var i = index || 0; i < list.length; i++) {\n\t\t\tarray[i - index] = list[i]\n\t\t}\n\n\t\treturn array\n\t}\n\n\t},{}]},{},[31])(31)\n\t});\n}\n","/*\n * This script is automatically generated by Cocos Creator and is only compatible with projects prior to v2.1.0.\n * You do not need to manually add this script in any other project.\n * If you don't use cc.Toggle in your project, you can delete this script directly.\n * If your project is hosted in VCS such as git, submit this script together.\n *\n * 此脚本由 Cocos Creator 自动生成，仅用于兼容 v2.1.0 之前版本的工程，\n * 你无需在任何其它项目中手动添加此脚本。\n * 如果你的项目中没用到 Toggle，可直接删除该脚本。\n * 如果你的项目有托管于 git 等版本库，请将此脚本一并上传。\n */\n\nif (cc.Toggle) {\n    // Whether the 'toggle' and 'checkEvents' events are fired when 'toggle.check() / toggle.uncheck()' is called in the code\n    // 在代码中调用 'toggle.check() / toggle.uncheck()' 时是否触发 'toggle' 与 'checkEvents' 事件\n    cc.Toggle._triggerEventInScript_check = true;\n}\n"],"file":"index.js"}